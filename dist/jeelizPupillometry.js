 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZPUPILLOMETRY=(function(){window.JEELIZPUPILLOMETRY=function(){function Xb(a){var c=null,d=null,g=null,l=0,p=this,m=null,r={Va:[],yb:"none",oc:!1,xb:null,grid:null};this.B=function(){this.se(m.Va);g.Xf({yb:m.yb,oc:m.oc,xb:m.xb})};this.$e=function(h){return c[h]};this.Hb=function(h){["s32","s34","s27"].forEach(function(q){u.J(q,[{type:"2f",name:"u20",value:h}])});c&&c.forEach(function(q){q.Hb(h)})};this.se=function(h){var q=null;l=h.length;var v=null!==m.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),C=v?m.grid:[1,1];
v&&this.Hb(C);c=h.map(function(y,t){y=Object.assign({},y,{index:t,parent:p,zb:q,sf:t===l-1,Sa:v,$:C});return q=t=0===t?Yb.instance(y):Zb.instance(y)});d=c[0];g=c[l-1];c.forEach(function(y,t){0!==t&&y.Af()})};this.X=function(h){h.g(0);var q=h;c.forEach(function(v){q=v.X(q,!1)});return q};this.Ze=function(){return d.Ye()};this.Ra=function(){return g.bf()};this.kd=function(){return g.kd()};this.u=function(){c&&(c.forEach(function(h){h.u()}),g=d=c=null,l=0)};"undefined"!==typeof a&&(m=Object.assign({},
r,a),this.B())}var fb,Ia,Ja,Pa,Za,gb,hb,ib,jb,kb,lb,mb;function nb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Ab(a,c,d){var g=1,l=0;for(d=c+d-1;d>=c;--d)l+=g*nb(a,d),g*=2;return l}function Bb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),g=0;g<c;++g)d[g]=a.charCodeAt(g);return d}function ob(a){return"string"===typeof a?JSON.parse(a):a}function $b(a){if("undefined"===typeof ob(a).nb){var c=ob(a);a=c.ne;var d=
c.nf,g=c.n;c=Bb(c);for(var l=new Float32Array(g),p=new Float32Array(d),m=a+d+1,r=0;r<g;++r){var h=m*r,q=0===nb(c,h)?1:-1,v=Ab(c,h+1,a);h=h+1+a;for(var C=p.length,y=0,t=h;t<h+C;++t)p[y]=nb(c,t,!0),++y;for(C=h=0;C<d;++C)h+=p[C]*Math.pow(2,-C-1);l[r]=0===h&&0===v?0:q*(1+h)*Math.pow(2,1+v-Math.pow(2,a-1))}a=l}else if(g=ob(a),a=g.nb,0===a)a=new Uint8Array(g.nb);else{d=g.n;g=Bb(g);c=new Uint32Array(d);for(l=0;l<d;++l)c[l]=Ab(g,l*a,a);a=c}return a}function Cb(){return{m:[.5,.5],scale:[1,1],L:!1,Fb:!1,ya:!1,
O:{m:[.5,.5],H:0,xa:1},ca:{m:[.5,.5],H:0}}}function Db(){if(qa===pa.play)return!1;qa=pa.play;Qa.stop();Eb(0)}function Ga(a,c,d,g){a=4*a+c;return d+($a[a]/255+$a[a+8]/65025)*(g-d)}function Eb(){if(qa!==pa.pause){u.Zc();N.reset();N.Na();b.disable(b.DEPTH_TEST);ra.U();u.Ia();var a=X.element.currentTime-X.Ab;0>a&&(X.Ab=X.element.currentTime);1E3*a<D.eg||(X.L.refresh(),X.Ab+=a,u.set("s76"),X.Xa.C(),X.L.g(0),N.l(!1,!1));a=Ea.af();for(var c=0;c<a;++c){Fb=c===a-1;u.set("s77");var d=Gb.Le(ba,S,Ka);pb.C(d,
Ka);X.Xa.g(0);Ra.g(1);N.l(!1,!1);qb.X(pb)}Ea.$d();ra.P();b.viewport(0,0,2,2);u.set("s68");Ra.g(0);N.l(!1,!1);b.readPixels(0,0,2,2,b.RGBA,b.UNSIGNED_BYTE,$a);ea.x=Ga(0,1,-1,1);ea.y=Ga(0,2,-1,1);ea.wc=Ga(0,3,0,1);ea.rx=Ga(1,0,-D.Ha[0],D.Ha[0]);ea.ry=Ga(1,1,-D.Ha[1],D.Ha[1]);ea.vc=Ga(1,2,-D.Ha[2],D.Ha[2]);ea.bb=Ga(1,3,0,1);ia.De=ea.bb-S.detected;ia.dx=ea.x-S.x;ia.dy=ea.y-S.y;ia.Tb=ea.wc-S.s;ia.Qb=ea.rx-S.rx;ia.Rb=ea.ry-S.ry;ia.Sb=ea.vc-S.rz;c=Ea.Se();a=Math.sqrt(ia.dx*ia.dx+ia.dy*ia.dy+ia.Tb*ia.Tb)/
c;c=Math.sqrt(ia.Qb*ia.Qb+ia.Rb*ia.Rb+ia.Sb*ia.Sb)/c;a=1-rb.hc(D.Uc[0],D.Uc[1],a);c=1-rb.hc(D.Ld[0],D.Ld[1],c);a=a*c*rb.hc(D.Kd[0],D.Kd[1],ea.bb);c=ab[++ac%ab.length]=a;for(d=0;d<ab.length;++d)c=Math.min(c,ab[d]);c=Math.max(.5,c);a=Math.min(c,a);a=sa.W(D.Nc[0],D.Nc[1],1-Math.pow(a,D.le));S.x=sa.W(S.x,ea.x,a);S.y=sa.W(S.y,ea.y,a);S.s=sa.W(S.s,ea.wc,a);S.rx=sa.W(S.rx,ea.rx,a);S.ry=sa.W(S.ry,ea.ry,a);S.rz=sa.W(S.rz,ea.vc,a);S.detected=sa.W(S.detected,ea.bb,D.ke);!ca.Da&&S.detected>D.Wc+D.Vc?ca.Da=!0:
ca.Da&&S.detected<D.Wc-D.Vc&&(ca.Da=!1);if(ca.Da){ra.U();var g=ba/ka;a=S.x+D.Je*S.ry*S.s;c=S.y+S.s*D.fd[1]*g;var l=S.s*D.fd[0]*g;d=S.s*D.ib[0];g*=S.s*D.ib[1];d*=2*X.T[0];g*=2*X.T[1];a*=2*X.T[0];c*=2*X.T[1];l*=X.T[0];0<S.rx&&(c*=Math.cos(D.Ne*S.rx));var p=l;p=0>S.ry?p+Math.sin(S.ry)*D.hb[0]:p-Math.sin(S.ry)*D.hb[1];ca.G[0].m[0]=a+p;ca.G[0].m[1]=c;ca.G[0].scale[0]=d;ca.G[0].scale[1]=g;l=0<S.ry?l-Math.sin(S.ry)*D.hb[0]:l+Math.sin(S.ry)*D.hb[1];ca.G[1].m[0]=a-l;ca.G[1].m[1]=c;ca.G[1].scale[0]=d;ca.G[1].scale[1]=
g;ca.G.forEach(bc)}ra.ag();ca.Da&&(b.viewport(0,ka/2,ba/2,ka/2),Hb(ca.G[1]),b.viewport(ba/2,ka/2,ba/2,ka/2),Hb(ca.G[0]),b.viewport(ba/2,ka/4,ba/4,ka/4),Ib(ca.G[1]),b.viewport(ba/2+ba/4,ka/4,ba/4,ka/4),Ib(ca.G[0]),b.viewport(ba/2,0,ba/4,ka/4),Jb(ca.G[1]),b.viewport(ba/2+ba/4,0,ba/4,ka/4),Jb(ca.G[0]),b.viewport(0,0,ba/2,ka/2));u.set("s69");Ra.g(0);X.Xa.g(1);N.l(!1,!1);da.Lb&&(S.pupilLeftRadius=ca.G[0].ca.H,S.pupilRightRadius=ca.G[1].ca.H,da.Lb(S));qa===pa.play&&Qa.Qd(Eb)}}function bc(a){u.set("s70");
u.I("u30",sb*a.scale[0],sb*a.scale[1]);u.da("u46",a.m);u.da("u10",a.scale);u.F("u48",Kb);a.L.C();X.L.g(0);N.l(!1,!1);var c=tb.process(a.L);a.O.m[0]=sa.W(a.O.m[0],c.m[0],D.ac);a.O.m[1]=sa.W(a.O.m[1],c.m[1],D.ac);a.O.H=sa.W(a.O.H,c.H,D.ac);a.O.xa=c.xa;u.set("s71");u.I("u46",a.m[0]+a.scale[0]*(2*a.O.m[0]-1),a.m[1]+a.scale[1]*(2*a.O.m[1]-1));u.I("u10",2*a.O.H*a.scale[0],2*a.O.H*a.scale[1]);X.L.g(0);a.Fb.C();N.l(!1,!1);c=a.ya.A();var d=(D.sa-c)/2;u.set("s72");u.F("u49",Lb);u.I("u50",d/D.sa,c/D.sa);a.ya.C();
a.Fb.g(0);N.l(!1,!1);V.Kf(a.ya,ub);ra.U();for(var g=0,l=[.5,.5],p=0;p<c;++p)for(var m=0;m<c;++m){var r=ub[4*(m+p*c)];r>g&&(g=r,l[0]=(m+d)/D.sa,l[1]=(p+d)/D.sa)}a.ca.m[0]=l[0];a.ca.m[1]=l[1];a.ca.H=D.Bb[0]+g/255*(D.Bb[1]-D.Bb[0]);a.ca.H*=.5}function Hb(a){a.L.g(0);u.set("s73");u.da("u46",a.O.m);u.F("u51",a.O.H);u.F("u52",a.O.xa);N.l(!1,!1)}function Ib(a){a.Fb.g(0);u.set("s74");u.da("u46",a.ca.m);u.F("u53",a.ca.H);N.l(!1,!1)}function Jb(a){a.ya.g(0);u.set("s75");N.l(!1,!1)}function cc(){X.Xa=V.instance({isPot:!0,
isMirror:!0,isLinear:!0,isFloat:!1,width:ba,height:ka});pb=Gb.instance({});var a={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,D.borderWidth,D.borderHeight,0,0,0,0,0])};Ra=dc.instance(a);$a=new Uint8Array(8*a.width);ea={bb:0,x:0,y:0,wc:1,rx:0,ry:0,vc:0};S={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,pupilRightRadius:0};ia={De:0,dx:0,dy:0,Tb:0,Qb:0,Rb:0,Sb:0};ca.G.forEach(function(c){c.L=V.instance({isPot:!1,isLinear:!0,isFloat:!0,width:D.Ub,height:Math.round(D.Ub*D.ib[1]/
D.ib[0])});c.Fb=V.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:D.sa});c.ya=V.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(D.Bf*D.sa)});ub=new Uint8Array(c.ya.A()*c.ya.A()*4)})}function Mb(){u.J("s77",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u56",value:1},{type:"2f",name:"u57",value:La}]);u.J("s78",[{type:"1i",name:"u58",value:0},{type:"1i",name:"u56",value:1},{type:"1f",name:"u61",value:D.minScaleTracked},{type:"1f",name:"u62",value:D.maxScaleTracked},{type:"1f",
name:"u63",value:D.Zf},{type:"1f",name:"u64",value:D.ie},{type:"1f",name:"u65",value:D.fe},{type:"3f",name:"u60",value:[D.Dc[0]*La[0],D.Dc[1]*La[1],D.Dc[2]]}]);u.J("s79",[{type:"1i",name:"u58",value:0}]);u.J("s68",[{type:"1i",name:"u56",value:0},{type:"1f",name:"u66",value:La[0]}]);u.J("s69",[{type:"1i",name:"u56",value:0},{type:"1i",name:"u67",value:1},{type:"2f",name:"u57",value:La}]);var a=[{type:"1i",name:"u1",value:0}];u.J("s70",a);u.J("s71",a);u.J("s72",[{type:"2f",name:"u40",value:D.Bb}].concat(a));
u.J("s73",a);u.J("s74",a);u.J("s75",a)}function Nb(){Ka=qb.Ze();var a=ba/Ka;Pa=D.minScale*a;Za=D.maxScale*a;gb=(1-2*D.borderWidth)/D.nStepsX;hb=(1-2*D.borderHeight)/D.nStepsY;ib=(Za-Pa)/D.nStepsScale;jb=D.borderWidth;kb=D.borderHeight;lb=1-D.borderWidth;mb=1-D.borderHeight;La=[Ka/ba,Ka/ka];fb=0;Ia=D.borderWidth;Ja=D.borderHeight;Sa=Pa}function ec(a){bb.get(da.Kc+D.neuralNetworkPath,function(c){c=JSON.parse(c);a(c)})}function fc(){if(Ta.B({ab:da.ha,width:ba,height:ka,debug:!1,nc:function(){Ma("GLCONTEXT_LOST")},
antialias:!0,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");return!1}function gc(){Ra.Mf(1);b.viewport(0,0,1,1);u.set("s78");u.Tf("u59",Ia,Ja,Sa);N.l(!1,!1);Fb&&(b.viewport(1,0,1,1),u.set("s79"),N.l(!1,!1));1!==++fb%2&&(Sa+=ib,Sa>Za&&(Ia+=gb,Sa=Pa,Ia>lb&&(Ia=jb,Ja+=hb,Ja>mb&&(Ja=kb))))}function vb(){u.J("s76",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u54",value:X.T}])}function Ob(){X.T[0]=.5;X.T[1]=.5;var a=X.cb[1]/X.cb[0],c=Ta.V()/Ta.A();a>c?X.T[1]*=c/a:X.T[0]*=a/c}function Pb(a,c){if(qa===
pa.error)return!1;var d=a.videoHeight;X.cb[0]=a.videoWidth;X.cb[1]=d;X.element=a;c&&c();return!0}function hc(a,c,d){a&&a();a={video:{width:{min:za.minWidth,max:za.maxWidth,ideal:za.idealWidth},height:{min:za.minHeight,max:za.maxHeight,ideal:za.idealHeight}},audio:!1};Y.Mc(a,za.deviceId);Y.get(Y.nd(),function(g){c&&c(g);d(g)},function(){Ma("WEBCAM_UNAVAILABLE")},a)}function Ma(a){qa!==pa.error&&(qa=pa.error,da.Oa&&da.Oa(a))}var sa={dh:function(a){return Math.ceil(Math.log2(a))},Ah:function(a){return Math.log2(a)},
wh:function(a){return 0===Math.log2(a)%1},pg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},qg:function(a,c,d){return Math.min(Math.max(a,c),d)},tg:function(a){return a*Math.PI/180},Fh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Gh:function(a){return Math.round(1E6*a)/1E6},eh:function(a,c){return(100*a/c).toFixed(3)},W:function(a,c,d){return a*(1-d)+c*d},Bh:function(a,c){return a[0]*(1-c)+a[1]*c},He:function(a,c){return sa.ye(a-
c)},ye:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},yg:function(a,c){return Math.abs(sa.He(a,c))},fg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},bb={get:function(a,c,d){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status||0===g.status?c(g.responseText):"undefined"!==typeof d&&d(g.status))};g.send()},cf:function(a){return new Promise(function(c,
d){bb.get(a,c,d)})},$g:function(a,c,d){a+=d?"?"+bb.Ke(d):"";bb.get(a,function(g){c(JSON.parse(g))})},Dh:function(a,c,d){var g=new XMLHttpRequest;g.open("POST",a,!0);g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.onreadystatechange=function(){4!==g.readyState||200!==g.status&&0!==g.status||d(g.responseText)};g.send(c)},Ke:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Og:function(a,
c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},ic={create:function(a,c){for(var d=Array(c),g=0;g<c;++g)d[g]=a;return d},ug:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Jh:function(a,c,d){a.forEach(function(g,l){c[l]=g*d})},Sh:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),g=a[c];a[c]=a[d];a[d]=g}},Vh:function(a){return a.sort(function(c,
d){return c-d})},Yf:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},wb={Ob:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=wb.Ob(a[d],c);return a},xg:function(a){return JSON.parse(JSON.stringify(a))}},rb={Th:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},hc:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Ig:function(a,c,d,g){return Math.pow(Math.min(Math.max((g-
a)/(c-a),0),1),d)},ai:function(){return 0},Ch:function(){return 1},zh:function(a){return a},Fg:function(a){return a*a},Kg:function(a){return a*(2-a)},Cg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Ag:function(a){return a*a*a},Jg:function(a){return--a*a*a+1},Bg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Gg:function(a){return a*a*a*a},Lg:function(a){return 1- --a*a*a*a},Dg:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Hg:function(a){return a*a*a*a*a},Mg:function(a){return 1+--a*a*a*a*
a},Eg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},jc={Pe:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},u=function(){function a(e,n,H){n=e.createShader(n);e.shaderSource(n,H);e.compileShader(n);
return e.getShaderParameter(n,e.COMPILE_STATUS)?n:null}function c(e,n,H){n=a(e,e.VERTEX_SHADER,n);H=a(e,e.FRAGMENT_SHADER,H);e===b&&r.push(n,H);var L=e.createProgram();e.attachShader(L,n);e.attachShader(L,H);e.linkProgram(L);return L}function d(e){return["float","sampler2D","int"].map(function(n){return"precision "+e+" "+n+";\n"}).join("")}function g(e,n){n.o=n.o?!0:!1;if(!n.o){n.oa=n.oa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
n.Aa=n.Aa||["a0"];n.ra=n.ra||[2];n.precision=n.precision||y;n.id=v++;void 0!==n.Rd&&(n.Rd.forEach(function(P,fa){n.h=n.h.replace(P,n.Cb[fa])}),n.Rd.splice(0));n.Gc=0;n.ra.forEach(function(P){n.Gc+=4*P});var H=d(n.precision);n.wa=c(e,H+n.oa,H+n.h);n.D={};n.i.forEach(function(P){n.D[P]=e.getUniformLocation(n.wa,P)});n.attributes={};n.Ma=[];n.Aa.forEach(function(P){var fa=e.getAttribLocation(n.wa,P);n.attributes[P]=fa;n.Ma.push(fa)});if(n.j){e.useProgram(n.wa);q=n;h=n.id;for(var L in n.j)e.uniform1i(n.D[L],
n.j[L])}n.ua=!0}}function l(e){wa.Sf(M);h!==e.id&&(M.S(),h=e.id,q=e,b.useProgram(e.wa),e.Ma.forEach(function(n){0!==n&&b.enableVertexAttribArray(n)}))}function p(e,n,H){g(e,n,H);e.useProgram(n.wa);e.enableVertexAttribArray(n.attributes.a0);h=-1;return q=n}function m(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var r=[],h=-1,q=null,v=0,C=!1,y="highp",t=["u1"],F=["u0"],A={u1:0},k={u0:0},K={u1:0,u2:1},O={u1:0,u3:1},I=["u1","u3","u4"],
E={u5:0},f=["u6","u7","u8","u9"],x={u6:0,u7:1},G={s0:m(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:t,j:A,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:K},s3:{h:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:A,o:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:t,j:A},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:K},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:t,j:A},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:t,j:A},s8:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:k},s9:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:k},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:t,j:A},s11:{h:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:A},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:t,j:A,o:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:t,j:A,o:!0},s15:{h:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:A},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:F,j:k,o:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:F,j:k,o:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:F,j:k,o:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:F,j:k,o:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:F,j:k},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:F,j:k},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:F,j:k,o:!0},s23:{h:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},o:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:A},s25:{h:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},x),o:!0},s26:{h:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:f,j:x},s27:{h:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(f),j:x,o:!0},s28:{h:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(f),j:Object.assign({u25:3,u22:4,u23:5,u24:6},x),o:!0},s29:{h:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(f),j:Object.assign({u3:2},x)},s30:{h:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:x,o:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:I,j:O},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(I),j:O,o:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:I,j:O,o:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(I),j:O,o:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:I,j:O,o:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:t,j:A,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:A,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:A,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:K,o:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:K,o:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:E},s42:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:E,o:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:A,precision:"lowp",o:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:A,precision:"lowp",o:!0},s45:{h:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},o:!0}},J={s46:{h:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Cb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Cb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},w=null,Q=null,M={ub:function(){return C},B:function(){if(!C){w=wb.Ob(G,2);Q=wb.Ob(J,2);y="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var e in w)g(b,w[e],e);u.set("s0");b.enableVertexAttribArray(0);C=!0}},Ya:function(e){e.forEach(function(n){M.fa(n)})},fa:function(e){w[e.id]=e;g(b,e,e.id)},hf:function(e,
n,H){n||(n=e);w[n]=Object.create(Q[e]);w[n].rf=!0;Q[e].Cb&&Q[e].Cb.forEach(function(L,P){w[n].h=w[n].h.replace(new RegExp(L,"g"),H[P])});g(b,w[n],n)},set:function(e){var n=w[e];n.o&&(n.o=!1,g(b,n,e));l(n)},Wa:function(e){return p(e,m(),"s48")},xc:function(e){return p(e,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s49")},Me:function(e){return"undefined"===typeof w[e]?!1:w[e].ua},S:function(){-1!==h&&(h=-1,q.Ma.forEach(function(e){0!==e&&b.disableVertexAttribArray(e)}))},yc:function(){var e=
0;q.Ma.forEach(function(n,H){H=q.ra[H];b.vertexAttribPointer(n,H,b.FLOAT,!1,q.Gc,e);e+=4*H})},Zc:function(){b.enableVertexAttribArray(0)},Ia:function(){M.Db(b)},Db:function(e){e.vertexAttribPointer(q.Ma[0],2,e.FLOAT,!1,8,0)},Nh:function(e,n){b.uniform1i(q.D[e],n)},F:function(e,n){b.uniform1f(q.D[e],n)},I:function(e,n,H){b.uniform2f(q.D[e],n,H)},da:function(e,n){b.uniform2fv(q.D[e],n)},Oh:function(e,n){b.uniform3fv(q.D[e],n)},Tf:function(e,n,H,L){b.uniform3f(q.D[e],n,H,L)},Uf:function(e,n,H,L,P){b.uniform4f(q.D[e],
n,H,L,P)},Wd:function(e,n){b.uniform4fv(q.D[e],n)},Ph:function(e,n){b.uniformMatrix2fv(q.D[e],!1,n)},Qh:function(e,n){b.uniformMatrix3fv(q.D[e],!1,n)},Rh:function(e,n){b.uniformMatrix4fv(q.D[e],!1,n)},J:function(e,n){M.set(e);n.forEach(function(H){switch(H.type){case "4f":b.uniform4fv(q.D[H.name],H.value);break;case "3f":b.uniform3fv(q.D[H.name],H.value);break;case "2f":b.uniform2fv(q.D[H.name],H.value);break;case "1f":b.uniform1f(q.D[H.name],H.value);break;case "1i":b.uniform1i(q.D[H.name],H.value);
break;case "mat2":b.uniformMatrix2fv(q.D[H.name],!1,H.value);break;case "mat3":b.uniformMatrix3fv(q.D[H.name],!1,H.value);break;case "mat4":b.uniformMatrix4fv(q.D[H.name],!1,H.value)}})},bh:function(){return"lowp"},u:function(){M.S();b.disableVertexAttribArray(0);for(var e in w){var n=w[e];n.ua&&(n.ua=!1,b.deleteProgram(n.wa));n.rf&&delete w[e]}r.forEach(function(H){b.deleteShader(H)});r.splice(0);v=0;C=!1;q=null;h=-1}};return M}(),b=null,Ta=function(){function a(t){console.log("ERROR in ContextFF: ",
t);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(t,F,A){t.setAttribute("width",F);t.setAttribute("height",A)}function g(t){if(c())return!1;var F=document.createElement("canvas");d(F,5,5);var A=null;try{A=F.getContext("webgl2",t)}catch(k){return!1}if(!A)return!1;l(A);Z.$c(A);t=Z.Pb(A);if(!t.ja&&!t.la)return Aa.u(),Z.reset(),!1;A=Aa.Oc(A,t);Aa.u();Z.reset();return A?!0:!1}function l(t){t.clearColor(0,0,0,0);t.disable(t.DEPTH_TEST);t.disable(t.BLEND);
t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.disable(t.CULL_FACE);t.GENERATE_MIPMAP_HINT&&t.FASTEST&&t.hint(t.GENERATE_MIPMAP_HINT,t.FASTEST);t.disable(t.SAMPLE_ALPHA_TO_COVERAGE);t.disable(t.SAMPLE_COVERAGE);t.depthFunc(t.LEQUAL);t.clearDepth(1)}var p=null,m=null,r=null,h=!0,q=null,v=null,C=[],y={A:function(){return p.width},V:function(){return p.height},Tg:function(){return p},Rg:function(){return b},ma:function(){return h},flush:function(){b.flush()},mh:function(){ra.U();y.Lf()},Lf:function(){V.reset();
N.reset();u.S();u.Zc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);N.Na();u.Ia()},Re:function(){q||(q=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,q);return q},Vg:function(){return p.toDataURL("image/jpeg")},Wg:function(){ra.P();m||(m=document.createElement("canvas"),r=m.getContext("2d"));d(m,p.width,p.height);for(var t=y.Re(),F=r.createImageData(m.width,m.height),A=m.width,k=m.height,K=F.data,O=0;O<k;++O)for(var I=k-O-1,E=0;E<A;++E){var f=4*(O*A+E),
x=4*(I*A+E);K[f]=t[x];K[f+1]=t[x+1];K[f+2]=t[x+2];K[f+3]=t[x+3]}r.putImageData(F,0,0);return m.toDataURL("image/png")},Ug:function(t){!m&&t&&(m=document.createElement("canvas"),r=m.getContext("2d"));var F=t?m:document.createElement("canvas");d(F,p.width,p.height);(t?r:F.getContext("2d")).drawImage(p,0,0);return F},B:function(t){t=Object.assign({ka:null,nc:null,ab:null,Tc:null,width:512,height:512,premultipliedAlpha:!1,mf:!0,antialias:!1,debug:!1,wg:!1},t);t.ka?(b=t.ka,p=t.ka.canvas):t.Tc&&!t.ab?p=
document.getElementById(t.Tc):t.ab&&(p=t.ab);p||(p=document.createElement("canvas"));p.width=t.width;p.height=t.height;if(b)h=b instanceof WebGL2RenderingContext;else{h=!0;var F={antialias:t.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:t.premultipliedAlpha,stencil:!1,depth:t.mf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(F.antialias=!1);var A=g(F);A||!F.antialias||c()||(F.antialias=
!1,A=g(F));A&&(b=p.getContext("webgl2",F));b?h=!0:((b=p.getContext("webgl",F))||(b=p.getContext("experimental-webgl",F)),h=!1)}if(!b)return a("WebGL1 and 2 are not enabled");t.nc&&p.addEventListener&&(v=t.nc,p.addEventListener("webglcontextlost",v,!1));if(!Z.B())return a("Not enough GL capabilities");l(b);u.B();N.B();Aa.Oc(b,Z.Qe());C.forEach(function(k){k(b)});C.splice(0);return!0},kg:function(){return new Promise(function(t){b?t(b):C.push(t)})},u:function(){b&&(Z.u(),u.u(),Aa.u());v&&(p.removeEventListener("webglcontextlost",
v,!1),v=null);b=q=r=m=p=null;C.splice(0)}};return y}(),wa=function(){function a(){null===c&&("undefined"!==typeof u?c=u:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Sf:function(d){c!==d&&(c&&c.S(),c=d)},ub:function(){return c.ub()},Ia:function(){return c.Ia()},Db:function(d){return c.Db(d)},yc:function(){return c.yc()},S:function(){return c.S()},set:function(d){a();return c.set(d)},Wa:function(d){a();return c.Wa(d)},xc:function(d){a();return c.xc(d)}}}(),
ya=function(){function a(e){b.bindTexture(b.TEXTURE_2D,e)}function c(e){J[0]=e;e=w[0];var n=e>>16&32768,H=e>>12&2047,L=e>>23&255;return 103>L?n:142<L?n|31744|((255==L?0:1)&&e&8388607):113>L?(H|=2048,n|(H>>114-L)+(H>>113-L&1)):n=(n|L-112<<10|H>>1)+(H&1)}function d(e){var n=new Uint16Array(e.length);e.forEach(function(H,L){n[L]=c(H)});return n}function g(){if(null!==Q.Zb)return Q.Zb;var e=p(d([.5,.5,.5,.5]),!0);return null===e?!0:Q.Zb=e}function l(){if(null!==Q.$b)return Q.$b;var e=p(new Uint8Array([127,
127,127,127]),!1);return null===e?!0:Q.$b=e}function p(e,n){if(!wa.ub()||!A)return null;var H=null,L=Math.sqrt(e.length/4);try{var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;H=M.instance({isFloat:!1,R:n,array:e,width:L});P=b.getError();if(P!==b.NO_ERROR)return!1}catch(fa){return!1}oa.P();b.viewport(0,0,L,L);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);wa.set("s0");H.Ba(0);na.l(!0,!0);e=4*L*L;n=new Uint8Array(e);b.readPixels(0,0,L,L,b.RGBA,b.UNSIGNED_BYTE,n);L=!0;for(P=0;P<e;++P)L=L&&
3>Math.abs(n[P]-127);H.remove();oa.U();return L}var m=0,r=null,h=0,q=null,v=null,C=null,y=null,t=null,F=null,A=!1,k=[],K={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,yd:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,M:null,od:null,qf:!1,R:!1,K:null,wb:4,ic:0},O=!1,I=null,E=null,f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],x=!1,G=!1,J=new Float32Array(1),w=new Int32Array(J.buffer),Q={Zb:null,$b:null},M={B:function(){A||
(t=[b.RGBA,null,b.RGBA,b.RGBA],F=[b.RGBA,null,b.RGBA,b.RGBA],r=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],x="undefined"!==typeof JEContext,G="undefined"!==typeof Z,x&&JEContext.xh()&&r.push(b.TEXTURE8,b.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],A=!0)},gf:function(){if(!v){for(var e=new Float32Array(16384),n=0;16384>n;++n)e[n]=2*Math.random()-1;v={random:M.instance({isFloat:!0,isPot:!0,array:e,width:64}),be:M.instance({isFloat:!1,
isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}M.dg()},Ud:function(e){b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0)},kh:function(){return v.be},dg:function(){y[1]=Z.Wb(b)},Pf:function(){F=t=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Pd:function(e){u.set("s1");oa.P();var n=e.A(),H=e.V();b.viewport(0,0,n,H);e.g(0);na.l(!1,!1)},Kf:function(e,n){M.Pd(e);b.readPixels(0,0,e.A(),e.V(),b.RGBA,b.UNSIGNED_BYTE,n)},Eh:function(e,n){M.Pd(e);return Z.uc(0,0,e.A(),e.V(),n)},hd:function(e,n,H,L,
P,fa,ua){e.activeTexture(e.TEXTURE0);var Ca=e.createTexture();e.bindTexture(e.TEXTURE_2D,Ca);P=P instanceof Float32Array?P:new Float32Array(P);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,fa);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,H,L,0,e.RGBA,e.FLOAT,P);e.bindTexture(e.TEXTURE_2D,
null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);ua&&(oa.U(),u.Wa(e));e.viewport(0,0,H,L);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.bindTexture(e.TEXTURE_2D,Ca);ua?na.l(!0,!0):N.kb(e);e.deleteTexture(Ca);A&&(q[0]=-1,C=null,m=0)},Kb:function(e){e!==m&&(b.activeTexture(r[e]),m=e)},instance:function(e){var n;function H(){T=void 0!==z.M.videoWidth?z.M.videoWidth:z.M.width;U=void 0!==z.M.videoHeight?z.M.videoHeight:z.M.height}function L(B){var R=b.getError();if("FUCKING_BIG_ERROR"===
R)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,B);R=b.getError();R!==b.NO_ERROR&&ha!==b.RGBA&&(ha=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,B));return!0}function P(){if(!Qb){a(ta);Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ba);z.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,z.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,z.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));z.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Xg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.gg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,z.isLinear?b.LINEAR:b.NEAREST);var B=z.isMipmap&&!Na;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,z.yd?b.LINEAR_MIPMAP_LINEAR:z.isLinear?B?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:B?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);ha=t[z.wb-1];la=F[z.wb-1];ja=y[xb];Z.ma()&&(B=Z.Te(),ha===
b.RGBA&&ja===b.FLOAT?z.isMipmap||z.isLinear?la=Aa.Ve(b):Z.Pc()?B&&(la=B):la=b.RGBA16F||b.RGBA:ha===b.RGB&&ja===b.FLOAT&&B&&(la=B,ha=b.RGBA));if(z.R&&!z.isFloat||z.isFloat&&z.isMipmap&&Aa.uf())la=Z.Ue(),ja=Z.Wb(b);z.ic&&(cb=z.ic);z.isSrgb&&4===z.wb&&(ha=JEContext.ih());if(z.M)L(z.M);else if(z.url)L(Fa);else if(va){B=va;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,B),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null),b.getError()!==b.NO_ERROR&&
b.texImage2D(b.TEXTURE_2D,0,b.RGBA,T,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(wc){b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null)}z.isKeepArray||(va=null)}else B=b.getError(),"FUCKING_BIG_ERROR"!==B&&(b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null),B=b.getError(),B!==b.NO_ERROR&&(ha=b.RGBA,z.R&&ja!==b.FLOAT&&(ja=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null))));if(z.isMipmap)if(!Na&&aa)aa.mb(),db=!0;else if(Na){B=Math.log2(Math.min(T,U));Oa=Array(1+B);Oa[0]=ta;for(var R=1;R<=B;++R){var ma=
Math.pow(2,R),W=T/ma;ma=U/ma;var Ha=b.createTexture();a(Ha);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,W,ma,0,ha,ja,null);a(null);Oa[R]=Ha}db=!0}a(null);q[m]=-1;Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;z.K&&aa&&(z.K(aa),z.K=null)}}function fa(){for(var B=T*U,R=2*B,ma=3*B,W=0;W<B;++W)xa[0][W]=Va[W],xa[1][W]=Va[W+B],xa[2][W]=Va[W+R],xa[3][W]=Va[W+ma]}function ua(){var B=T*U*4;Da=[new Uint8Array(B),
new Uint8Array(B),new Uint8Array(B),new Uint8Array(B)];xa=[new Float32Array(Da[0].buffer),new Float32Array(Da[1].buffer),new Float32Array(Da[2].buffer),new Float32Array(Da[3].buffer)];eb=new Uint8Array(4*B);Va=new Float32Array(eb.buffer);Wa=!0}function Ca(){n=new Uint8Array(T*U*4);Rb=new Float32Array(n.buffer);yb=!0}var z=Object.assign({},K,e),Xa=h++;null===z.isFlipY&&(z.isFlipY=z.url?!0:!1);z.data&&(z.array="string"===typeof z.data?$b(z.data):z.isFloat?new Float32Array(z.data):new Uint8Array(z.data),
z.isFlipY=!1);var xb=0,Sb=z.M?!0:!1,Ya=null,zb=null,Tb=!1;z.R=z.R||z.isFloat;z.R&&(xb=1);!z.qf&&z.isFloat&&G&&!Z.Pc()&&(z.isFloat=!1);z.isFloat&&(xb=2);z.isAnisotropicFiltering&&x&&!JEContext.qh()&&(z.isAnisotropicFiltering=!1);var ta=z.od||b.createTexture(),Fa=null,va=!1,T=0,U=0,Ua=!1,Qb=!1,Wa=!1,xa=null,Da=null,eb=null,Va=null,la=null,ha=null,ja=null,Ba=z.isFlipY,kc=(e=z.R&&z.isMipmap)&&Aa.te(),Na=e&&!kc?!0:!1,Oa=null,cb=-1,Ub=-1,db=!1;var yb=!1;var Rb=n=null;z.width&&(T=z.width,U=z.height?z.height:
T);var aa={get:function(){return ta},A:function(){return T},V:function(){return U},lh:function(){return z.url},rh:function(){return z.isFloat},th:function(){return z.R},Lh:function(B){ta=B},uh:function(){return z.isLinear},mb:function(){b.generateMipmap(b.TEXTURE_2D)},qe:function(B,R){Na?(B||(B=aa.ld()),M.Kb(R),a(Oa[B]),q[R]=-1):aa.g(R)},ld:function(){-1===cb&&(cb=Math.log2(T));return cb},Vd:function(B){b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,B)},Oe:function(B){B||(B=
aa.ld());if(Na){u.set("s12");M.Kb(0);for(var R=T,ma=U,W=1;W<=B;++W)R/=2,ma/=2,u.I("u14",.25/R,.25/ma),b.viewport(0,0,R,ma),a(Oa[W-1]),b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Oa[W],0),na.l(!1,1===W);q[0]=-1}else B!==Ub&&(Ub=B,aa.Vd(B)),aa.mb()},Mh:function(B){(Sb=!ic.Yf(B))?(va=null,z.M=B,H()):va=B},g:function(B){if(!Ua)return!1;M.Kb(B);if(q[B]===Xa)return!1;a(ta);q[B]=Xa;return!0},Ba:function(B){b.activeTexture(r[B]);m=B;a(ta);q[B]=Xa},v:function(){C=aa;M.Ud(ta)},C:function(){b.viewport(0,
0,T,U);C=aa;M.Ud(ta)},Ec:M.Ec,Of:function(B,R){T=B;U=R},resize:function(B,R){aa.Of(B,R);P()},clone:function(B){B=M.instance({width:T,height:U,R:z.R,isFloat:z.isFloat,isLinear:z.isLinear,isMirrorY:z.isMirrorY,isFlipY:B?!Ba:Ba,isPot:z.isPot});wa.set("s0");oa.U();B.C();aa.g(0);na.l(!0,!0);return B},Vf:function(){b.viewport(0,0,T,U)},remove:function(){b.deleteTexture(ta);Qb=!0;k.splice(k.indexOf(aa),1);aa=null},refresh:function(){aa.Ba(0);Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Sb?b.texImage2D(b.TEXTURE_2D,
0,la,ha,ja,z.M):b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,va);Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Od:function(){Wa||ua();b.readPixels(0,0,T,4*U,b.RGBA,b.UNSIGNED_BYTE,eb);fa();return xa},Gf:function(){Wa||ua();return Z.uc(0,0,T,4*U,eb).then(function(){fa();return xa})},If:function(){yb||Ca();b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,n);return Rb},Hf:function(){yb||Ca();return Z.uc(0,0,T,U,n)},Xc:function(B){oa.P();u.set("s15");aa.g(0);if(B)b.viewport(0,0,T,U),u.Uf("u15",.25,.25,.25,.25),
na.l(!1,!0);else for(B=0;4>B;++B)b.viewport(0,U*B,T,U),u.Wd("u15",f[B]),na.l(!1,0===B)},Fc:function(B){var R=ja===y[0]&&!l();a(ta);Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);R?(Tb||(Ya=document.createElement("canvas"),Ya.width=T,Ya.height=U,zb=Ya.getContext("2d"),zb.createImageData(T,U),Tb=!0),null.data.set(B),zb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,Ya)):b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,B);q[m]=Xa;Ba&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},$h:function(B,R){a(ta);
R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,B);q[m]=Xa;R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Kh:function(B,R){var ma=T*U,W=4*ma;B=z.R?B?"RGBE":"JSON":"RGBA";R&&(B=R);R=Z.ma()&&!1;var Ha=null;switch(B){case "RGBE":Ha="s13";break;case "JSON":Ha=R?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Ha="s7"}Wa||("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B?(Da=new Uint8Array(W),Wa=!0):"JSON"!==B||R||ua());oa.P();u.set(Ha);aa.g(0);W=null;if("RGBA"===B||"RGBE"===B||"RGBAARRAY"===
B){b.viewport(0,0,T,U);na.l(!0,!0);b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,Da);if("RGBAARRAY"===B)return{data:Da};O||(I=document.createElement("canvas"),E=I.getContext("2d"),O=!0);I.width=T;I.height=U;ma=E.createImageData(T,U);ma.data.set(Da);E.putImageData(ma,0,0);W=I.toDataURL("image/png")}else if("JSON"===B)if(R)W=new Float32Array(ma),b.viewport(0,0,T,U),na.l(!0,!0),b.readPixels(0,0,T,U,b.RGBA,b.FLOAT,W);else{for(W=0;4>W;++W)b.viewport(0,U*W,T,U),u.Wd("u15",f[W]),na.l(!W,!W);aa.Od();W=Array(ma);
for(R=0;R<ma;++R)W[4*R]=xa[0][R],W[4*R+1]=xa[1][R],W[4*R+2]=xa[2][R],W[4*R+3]=xa[3][R]}return{format:B,data:W,width:T,height:U,isMirrorY:z.isMirrorY,isFlipY:"RGBA"===B?z.isFlipY:!z.isFlipY}}};z.isMipmap&&!Na&&Ua&&!db&&(aa.mb(),db=!0);if(z.url)a(ta),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Fa=new Image,Fa.vg="Anonymous",Fa.crossOrigin="Anonymous",Fa.src=z.url,Fa.onload=function(){T=Fa.width;U=Fa.height;P()};else if(z.M){var Vb=function(){H();T?P():setTimeout(Vb,1)};Vb()}else z.array?
(z.R&&!z.isFloat?z.array instanceof Uint16Array?(va=z.array,P()):g()?(va=d(z.array),P()):(P(),M.hd(b,ta,aa.A(),aa.V(),z.array,Ba,!0)):(va=z.isFloat?z.array instanceof Float32Array?z.array:new Float32Array(z.array):z.array instanceof Uint8Array?z.array:new Uint8Array(z.array),P()),z.isKeepArray||(va&&va!==z.array&&(va=null),delete z.array)):z.od?Ua=!0:P();aa.hh=aa.A;z.K&&Ua&&(z.K(aa),z.K=null);k.push(aa);return aa},P:function(e){e!==m&&(b.activeTexture(r[e]),m=e);q[e]=-1;a(null)},jg:function(e){v.random.g(e)},
Ec:function(){C=null;b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==m&&b.activeTexture(r[0]);for(var e=0;e<r.length;++e)q[e]=-1;m=-1},Hh:function(){m=-1},$f:function(){for(var e=0;e<r.length;++e)M.P(e)},jd:function(){v&&(v.random.remove(),v.be.remove())},Zh:function(e,n){if("RGBA"===e.format||"RGBE"===e.format){var H=new Image;H.src=e.data;H.onload=function(){M.instance({isMirrorY:e.isMirrorY,isFlipY:e.isFlipY,isFloat:!1,M:H,K:function(L){if("RGBA"===
e.format)n(L);else{var P=e.width,fa=e.height,ua=M.instance({isMirrorY:e.isMirrorY,isFloat:!0,width:P,height:fa,isFlipY:e.isFlipY});oa.U();b.viewport(0,0,P,fa);u.set("s14");ua.v();L.g(0);na.l(!0,!0);M.P(0);n(ua);Z.flush();L.remove()}}})}}else"JSON"===e.format?n(M.instance({isFloat:!0,isFlipY:e.isFlipY,width:e.width,height:e.height,array:new Float32Array(e.data)})):n(!1)},Ae:d,u:function(){C&&(ra.U(),M.Ec(),ra.P());M.$f();k.slice(0).forEach(function(e){e.remove()});k.splice(0);A=!1;h=0;"undefined"!==
typeof Aa&&Aa.u();v=null}};return M}(),dc=function(){return{instance:function(a){var c=[ya.instance(a),ya.instance(a)],d=[c[1],c[0]],g=d,l={Mf:function(p){g[1].v();g[0].g(p);l.Yd()},Nf:function(p){g[1].C();g[0].g(p);l.Yd()},Yd:function(){g=g===c?d:c},refresh:function(){g[0].refresh();g[1].refresh()},g:function(p){g[0].g(p)},Ba:function(p){g[0].Ba(p)},ig:function(p){g[1].g(p)},ah:function(){return g[0]},fh:function(){return g[1]},Fc:function(p){g[0].Fc(p);g[1].Fc(p)},remove:function(){g[0].remove();
g[1].remove();g=null},sync:function(){l.Nf(0);u.set("s0");N.l(!1,!1)}};return l}}}(),na=function(){function a(h){var q={ea:null,indices:null};q.ea=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,q.ea);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);q.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,q.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return q}var c=null,d=0,g=!1,l=[],p=-2,m=-2,r={reset:function(){m=p=-2},B:function(){g||
(c=a(b),r.Na(),g=!0)},instance:function(h){var q=d++,v=h.indices?h.indices.length:0,C="undefined"===typeof h.mode?b.STATIC_DRAW:h.mode,y=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,y);b.bufferData(b.ARRAY_BUFFER,h.ea instanceof Float32Array?h.ea:new Float32Array(h.ea),C);p=q;var t=null,F=null,A=null;if(h.indices){t=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t);var k=null;65536>h.indices.length?(k=Uint16Array,F=b.UNSIGNED_SHORT,A=2):(k=Uint32Array,F=b.UNSIGNED_INT,A=4);k=h.indices instanceof
k?h.indices:new k(h.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,k,C);m=q}var K={re:function(O){p!==q&&(b.bindBuffer(b.ARRAY_BUFFER,y),p=q);O&&wa.yc()},oe:function(){m!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,t),m=q)},bind:function(O){K.re(O);K.oe()},Ie:function(){b.drawElements(b.TRIANGLES,v,F,0)},zg:function(O,I){b.drawElements(b.TRIANGLES,O,F,I*A)},remove:function(){b.deleteBuffer(y);h.indices&&b.deleteBuffer(t);K=null}};l.push(K);return K},Na:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ea),
p=-1);-1!==m&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),m=-1)},l:function(h,q){h&&na.Na();q&&wa.Ia();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},kb:function(h){h=h||b;var q=a(h);h.bindBuffer(h.ARRAY_BUFFER,q.ea);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,q.indices);wa.Db(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(q.ea);h.deleteBuffer(q.indices);r.reset();g&&
(r.Na(),wa.Ia())},jd:function(){var h=b,q=c;h.deleteBuffer(q.ea);h.deleteBuffer(q.indices)},u:function(){r.jd();l.forEach(function(h){h.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);r.reset();g=!1;l.splice(0);d=0}};return r}(),oa=function(){var a=null,c=null,d=null,g=!1,l=[],p={N:-2,gd:1},m={ub:function(){return g},B:function(){if(!g){a=b.createFramebuffer();var r=Z.ma();c=r&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=r&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:
b.FRAMEBUFFER;g=!0}},Yg:function(){return c},We:function(){return d},Xb:function(){return b.FRAMEBUFFER},gh:function(){return p},Qg:function(){return a},instance:function(r){void 0===r.ud&&(r.ud=!1);var h=r.L?r.L:null,q=r.width,v=void 0!==r.height?r.height:r.width,C=a,y=null,t=!1,F=!1,A=0;h&&(q=q?q:h.A(),v=v?v:h.V());var k={Sd:function(){t||(C=b.createFramebuffer(),t=!0,A=p.gd++)},je:function(){k.Sd();k.v();y=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,y);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,q,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,y);b.clearDepth(1)},bind:function(K,O){A!==p.N&&(b.bindFramebuffer(c,C),p.N=A);h&&h.v();O&&b.viewport(0,0,q,v);K&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},hg:function(){A!==p.N&&(b.bindFramebuffer(c,C),p.N=A)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},rg:function(){b.clear(b.COLOR_BUFFER_BIT)},sg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Vf:function(){b.viewport(0,0,q,v)},v:function(){A!==
p.N&&(b.bindFramebuffer(c,C),p.N=A)},rtt:function(K){h=K;p.N!==A&&(b.bindFramebuffer(b.FRAMEBUFFER,C),p.N=A);K.v()},P:function(){b.bindFramebuffer(c,null);p.N=-1},resize:function(K,O){q=K;v=O;y&&(b.bindRenderbuffer(b.RENDERBUFFER,y),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,q,v))},remove:function(){C===a||F||(b.bindFramebuffer(c,C),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),y&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,
null),b.deleteFramebuffer(C),y&&b.deleteRenderbuffer(y));F=!0}};r.ud&&k.je();l.push(k);return k},P:function(){b.bindFramebuffer(c,null);p.N=-1},ag:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.Xd();p.N=-1},reset:function(){p.N=-2},U:function(){0!==p.N&&(b.bindFramebuffer(c,a),p.N=0)},clear:function(){Z.Xd();b.clear(b.COLOR_BUFFER_BIT)},u:function(){m.P();l.forEach(function(r){r.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);m.reset();g=!1;l.splice(0);
p.gd=1}};return m}(),Z=function(){function a(){r="undefined"===typeof Ta?JEContext:Ta;h=!0}function c(f,x,G){for(var J=0;J<x.length;++J){var w=G.getExtension(x[J]+"_"+f);if(w)return w}return null}function d(){null!==k.Gb&&(clearTimeout(k.Gb),k.Gb=null);k.Ea=!1}function g(f){if(0===k.ta.length){k.Z=b.PIXEL_PACK_BUFFER;k.ta.splice(0);k.pb.splice(0);for(var x=0;x<k.Pa;++x)k.ta.push(b.createBuffer()),k.pb.push(-1);k.ia=0;k.mc=0}b.bindBuffer(k.Z,k.ta[k.ia]);f.byteLength!==k.pb[k.ia]&&(b.bufferData(k.Z,
f.byteLength,b.STREAM_READ),k.pb[k.ia]=f.byteLength);k.oh=!0}function l(){b.bindBuffer(k.Z,null)}function p(){k.Ca.forEach(function(f){b.deleteSync(f)});k.Ca.splice(0)}function m(){k.ia=(k.ia+1)%k.Pa;++k.mc}var r=null,h=!1,q={vd:!1,zc:null,Ac:null,zd:!1,tf:!1,Bc:null,Ad:!1,Cc:null,wd:!1,Mb:null,kf:!1,Nb:null,lf:!1},v=null,C={ja:!0,la:!0,Vb:!0,Nd:!1},y=null,t=!0,F=null,A=null,k={Be:1,Pa:-1,ia:0,mc:0,Ea:!1,ta:[],Ca:[],pb:[],Z:null,Gb:null},K="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),O=["OES",
"MOZ_OES","WEBKIT_OES"],I="undefined"===typeof window?{}:window,E={B:function(){if(h)return!0;E.reset();h||a();var f=b;if(!v.vd){v.zc=E.cd(f);I.GL_EXT_FLOAT=v.zc;v.zd=v.zc?!0:!1;if(v.zd||E.ma())v.Ac=E.dd(f),v.tf=v.Ac?!0:!1,I.GL_EXT_FLOATLINEAR=v.Ac;v.vd=!0}if(!v.wd){v.Bc=E.gb(f);v.Bc&&(v.Ad=!0,I.GL_EXT_HALFFLOAT=v.Bc);if(v.Ad||E.ma())v.Cc=E.ed(f),I.GL_EXT_HALFFLOATLINEAR=v.Cc;v.ph=v.Cc?!0:!1;v.wd=!0}v.Mb=E.ad(f);v.kf=v.Mb?!0:!1;I.GL_EXT_COLORBUFFERFLOAT=v.Mb;v.Nb=E.bd(f);v.lf=v.Nb?!0:!1;I.GL_EXT_COLORBUFFERHALFFLOAT=
v.Nb;oa.B();ya.B();if(!E.Ee())return!1;na.B();ya.gf();return!0},reset:function(){v=Object.assign({},q);y=Object.assign({},C)},A:function(){h||a();return r.A()},V:function(){h||a();return r.V()},ma:function(){h||a();return r.ma()},$c:function(f){E.ad(f);E.bd(f);E.cd(f);E.dd(f);E.gb(f);E.ed(f)},ad:c.bind(null,"color_buffer_float",K),bd:c.bind(null,"color_buffer_half_float",K),cd:c.bind(null,"texture_float",O),dd:c.bind(null,"texture_float_linear",O),gb:c.bind(null,"texture_half_float",O),ed:c.bind(null,
"texture_half_float_linear",O),Wb:function(f){var x=E.gb(f);return x&&x.HALF_FLOAT_OES?x.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},Te:function(){return A||b.RGBA32F||b.RGBA},Ue:function(){return F||b.RGBA16F||b.RGBA},Qe:function(){return y},Pc:function(){return y.ja},mg:function(){return y.la},lg:function(){return y.Vb},ue:function(){return y.Nd&&t},ae:function(f){t=f;!f&&k.Ea&&(p(),b.bindBuffer(k.Z,null),k.Ea=!1)},vh:function(){return k.Ea},Eb:function(f,x,G){function J(){f.bindTexture(f.TEXTURE_2D,
null);f.bindFramebuffer(w,null);f.deleteTexture(e);f.deleteFramebuffer(M)}var w=f.FRAMEBUFFER,Q=f.NEAREST,M=f.createFramebuffer();f.bindFramebuffer(w,M);var e=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,Q);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,
Q);f.texImage2D(f.TEXTURE_2D,0,x,3,3,0,f.RGBA,G,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,e,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return J(),!1;wa.xc(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);na.kb(f);f.bindFramebuffer(w,null);wa.Wa(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);na.kb(f);x=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,
x);J();for(G=0;36>G;++G)if(3!==G%4&&3<Math.abs(x[G]-127))return!1;return!0},Pb:function(f){var x={ja:!1,la:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&E.Eb(f,f.RGBA32F,f.FLOAT)&&(x.ja=!0,A=f.RGBA32F);!x.ja&&E.Eb(f,f.RGBA,f.FLOAT)&&(x.ja=!0,A=f.RGBA);var G=E.Wb(f);F=null;f.RGBA16F&&E.Eb(f,f.RGBA16F,G)&&(x.la=!0,F=f.RGBA16F);!x.la&&E.Eb(f,f.RGBA,G)&&(x.la=!0,F=f.RGBA);return x},Fe:function(){var f=oa.instance({width:2});f.Sd();var x=ya.instance({width:2,isFloat:!0,
wb:3});f.v();x.v();E.flush();b.checkFramebufferStatus(oa.We())!==b.FRAMEBUFFER_COMPLETE?(ya.Pf(),y.Vb=!1):y.Vb=!0;f.remove();x.remove()},Ge:function(){var f=!1;E.ma()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(x){return"undefined"!==typeof b[x]}));y.Nd=f},Ee:function(){var f=E.Pb(b);Object.assign(y,f);if(!y.ja&&!y.la)return!1;E.Fe();E.Ge();return!0},Jf:function(f,x,G,J,w){b.readPixels(f,x,G,J,b.RGBA,b.UNSIGNED_BYTE,
w);return Promise.resolve(w,!1)},uc:function(f,x,G,J,w,Q,M){if(!E.ue())return E.Jf(f,x,G,J,w);k.Pa=M||k.Be;g(w);b.readPixels(f,x,G,J,b.RGBA,b.UNSIGNED_BYTE,0);k.Ca[k.ia]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);E.flush();var e=!1;return new Promise(function(n,H){function L(){if(!k.Ea)return d(),l(),m(),H(),!1;var P=(k.ia+1)%k.Pa;switch(b.clientWaitSync(k.Ca[P],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(k.Ca[P]),k.Ca[P]=null,b.bindBuffer(k.Z,k.ta[P]),b.getBufferSubData(k.Z,
0,w),l(),m(),n(w,e),!0}k.Gb=setTimeout(L,0);return!1}d();k.mc+1<k.Pa?(l(),m(),n(w,!1)):(k.Ea=!0,L()||!Q||e||(e=!0,Q()))})},Xd:function(){b.viewport(0,0,E.A(),E.V())},flush:function(){b.flush()},u:function(){d();p();ya.u();oa.u();na.u();k.ta.forEach(function(f){b.deleteBuffer(f)});k.ta.splice(0);wa.reset();h=!1}};return E}(),N=na,ra=oa,V=ya,Aa=function(){function a(f,x,G,J){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,J?k.NEAREST_MIPMAP_NEAREST:k.LINEAR);var w=null;if(null!==G)try{w=k.getError();
if("FUCKING_BIG_ERROR"===w)return!1;k.texImage2D(k.TEXTURE_2D,0,f,4,4,0,k.RGBA,x,G);w=k.getError();if(w!==k.NO_ERROR)return!1}catch(Q){return!1}J&&k.generateMipmap(k.TEXTURE_2D);k.clear(k.COLOR_BUFFER_BIT);N.kb(k);w=k.getError();if("FUCKING_BIG_ERROR"===w)return!1;k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,v);w=k.getError();w===k.INVALID_OPERATION&&"undefined"!==typeof k.PIXEL_PACK_BUFFER&&(k.bindBuffer(k.PIXEL_PACK_BUFFER,null),k.readPixels(0,0,2,2,k.RGBA,k.UNSIGNED_BYTE,v),w=k.getError());if(w!==
k.NO_ERROR)return!1;G=!0;for(J=0;16>J;++J)G=G&&4>Math.abs(v[J]-127);G&&(h.Id=x,h.sd=f);return G}function c(f,x){return K.ja&&a(f,k.FLOAT,new Float32Array(C),x)?(r=m.Lc,!0):!1}function d(f,x,G){if(!K.la)return!1;var J=ya.Ae(C),w=Z.gb(k);if(w&&w.HALF_FLOAT_OES&&a(f,w.HALF_FLOAT_OES,J,x)||k.HALF_FLOAT&&a(f,k.HALF_FLOAT,J,x))return r=m.La,!0;J=new Float32Array(C);if(a(f,k.FLOAT,J,x))return r=m.La,!0;k.bindTexture(k.TEXTURE_2D,G);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,2,2,0,k.RGBA,k.UNSIGNED_BYTE,null);k.bindFramebuffer(h.eb,
E);ya.hd(k,G,2,2,J,!1,!1);k.bindFramebuffer(h.eb,null);k.bindTexture(k.TEXTURE_2D,G);return a(f,null,null,x)?(r=m.La,!0):!1}function g(f,x,G){q=!0;if(d(f,!0,G)||c(x,!0))return!0;q=!1;return d(f,!1,G)||c(x,!1)?!0:!1}function l(f){if(r===m.S){k=f||b;r=m.RGBA8;q=!0;Z.$c(k);K||(K=Z.Pb(k));ra.reset();E=k.createFramebuffer();h.eb=k.DRAW_FRAMEBUFFER||k.FRAMEBUFFER;k.bindFramebuffer(h.eb,null);k.clearColor(0,0,0,0);k.viewport(0,0,2,2);u.S();O=u.Wa(k);f=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,
f);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);I=f;var x=f=k.RGBA,G=k.RGBA16F,J=k.RGBA32F;J&&(f=J);G&&(x=G);if((G||J)&&g(x,f,I))return p(),!0;f=x=k.RGBA;if(g(x,f,I))return p(),!0;r=m.RGBA8;p();return!1}}function p(){k.deleteProgram(O.wa);k.deleteTexture(I);I=O=null}for(var m={S:-1,Lc:3,La:2,RGBA8:0},r=m.S,h={Id:null,sd:null,eb:null},q=!0,v=new Uint8Array(16),C=Array(64),
y=0;4>y;++y)for(var t=0;4>t;++t){var F=0===(t+y)%2?1:0,A=4*y+t;C[4*A]=F;C[4*A+1]=F;C[4*A+2]=F;C[4*A+3]=F}var k=null,K=null,O=null,I=null,E=null;return{te:function(f){l(f);return q},Oc:function(f,x){r===m.S&&(typeof("undefined"!==x)&&(K=x),l(f));return r!==m.RGBA8},sh:function(f){l(f);return r===m.Lc},uf:function(f){l(f);return r===m.La},Zg:function(f){l(f);return h.Id},Ve:function(f){l(f);return h.sd},u:function(){k=null;q=!0;r=m.S;K=null}}}(),Yb=function(){return{instance:function(a){function c(){y&&
y.remove();y=V.instance({isFloat:!1,isPot:!1,width:a.size*a.$[0],height:a.size*a.$[1]})}var d=null,g=!1,l=!1,p=null,m=!1,r=!1,h=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(g=!0,D&&void 0!==D.me&&(a.mask=D.me+a.mask),d=V.instance({isFloat:!1,url:a.mask}));var C=!1;a.customInputShader&&(C="s50",u.fa({name:"_",id:C,h:a.customInputShader,Yh:["uSource"],precision:"lowp"}),u.J(C,[{type:"1i",name:"_",value:0}]));
switch(q){case "sobel":h="s39";m=!0;break;case "meanNormalization":h="s40";m=!0;break;case "grayScale":h="s36";m=!1;break;case "grayScaleTilt":h="s37";r=!0;m=!1;break;case "rgbGrayTilt":h="s38";r=!0;m=!1;break;case "copy":h=C?C:"s0";break;case "inputLightRegulation":h=C?C:"s36";p=lc.instance({rd:v,Hd:a.size,Fd:a.nBlurPass,aa:!1});l=!0;break;case "inputMix0":h="none";p=mc.instance({Y:v,na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,aa:!1});l=!0;break;case "inputMix1":h="none";p=nc.instance({Y:v,
na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,aa:!1});l=!0;break;case "inputCut4":h="none";p=oc.instance({Y:v,na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,Ta:a.isNormalized||!1,sc:a.overlap||0,aa:!1});v*=p.Xe();l=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}v=Math.ceil(v);r&&u.J(h,[{name:"u29",type:"1f",value:a.tilt}]);g&&(h+="Mask");var y=null;c();var t={A:function(){return a.size},Ye:function(){return v},Yb:function(){return t.A()},bf:function(){return l?
p.Ra():y},Hb:function(F){a.$=F;c()},X:function(F){ra.U();if("abort"===h)return F.g(0),F;"none"!==h&&(u.set(h),m&&u.F("u30",1/a.size),y.C(),g&&d.g(1),N.l(!1,!1),y.g(0),F=y);l&&p.process(F)},u:function(){y.remove();g&&d.remove()}};return t}}}(),Zb=function(){return{instance:function(a){function c(){if(E.Ja){l.input&&(l.input.remove(),l.sb.remove());var x=a.size*a.sparsity;I=Math.log(x/a.size)/Math.log(2);l.input=V.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:x*a.$[0],height:x*a.$[1],ic:I});l.sb=
V.instance({isFloat:!0,isPot:!0,width:a.size*a.$[0],height:a.size*a.$[1]})}}function d(){l.va&&l.va.remove();l.va=V.instance({isFloat:!0,isPot:!m,isLinear:!m&&r.isLinear,width:a.size*a.$[0],height:a.size*a.$[1]})}function g(x){r.buffer.forEach(function(G,J){r.results[J][0]=x[0][G];r.results[J][1]=x[1][G];r.results[J][2]=x[2][G];r.results[J][3]=x[3][G]});return r.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,sb:null,va:null,rc:null,pc:null,qc:null},p=null,m=!0,r={type:"undef",K:null,
isLinear:!1,buffer:[],results:[],tb:!1},h=-1,q=a.isReorganize?a.isReorganize:!1,v=a.kernelsCount?!0:!1,C=[a.Sa?"s32":"s31",a.Sa?"s34":"s33","s35"][a.shiftRGBAMode||0],y={isEnabled:!1},t=1/a.size;a.sf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.zb.Yb(),m=!1):"full"===a.connectivityUp&&(a.sparsity=a.zb.Yb());var F={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],A=a.sparsity*a.sparsity,k=!1,K=a.size,O="";if(a.maxPooling){switch(a.maxPooling.size){case 2:O=
"s41";break;case 4:O="s42"}k=!0;K/=a.maxPooling.size;l.pc=V.instance({isFloat:!0,isPot:!1,width:K})}var I=-1,E=null;m&&d();l.bias=V.instance(a.bias);var f={A:function(){return a.size},Yb:function(){return K},kd:function(){return a.classesCount},pe:function(x){p.g(x)},Af:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,xf:V.instance(a.remap.maskTexture),Va:a.remap.layers.map(function(x){return a.parent.$e(x)}),depth:a.remap.depth})},Qf:function(){switch(a.connectivityUp){case "direct":E=pc.instance(a.connectivity);
break;case "square":E=qc.instance(a.connectivity);break;case "squareFast":E=rc.instance(a.connectivity,a.activation);break;case "full":E=sc.instance(Object.assign({Sa:a.Sa},a.connectivity));break;case "conv":h=a.kernelsCount,E=tc.instance(a.connectivity),q&&(l.rc=V.instance({width:K,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},X:function(x,G){p=x;E.Ja?(l.input.C(),v&&l.bias.g(2),E.X(y),l.input.g(0),l.input.Oe(I),l.sb.C(),v?u.set("s0"):(u.set(C),u.F("u4",A),l.bias.g(1)),l.input.qe(I,0),N.l(!1,!1),u.set(F),
l.va.v(),l.sb.g(0),N.l(!1,!1)):(l.va.C(),l.bias.g(1),E.X());if(m)return G=l.va,k&&(l.pc.C(),G.g(0),u.set(O),u.I("u14",t,t),N.l(!1,!1),G=l.pc),q&&(l.rc.v(),u.set("s24"),u.I("u18",h,K/h),G.g(0),N.l(!1,!1),G=l.rc),G.g(0),G;var J=l.va;if(a.normalize||r.tb)x=a.normalize,u.set(r.tb?"s9":"s8"),u.F("u10",x?t:1),l.qc.C(),J.g(0),N.l(!1,!1),J=l.qc;x=null;switch(r.type){case "cpuRGBA2Float":J.Xc(!1);G?x=f.Ef(J).then(r.K):(J=f.Ff(J),r.K(J));break;case "cpuMeanFloat":J.Xc(!0);if(G)x=J.Hf().then(r.K);else{J=J.If();
for(var w=0;w<J.length;++w);r.K(J)}break;case "gpuRawAvg":case "gpuRaw":J.g(0);case "none":null!==r.K&&r.K(J)}G&&null===x&&(x=Promise.resolve());return x},Hb:function(x){a.$=x;c();d()},Xf:function(x){x&&(r.type=x.yb||"none",r.K=x.xb||null,r.isLinear=x.oc?!0:!1);d();x="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,J=0,w=0;G<x;++G)r.buffer.push(J+(a.size-1-w)*a.size),r.results.push([-1,-1,-1,-1]),++J,J===a.size&&(J=0,++w);r.tb="gpuRawAvg"===r.type||"cpuMeanFloat"===
r.type;if(a.normalize||r.tb)l.qc=V.instance({isFloat:!0,isPot:!0,width:a.size})},Ef:function(x){return x.Gf().then(g)},Ff:function(x){x=x.Od();g(x);return r.results},u:function(){for(var x in l){var G=l[x];G&&G.remove()}E&&(E.u(),E=null)}};a.zb&&f.Qf(a.zb);return f}}}(),pc=function(){return{instance:function(a){var c=V.instance(a.weights);return{Ja:!0,ob:function(){return 1},u:function(){c.remove()},ef:function(){return c},X:function(){u.set("s30");c.g(1);N.l(!1,!1)}}}}}(),sc=function(){return{instance:function(a){var c=
a.fromLayerSize,d=V.instance(a.weights),g=a.Sa?"s27":"s26";return{Ja:!0,ob:function(){return c},u:function(){d.remove()},X:function(l){if(l.isEnabled){u.set("s28");l.xf.g(3);for(var p=Math.min(l.Va.length,l.depth),m=0;m<p;++m)l.Va[m].pe(4+m)}else u.set(g);u.F("u8",a.toLayerSize);u.F("u9",a.fromLayerSize);d.g(1);N.l(!1,!1)}}}}}(),qc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,g=a.toSparsity,l=g*d,p=l/c,m=c/d,r=0,h=0,q=0,v=Array(g*d*g*d*4),C=Array(g*d*g*d*4),y=Array(c*
c),t=0;t<y.length;++t)y[t]=0;t=Math.floor(g/2);for(var F=.5/d,A=.5/c,k=.5/l,K=0;K<d;++K)for(var O=Math.round(K*m),I=0;I<d;++I){var E=Math.round(I*m),f=K/d,x=I/d;f+=F;x+=F;for(var G=0;G<g;++G){var J=O+G-t;0>J&&(J+=c);J>=c&&(J-=c);for(var w=0;w<g;++w){var Q=r/l,M=h/l,e=E+w-t;0>e&&(e+=c);e>=c&&(e-=c);var n=J/c,H=e/c;M=1-M-1/l;n+=A;H+=A;Q+=k;M+=k;var L=K*g+G,P=I*g+w;P=d*g-P-1;L=P*d*g+L;v[4*L]=Q;v[4*L+1]=M;v[4*L+2]=n;v[4*L+3]=H;H=y[e*c+J]++;L=H%p;n=J*p+L;e=e*p+(H-L)/p;e=c*p-1-e;e=e*c*p+n;C[4*e]=Q;C[4*
e+1]=M;C[4*e+2]=f;C[4*e+3]=x;++r>=l&&(r=0,++h);++q}}}y=null;var fa=V.instance(a.weights);delete a.weights.data;var ua=V.instance({width:l,isFloat:!0,array:new Float32Array(C),isPot:!0});C=null;var Ca=V.instance({width:l,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{Ja:!0,ob:function(){return p},u:function(){ua.remove();Ca.remove();fa.remove()},X:function(){u.set("s25");fa.g(1);Ca.g(2);N.l(!1,!1)}}}}}(),tc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,g=
d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],p=V.instance(a.weights);return{Ja:!0,ob:function(){return g},jh:function(){return d},ef:function(){return p},u:function(){p.remove()},X:function(){u.set("s29");u.da("u28",l);u.F("u26",c);u.F("u27",d);u.F("u8",a.toLayerSize);u.F("u9",a.fromLayerSize);p.g(1);N.l(!1,!1)}}}}}(),rc=function(){return{instance:function(a,c){var d=a.fromLayerSize,g=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,m=l*g/d,r=g<d,h=d/g,q=V.instance(a.weights),v="s51"+[d.toString(),
g.toString(),l.toString(),p.toString(),c].join("_");u.Me(v)||(a=jc.Pe(c,"gl_FragColor","gl_FragColor"),g=[{type:"1f",name:"u8",value:g},{type:"1f",name:"u32",value:p}],r&&g.push({type:"1f",name:"u9",value:d}),d=[(r?m:l).toFixed(1),a],r&&d.push(h.toFixed(1)),u.hf(r?"s47":"s46",v,d),u.J(v,g.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));return{Ja:!1,ob:function(){return m},u:function(){q.remove()},X:function(){u.set(v);q.g(3);N.l(!1,!1)}}}}}(),
lc=function(){return{instance:function(a){var c=a.Fd?a.Fd:3,d=a.rd?a.rd:64,g=a.Hd?a.Hd:64,l=a.aa?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=V.instance(a),m=V.instance(a),r=V.instance(a),h=V.instance(a),q=V.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(C){u.set("s43");h.v();N.l(l,!1);u.set("s44");for(var y=0;y<c;++y)p.v(),u.I("u14",v,0),N.l(l,!1),r.v(),h.g(0),N.l(l,!1),m.v(),p.g(0),u.I("u14",0,v),N.l(l,!1),h.v(),r.g(0),N.l(l,!1),y!==c-1&&m.g(0);u.set("s45");
q.v();C.g(0);m.g(1);h.g(2);N.l(l,!1);q.g(0)},Ra:function(){return q}}}}}(),mc=function(){return{instance:function(a){function c(v){return V.instance({isFloat:v,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,ga:9,Y:128,gain:1,aa:!1},a),g=c(!1),l=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],m=c(!0),r=[g,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6));var h="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};u.Ya([{id:"s53",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:a,j:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",h:h,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){u.set("s53");g.C();N.l(d.aa,!1);u.set("s54");for(var v=0;3>v;++v)u.I("u33",1,0),l[v].v(),r[v].g(0),
N.l(!1,!1),u.I("u33",0,1),p[v].v(),l[v].g(0),N.l(!1,!1);u.set("s55");m.v();g.g(0);p[0].g(1);p[1].g(2);p[2].g(3);N.l(!1,!1);m.g(0)},Ra:function(){return m}}}}}(),nc=function(){return{instance:function(a){function c(q){return V.instance({isFloat:q,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,ga:9,Y:128,gain:1,aa:!1},a),g=c(!1),l=c(!1),p=c(!1),m=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6));var r="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),h={u1:0};u.Ya([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:h,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:a,j:h,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",h:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){u.set("s56");g.C();N.l(d.aa,!1);u.set("s57");u.I("u33",1,0);l.v();g.g(0);N.l(!1,!1);u.I("u33",0,1);p.v();l.g(0);N.l(!1,!1);u.set("s58");m.v();g.g(0);p.g(1);N.l(!1,!1);m.g(0)},Ra:function(){return m}}}}}(),oc=function(){return{instance:function(a){function c(v){return V.instance({isFloat:v,width:d.Y,isPot:!1,isFlipY:!1})}
var d=Object.assign({na:.1,ga:9,Y:128,gain:1,sc:0,Ta:!1,aa:!1},a),g=c(!1),l=null,p=null,m=null;d.Ta&&(l=c(!1),p=c(!1),m=c(!0));a={u1:0};var r=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.sc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Ta){var h="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4));r.push({id:"s60",name:"_",h:h,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",h:q,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}u.Ya(r);return{process:function(){u.set("s59");g.C();N.l(d.aa,!1);d.Ta?(u.set("s60"),u.I("u33",1,0),l.v(),g.g(0),N.l(!1,!1),u.I("u33",0,1),p.v(),l.g(0),N.l(!1,!1),u.set("s61"),m.v(),g.g(0),p.g(1),N.l(!1,!1),m.g(0)):g.g(0)},Xe:function(){return 2-d.sc},Ra:function(){return d.Ta?m:g}}}}}(),Ea=function(){function a(A,
k,K,O,I,E,f){if(!t)if(f===E.length)I();else{switch(E[f]){case "A":K();break;case "D":A();break;case "S":k().then(function(x,G){F.$d();a(A,k,K,G?null:O,I,E,++f)}).catch(function(x){console.log("An error occurred in the WebAR loop: ",x);I()});return;case "R":O&&O()}a(A,k,K,O,I,E,++f)}}var c={n:5,lc:1,Cd:0,lb:[35,49],fb:[2,200],k:.7,cg:200,zf:.05},d=-1,g=null,l=-1,p=-1,m=0,r=-1,h=-1,q=0,v=0,C=c.fb[1],y=Math.log(2),t=!0,F={af:function(){switch(d){case -1:return-1;case 0:return h+g.Cd;case 1:return q}},
Sg:function(A){return Math.pow(Math.min(Math.max(r,0),g.n-1)/(g.n-1),A||1)},B:function(A){g=Object.assign({},c,A);r=h=g.lc;d=0;F.reset()},$d:function(A){A=("undefined"===typeof A?Date.now():A)||0;var k=Math.min(Math.max(A-v,g.fb[0]),g.fb[1]);C=k;v=A;var K=-1===l?0:g.k;l=Math.min(Math.max(1E3/k,5),120)*(1-K)+l*K;A-p>g.cg&&5<++m&&(k=g.k,r=r*(1-k)+(l<g.lb[0]?h-1:l>g.lb[1]?h+1:h)*k,Math.abs(r-h)>1-g.zf&&(k=Math.min(Math.max(Math.round(r),0),g.n-1),k!==h&&(r=h=k,l=(g.lb[1]-g.lb[0])/2)),p=A)},Qd:function(A,
k,K,O,I,E){t=!1;a(A,k,K,O,I,E,0)},stop:function(){t=!0},Td:function(A){q=A;d=1},bg:function(){d=0;F.reset()},reset:function(){C=c.fb[1];p=l=-1;m=0},Wh:function(A,k,K){K=Math.exp(-y*C/K);return(1-K)*A+K*k},Se:function(){return C}};return F}(),Qa=function(){function a(){d(A+t.jc);k.port.postMessage("DONE")}function c(){E.$a=0===t.za?O(d):O(g)}function d(w){I.Fa&&null!==F&&(w-=A,w=Math.min(Math.max(w,t.Yc[0]),t.Yc[1]),A+=w,p(),f.isEnabled&&f.Ua&&I.ba&&A-f.ec>t.Jc&&(q(),f.ec=A),F(A))}function g(w){I.Fa&&
(E.timeout=setTimeout(d.bind(null,w),t.za))}function l(){F=null;I.Fa=!1;p()}function p(){E.$a&&(window.cancelAnimationFrame(E.$a),E.$a=null);E.timeout&&(window.clearTimeout(E.timeout),E.timeout=null)}function m(w){w&&!I.ba?(I.ba=!0,K&&Ea.bg(),k.port.postMessage("STOP"),Z.ae(!0),c()):!w&&I.ba&&(I.ba=!1,K&&Ea.Td(1),Z.ae(!1),k.port.postMessage("START"))}function r(w){w.target.hidden?G():x()}function h(w,Q,M){Q=w.createShader(Q);w.shaderSource(Q,M);w.compileShader(Q);return Q}function q(){f.Ua=!1;var w=
f.ka,Q=f.qb,M=f.rb,e=f.Z;w.uniform1f(f.pd,Math.random());f.Ga?Q.beginQueryEXT(e,M):w.beginQuery(e,M);w.drawElements(w.POINTS,1,w.UNSIGNED_SHORT,0);f.Ga?Q.endQueryEXT(e):w.endQuery(e);Z.flush();C().then(function(n){0===n||isNaN(n)?(f.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",n)):(n=t.ge*t.Ic*1E3/n,f.Ib=(f.Ib+1)%t.Ka,f.fc[f.Ib]=n,++f.Bd>t.Ka&&(f.vb.set(f.fc),f.vb.sort(function(H,L){return H-L}),n=f.vb[Math.floor(t.Ka/2)],f.jb=
Math.max(f.jb,n),t.Hc(n/f.jb)),f.Ua=!0)}).catch(function(){f.Ua=!0})}function v(w){var Q=f.ka,M=f.qb,e=f.rb;e=f.Ga?M.Pg(e,M.QUERY_RESULT_AVAILABLE_EXT):Q.getQueryParameter(e,Q.QUERY_RESULT_AVAILABLE);Q=Q.getParameter(M.GPU_DISJOINT_EXT);e?w(!Q):setTimeout(v.bind(null,w),.1)}function C(){return new Promise(function(w,Q){v(function(M){if(M){M=f.ka;var e=f.qb,n=f.rb;M=f.Ga?e.getQueryObjectEXT(n,e.QUERY_RESULT_EXT):M.getQueryParameter(n,M.QUERY_RESULT);w(M)}else Q()})})}var y={xd:!0,Yc:[1,200],jc:20,
za:0,Ic:50,ge:240,Jc:3E3,Ka:3,Hc:null},t=null,F=null,A=0,k=null,K=!1,O=null,I={ua:!1,ba:!0,dc:!1,cc:!1,bc:!1,Fa:!1},E={$a:null,timeout:null},f={isEnabled:!1,Ua:!1,ka:null,qb:null,rb:null,Z:null,pd:null,Ga:!0,ec:0,Bd:0,fc:null,vb:null,Ib:0,jb:0},x=m.bind(null,!0),G=m.bind(null,!1),J={B:function(w){t=Object.assign(y,w);Object.assign(I,{ba:!0,ua:!0,Fa:!1});O=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==t.Hc){w=document.createElement("canvas");w.setAttribute("width","1");w.setAttribute("height",
"1");var Q={antialias:!1};w=w.getContext("webgl2",Q)||w.getContext("webgl",Q);if(Q=w.getExtension("EXT_disjoint_timer_query")||w.getExtension("EXT_disjoint_timer_query_webgl2")){f.ka=w;f.qb=Q;f.isEnabled=!0;f.Ga=Q.beginQueryEXT?!0:!1;var M=h(w,w.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),e=h(w,w.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",t.Ic.toString())),n=w.createProgram();
w.attachShader(n,M);w.attachShader(n,e);w.linkProgram(n);M=w.getAttribLocation(n,"a0");f.pd=w.getUniformLocation(n,"u39");w.useProgram(n);w.enableVertexAttribArray(M);n=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,n);w.bufferData(w.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),w.STATIC_DRAW);w.vertexAttribPointer(M,4,w.FLOAT,!1,16,0);n=w.createBuffer();w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,n);w.bufferData(w.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),w.STATIC_DRAW);w.disable(w.DEPTH_TEST);w.disable(w.DITHER);
w.disable(w.STENCIL_TEST);w.viewport(0,0,1,1);n=f.Ga?Q.createQueryEXT():w.createQuery();f.rb=n;f.Z=Q.TIME_ELAPSED_EXT||w.TIME_ELAPSED;f.ec=-t.Jc;f.fc=new Float32Array(t.Ka);f.vb=new Float32Array(t.Ka);f.jb=0;f.Ib=0;f.Bd=0;f.Ua=!0}}if(t.xd){w=!1;try{if("undefined"===typeof SharedWorker){var H=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
t.jc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),L=new Worker(H);L.addEventListener("message",a);k={Jd:L,port:L};I.dc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
t.jc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),fa=new SharedWorker(P);fa.port.start();fa.port.addEventListener("message",a);k={Jd:fa,port:fa.port};I.cc=!0}w=!0}catch(ua){}w&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",G),window.addEventListener("focus",x)),window.addEventListener("pagehide",
G),window.addEventListener("pageshow",x),I.bc=!0)}K="undefined"!==typeof Ea},u:function(){l();I.bc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",G),window.removeEventListener("focus",x)),window.removeEventListener("pagehide",G),window.removeEventListener("pageshow",x),I.bc=!1);I.cc?(k.port.close(),I.cc=!1):I.dc&&(k.Jd.terminate(),I.dc=!1);Object.assign(I,{ba:!0,ua:!1,Fa:!1});F=null},yh:function(){return I.ba},update:function(w){Object.assign(t,
w)},Qd:function(w){I.ua||J.B({});p();I.Fa=!0;F=w;I.ba&&c()},stop:l};return J}(),Y={nd:function(){return Y.Sc()?document.createElement("video"):!1},Qa:function(a,c){a[c]=!0;a.setAttribute(c,"true")},xe:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},we:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},vf:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},og:function(){return Y.Qc()||Y.we()},Qc:function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Ng:function(){return Y.xe()?Y.vf()?window.innerHeight/window.innerWidth*45:45:45},Sc:function(){return navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Ih:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Rc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(g){return g&&"object"===typeof g?Object.assign({},g):g};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c=
{audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&Y.Mc(c,a.deviceId);return c},Mc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},Zd:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Ce:function(a){function c(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(t,F){return Math.abs(t-y)-Math.abs(F-y)})}function d(y){var t=Y.Rc(a);y=y(t);l.push(y);g(y)}function g(y){if(y.video&&
y.video.facingMode&&y.video.facingMode.exact){var t=y.video.facingMode.exact;y=Y.Rc(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=t;l.push(y)}}var l=[];if(!a||!a.video)return l;g(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),m=c(a.video.height.ideal).slice(0,3),r={},h=0;for(r.qa=void 0;h<p.length;r={qa:r.qa},++h){r.qa=p[h];var q={},v=0;for(q.pa=void 0;v<m.length;q={pa:q.pa},++v)if(q.pa=m[v],r.qa!==a.video.width.ideal||
q.pa!==a.video.height.ideal){var C=Math.max(r.qa,q.pa)/Math.min(r.qa,q.pa);C<4/3-.1||C>16/9+.1||d(function(y,t){return function(F){F.video.width.ideal=y.qa;F.video.height.ideal=t.pa;return F}}(r,q))}}}d(function(y){return Y.Zd(y)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(d(function(y){delete y.video.facingMode;
return y}),a.video.width&&a.video.height&&d(function(y){Y.Zd(y);delete y.video.facingMode;return y}));l.push({audio:a.audio,video:!0});return l},Ed:function(a){a.volume=0;Y.Qa(a,"muted");if(Y.Qc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Y.Qa(a,"muted")},5)}},Xh:function(a,c,d){return null===
a?Promise.resolve():new Promise(function(g,l){if(a.srcObject&&a.srcObject.getVideoTracks){var p=a.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=p[0],c?Y.get(a,g,l,d):(p.stop(),g()))}else l("BAD_IMPLEMENTATION")})},md:function(a,c,d,g){function l(m){p||(p=!0,d(m))}var p=!1;return navigator.mediaDevices.getUserMedia(g).then(function(m){function r(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)l("VIDEO_NULLSIZE");else{q={ve:null,Wf:null,
yf:null};try{var v=m.getVideoTracks()[0];v&&(q.yf=v,q.ve=v.getCapabilities(),q.Wf=v.getSettings())}catch(C){}p||c(a,m,q)}}else l("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var q=a.play();Y.Ed(a);"undefined"===typeof q?r():q.then(function(){r()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=m:(a.src=window.URL.createObjectURL(m),a.videoStream=m);Y.Ed(a);a.addEventListener("loadeddata",h,!1)}).catch(function(m){l(m)})},
cf:function(a,c){var d=c||Y.nd();return new Promise(function(g,l){Y.get(d,g,l,a)})},get:function(a,c,d,g){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!Y.Sc())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;Y.Qa(a,"autoplay");Y.Qa(a,"playsinline");g&&g.audio?a.volume=0:Y.Qa(a,"muted");Y.ze(g).then(function(){Y.md(a,c,function(){function l(m){if(0===m.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var r=m.shift();Y.md(a,c,function(){l(m)},r)}}var p=Y.Ce(g);l(p)},g)})},ze:function(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(g){Y.df(function(l){l?(l=l.find(function(p){var m=p.label;return m?d.some(function(r){return m.includes(r)}):!1}))?(a.video.deviceId={exact:l.deviceId},g("SUCCESS")):g("NO_PREFERRED_DEVICE_FOUND"):
g("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},df:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},ng:function(a,c,d){var g={};g[c]=d;c=[];c.push(g);a.applyConstraints({advanced:c}).catch(function(){})}},
Gb=function(){var a={pf:!0,isLinear:!0,kc:[4,11]};return{Le:function(c,d,g){return d.isDetected?Math.floor(d.s*c):(c=Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(g,Math.pow(2,c)))},instance:function(c){var d=Object.assign({},a,c),g=[],l=null,p=-1,m=null,r=!1;for(c=d.kc[0];c<=d.kc[1];++c)g[c]=null;return{C:function(h,q){q!==p&&(l&&l.remove(),l=V.instance({isLinear:d.isLinear,isPot:!0,width:q}));if(r=d.pf&&q<.5*h){h=Math.floor(Math.log2(h));var v=d.kc;h=Math.min(Math.max(h,v[0]),
v[1]);v=h;if(!g[v]){var C=V.instance({isPot:!0,isMipmap:!0,yd:!0,width:Math.pow(2,v)});g[v]={L:C,Dd:-1}}h=g[h];m=h.L;h.Dd!==q&&(v=Math.log2(q),m.g(0),m.Vd(v),ya.P(0),h.Dd=q)}else m=l;p=q;m.C()},g:function(h){m.g(h);r&&m.mb()},Ba:function(h){m.Ba(h)},remove:function(){l&&l.remove();g.forEach(function(h){h&&h.L.remove()})}}}}}(),uc=function(){function a(m){ra.P();u.set("s1");b.viewport(0,0,1,1);N.l(!1,!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,m);ra.U()}var c=!1,d=!1,g=null,l=null,p={B:function(){var m=
{u1:0};u.fa({id:"s62",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u30;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y))*1.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y))*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y))*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30.y))*2.,b-=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y))*1.,b+=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30.y))*2.,b+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
i:["u1","u30"],j:m});u.fa({id:"s63",name:"_",h:"uniform sampler2D u1;uniform vec2 u40;uniform float u41,u42,u43,u44;varying vec2 vv0;void main(){vec2 a=floor(vv0*u42);float d=a.x+a.y*u42,f=u42*u42;vec2 g=fract(vv0*u42),b=u43+g*(1.-2.*u43);float c=d/(f-1.),h=mix(u40.x,u40.y,c);vec2 i=b+h*vec2(1.,1./u44)*vec2(cos(u41),sin(u41));float j=texture2D(u1,i).r;gl_FragColor=vec4(j,b,c);}",i:"u1 u40 u41 u42 u43 u44".split(" "),j:m});u.fa({id:"s64",name:"_",h:"uniform sampler2D u1;uniform vec2 u14,u45;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 g=vv0-u14*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,g+u14*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
i:["u1","u14","u45"],j:m});u.fa({id:"s65",name:"_",h:"uniform sampler2D u1;uniform vec2 u46;uniform float u47;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u46)-u47),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",i:["u1","u46","u47"],j:m});c=!0},Uh:function(m){c||p.B();u.set("s62");u.I("u30",.5/m.A(),.5/m.V());m.g(0);N.l(!1,!1)},Ie:function(m){u.set("s65");u.da("u46",m.m);u.F("u47",m.H);N.l(!1,!1)},instance:function(m){c||p.B();var r="undefined"===typeof m.Df?
8:m.Df,h=m.width,q=m.tc,v=[Math.floor(q[0]*h),Math.ceil(q[1]*h)],C=h-2*v[1],y=m.Gd?m.Gd:8,t=Math.ceil(("undefined"===typeof m.Md?1:m.Md)*h);C=Math.min(C,2*t);var F=Math.max(v[1],h/2-t)/h,A="undefined"===typeof m.xa?1:m.xa,k=V.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:C*r}),K=1/y,O=Math.ceil(Math.log(k.A())/Math.log(4));m=k.A();var I=Array(O);for(h=0;h<O;++h)I[h]=V.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(m/Math.pow(4,h+1))});var E=new Uint8Array(4),f={H:-1,
m:[0,0],xa:A};return{Rf:function(x){A=x},process:function(x){x.g(0);k.C();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE);b.blendColor(K,K,K,K);u.set("s63");u.da("u40",q);u.F("u42",r);u.F("u43",F);u.F("u44",A);for(x=0;x<y;++x)u.F("u41",2*x*Math.PI/y),N.l(!1,!1);b.disable(b.BLEND);u.set("s64");k.g(0);x=k.A();for(var G=0;G<O;++G){I[G].C();var J=I[G].A();u.I("u45",J,J);u.I("u14",1/x,1/x);N.l(!1,!1);I[G].g(0);x=J}a(E);f.m[0]=E[1]/255;f.m[1]=E[2]/
255;f.H=q[0]+(q[1]-q[0])*E[3]/255;f.xa=A;return f}}},ff:function(){g=V.instance({width:256,height:1,isFloat:!0});l=V.instance({width:1,isFloat:!1});var m={u1:0};u.fa({id:"s66",name:"_",h:"uniform sampler2D u1;uniform vec2 u40,u46;varying vec2 vv0;void main(){float f=mix(u40.x,u40.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=f*vec2(cos(a),sin(a)),b+=texture2D(u1,u46+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",i:["u1","u40"],j:m});u.fa({id:"s67",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
i:["u1"],j:m});d=!0},nh:function(m){d||p.ff();var r="undefined"===typeof m.m?[0,0]:m.m,h="undefined"===typeof m.tc?[0,0]:m.tc,q=new Uint8Array(4),v={m:r,H:0};return{set:function(C,y){r[0]=C[0];r[1]=C[1];h[0]=y[0];h[1]=y[1]},process:function(C){u.set("s66");u.da("u40",h);u.da("u46",r);g.C();C.g(0);N.l(!1,!1);u.set("s67");l.C();N.l(!1,!1);l.g(0);a(q);v.H=h[0]+(h[1]-h[0])*q[0]/255;return v}}}};return p}(),D={neuralNetworkPath:"jeelizPupillometryNNC.json",za:0,Jb:[2,5],
he:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,Dc:[.05,.05,.25],Zf:60,minScaleTracked:.6,maxScaleTracked:20,ie:.7,fe:1,Uc:[.0015,.005],Ld:[.003,.02],Kd:[.9,.98],Ha:[.49,.42,.17],Nc:[.3,1],ke:.2,le:2,Wc:.5,Vc:.03,fd:[.9,.57],ib:[.22,.22],Je:.5,Ub:256,hb:[0,0],Ne:3,de:[.21,.24],ce:40,ee:.4,sa:128,ac:1,jf:.005,Bb:[.07,.65],Bf:.15,Cf:.025,eg:20},vc={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},za=null,Lb=D.Cf,
sb=D.jf,Kb=-1,ca={Da:!1,G:[Cb(),Cb()]},pa={wf:-1,error:-2,qd:0,play:1,pause:2},qa=pa.qd,X={element:!1,L:!1,Xa:!1,cb:[0,0],T:[.5,.5],Ab:0},da={Oa:!1,Lb:!1,Kc:"./",ha:!1,Za:D.za,td:!0},qb=null;var Sa=Ja=Ia=fb=Za=Pa=mb=lb=kb=jb=ib=hb=gb=0;var ba=-1,ka=-1,La=null,Ka=0,pb=null,Ra=null,$a=null,ea=null,S=null,ia=null,Fb=!1,ub=null,ab=new Float32Array(12),ac=0,tb=null,Wb={VERSION:"2.0.0",init:function(a){function c(){qa!==pa.error&&2===++d&&(Ob(),X.L=V.instance({M:X.element,isPot:!1,isFloat:!1,isFlipY:!0,
isLinear:!0}),vb(),da.Oa&&(da.Oa(!1,{GL:b,canvasElement:da.ha,videoTexture:X.Xa.get()}),b.disable(b.BLEND)),Db())}if(qa!==pa.qd)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;qa=pa.wf;a.callbackReady&&(da.Oa=a.callbackReady);a.callbackTrack&&(da.Lb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(da.Za=a.animateDelay);Qa.B({xd:a.isKeepRunningOnWinFocusLost||!1,za:da.Za});Ea.B({lc:0,n:D.Jb[1]-D.Jb[0]+1,Cd:D.Jb[0]});da.td="undefined"===typeof a.isAdaptative?!0:a.isAdaptative;
da.td||Ea.Td(D.he);"undefined"!==typeof a.NNCPath&&(da.Kc=a.NNCPath);if(!a.canvasId)return Ma("NO_CANVASID"),!1;da.ha=document.getElementById(a.canvasId);if(!da.ha)return Ma("INVALID_CANVASID"),!1;ba=da.ha.width;ka=da.ha.height;if(!ba||!ka)return Ma("INVALID_CANVASDIMENSIONS"),!1;var d=0;za=Object.assign({},vc,a.videoSettings||{});za.videoElement?Pb(za.videoElement,c):hc(a.onWebcamAsk,a.onWebcamGet,function(g){Pb(g,c)});ec(function(g){if(!fc())return!1;qb=new Xb({Va:g.layers,yb:"gpuRawAvg",xb:gc});
u.Ya([{id:"s76",name:"_",oa:"attribute vec2 a0;uniform vec2 u54;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u54*a0;}",Aa:["a0"],ra:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u54"],precision:"lowp"},{id:"s77",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",oa:"attribute vec2 a0;uniform sampler2D u56;uniform vec2 u57;varying vec2 vv0;void main(){vec4 a=texture2D(u56,vec2(.17,.5));vec2 b=a.gb,c=a.a*u57;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",
Aa:["a0"],ra:[2],i:["u1","u56","u57"],precision:"lowp"},{id:"s78",name:"_",h:"uniform sampler2D u58,u56;uniform vec3 u59,u60;uniform float u61,u62,u63,u64,u65;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u58,vec2(.5,.5)),d=texture2D(u58,vec2(.75,.5));float f=dot(e,texture2D(u58,vec2(.75,.75))),g=dot(e,texture2D(u58,vec2(0.,.5))),h=dot(e,texture2D(u58,vec2(.25,.5)));vec4 a=texture2D(u56,vec2(.25,.5));float b=dot(c,e),i=dot(d,e);bool j=b>u64&&b>i+u65;j?a.r=2.:a.r>u63?a.r=0.:a.r>1.9&&(a.a>u62||a.a<u61)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u59);else a.r*=step(1.9,a.r),a.gba+=vec3(f,g,h)*u60*a.a;gl_FragColor=a;}",
oa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u58 u56 u59 u61 u62 u63 u60 u64 u65".split(" ")},{id:"s79",name:"_",oa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u58;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u58,vec2(0.,.75))),b=dot(e,texture2D(u58,vec2(.25,.75))),c=dot(e,texture2D(u58,vec2(.5,.75))),d=dot(e,texture2D(u58,vec2(.5,.5)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u58"]},{id:"s68",name:"_",h:"uniform sampler2D u56;uniform float u66;varying vec2 vv0;void main(){float f=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u56,vec2(vv0.x,.5));a.a=mix(a.a*u66,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u56","u66"]},{id:"s69",name:"_",h:"uniform sampler2D u56,u67;uniform vec2 u57;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u56,vec2(.25,.5));vec2 b=d.gb;float h=d.a;vec2 c=h*u57,i=b+c/2.,j=b-c/2.,f=step(j,a)*step(a,i);vec3 k=texture2D(u67,a).rgb;vec2 g=2.*abs(b-a)/c;float l=f.x*f.y*pow(max(g.x,g.y),3.);vec3 m=mix(k,vec3(0.,.6,1.),l);gl_FragColor=vec4(m,1.);}",
i:["u56","u67","u57"]},{id:"s70",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u30;uniform float u48;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y)).rgb*1.;vec3 e=a*a+b*b,g=texture2D(u1,vv0).rgb;float c=dot(e,f),h=dot(g,f);c=smoothstep(u48-.1,u48+.1,c),gl_FragColor=vec4(c,h,0.,1.);}",
oa:"attribute vec2 a0;uniform vec2 u10,u46;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u46+u10*a0,vv0=.5*vv0+vec2(.5,.5);}",Aa:["a0"],ra:[2],i:["u1","u10","u46","u30","u48"]},{id:"s71",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",oa:"attribute vec2 a0;uniform vec2 u10,u46;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u46+u10*a0,vv0=.5*vv0+vec2(.5,.5);}",Aa:["a0"],ra:[2],i:["u1","u10","u46"]},{id:"s72",name:"_",h:"uniform sampler2D u1;uniform vec2 u50,u40;uniform float u49;varying vec2 vv0;const float n=3.141592;const int o=4;int j(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u49));}void main(){vec2 c=u50.x*vec2(1.,1.)+vv0*u50.y;vec3 k=texture2D(u1,c).rgb;float d=0.,e,f;int a;vec2 l,g,b;for(float h=0.;h<60.;h+=1.){e=0.,a=o,f=h*n/60.,l=vec2(cos(f),sin(f));for(float i=0.;i<255.;i+=1.){g=(u40.x/2.+i/255.*(u40.y-u40.x)/2.)*l;if(a>0)b=c+g,a-=1-j(b,k),b=c-g,a-=1-j(b,k),e+=1.;}d=max(e,d);}gl_FragColor=vec4(d/255.,0,0,1.);}",
i:["u1","u50","u40","u49"]},{id:"s73",name:"_",h:"uniform sampler2D u1;uniform vec2 u46;uniform float u51,u52;const vec3 f=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u52);float d=distance(vv0*b,u46*b),g=step(abs(d-u51),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,f,g),gl_FragColor=vec4(a,1.);}",i:["u1","u46","u51","u52"]},{id:"s74",name:"_",h:"uniform sampler2D u1;uniform vec2 u46;uniform float u53;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u46)-u53),2e-3),c=step(distance(vv0,u46),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
i:["u1","u46","u53"]},{id:"s75",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",i:["u1"]}]);cc();tb=uc.instance({width:D.Ub,tc:D.de,Gd:D.ce,Md:D.ee});Nb();Mb();c();Wb.update_controls()});return!0},toggle_pause:function(a){if(-1!==[pa.play,pa.pause].indexOf(qa))return a?qa!==pa.play?a=!1:(Qa.stop(),qa=pa.pause,a=!0):a=Db(),a},set_animateDelay:function(a){da.Za=a;Qa.update({za:da.Za})},resize:function(){var a=da.ha.width,c=da.ha.height;
if(a===ba&&c===ka)return!1;ba=a;ka=c;Nb();Mb();Ob();vb();return!0},update_controls:function(){function a(d){return(d=document.getElementById(d))?parseFloat(d.value):!1}var c=a("jeePupilControlIrisEdgeSize");!1!==c&&(sb=c,vb());c=a("jeePupilControlIrisThres");!1!==c&&(Kb=c);c=a("jeePupilControlIrisRoundness");!1!==c&&tb.Rf(c);c=a("jeePupilControlPupilSensitivity");!1!==c&&(Lb=c)}};return Wb}();
;return JEELIZPUPILLOMETRY||window.JEELIZPUPILLOMETRY;})();