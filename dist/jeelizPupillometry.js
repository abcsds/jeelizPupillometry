 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZPUPILLOMETRY=(function(){window.JEELIZPUPILLOMETRY=function(){function Wb(a){var c=null,d=null,g=null,l=0,p=this,n=null,r={Ua:[],yb:"none",oc:!1,xb:null,grid:null};this.B=function(){this.qe(n.Ua);g.Vf({yb:n.yb,oc:n.oc,xb:n.xb})};this.Ye=function(k){return c[k]};this.Hb=function(k){["s32","s34","s27"].forEach(function(q){t.J(q,[{type:"2f",name:"u20",value:k}])});c&&c.forEach(function(q){q.Hb(k)})};this.qe=function(k){var q=null;l=k.length;var v=null!==n.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),E=v?n.grid:[1,1];
v&&this.Hb(E);c=k.map(function(y,B){y=Object.assign({},y,{index:B,parent:p,zb:q,qf:B===l-1,Ra:v,$:E});return q=B=0===B?Xb.instance(y):Yb.instance(y)});d=c[0];g=c[l-1];c.forEach(function(y,B){0!==B&&y.yf()})};this.X=function(k){k.h(0);var q=k;c.forEach(function(v){q=v.X(q,!1)});return q};this.Xe=function(){return d.We()};this.Qa=function(){return g.$e()};this.kd=function(){return g.kd()};this.u=function(){c&&(c.forEach(function(k){k.u()}),g=d=c=null,l=0)};"undefined"!==typeof a&&(n=Object.assign({},
r,a),this.B())}var fb,Ia,Ja,Pa,Za,gb,hb,ib,jb,kb,lb,mb;function nb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Ab(a,c,d){var g=1,l=0;for(d=c+d-1;d>=c;--d)l+=g*nb(a,d),g*=2;return l}function Bb(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),g=0;g<c;++g)d[g]=a.charCodeAt(g);return d}function ob(a){return"string"===typeof a?JSON.parse(a):a}function Zb(a){if("undefined"===typeof ob(a).nb){var c=ob(a);a=c.ne;var d=
c.nf,g=c.n;c=Bb(c);for(var l=new Float32Array(g),p=new Float32Array(d),n=a+d+1,r=0;r<g;++r){var k=n*r,q=0===nb(c,k)?1:-1,v=Ab(c,k+1,a);k=k+1+a;for(var E=p.length,y=0,B=k;B<k+E;++B)p[y]=nb(c,B,!0),++y;for(E=k=0;E<d;++E)k+=p[E]*Math.pow(2,-E-1);l[r]=0===k&&0===v?0:q*(1+k)*Math.pow(2,1+v-Math.pow(2,a-1))}a=l}else if(g=ob(a),a=g.nb,0===a)a=new Uint8Array(g.nb);else{d=g.n;g=Bb(g);c=new Uint32Array(d);for(l=0;l<d;++l)c[l]=Ab(g,l*a,a);a=c}return a}function Cb(){return{m:[.5,.5],scale:[1,1],R:!1,Fb:!1,ya:!1,
N:{m:[.5,.5],H:0,xa:1},ca:{m:[.5,.5],H:0}}}function Db(){if(qa===pa.play)return!1;qa=pa.play;Qa.stop();Eb(0)}function Fa(a,c,d,g){a=4*a+c;return d+($a[a]/255+$a[a+8]/65025)*(g-d)}function Eb(){if(qa!==pa.pause){t.Zc();N.reset();N.Ma();b.disable(b.DEPTH_TEST);ra.U();t.Ha();var a=X.element.currentTime-X.Ab;0>a&&(X.Ab=X.element.currentTime);1E3*a<D.cg||(X.R.refresh(),X.Ab+=a,t.set("s76"),X.Wa.C(),X.R.h(0),N.l(!1,!1));a=Da.Ze();for(var c=0;c<a;++c){Fb=c===a-1;t.set("s77");var d=Gb.Je(ba,S,Ka);pb.C(d,
Ka);X.Wa.h(0);Ra.h(1);N.l(!1,!1);qb.X(pb)}Da.Yd();ra.O();b.viewport(0,0,2,2);t.set("s68");Ra.h(0);N.l(!1,!1);b.readPixels(0,0,2,2,b.RGBA,b.UNSIGNED_BYTE,$a);ea.x=Fa(0,1,-1,1);ea.y=Fa(0,2,-1,1);ea.wc=Fa(0,3,0,1);ea.rx=Fa(1,0,-D.Ga[0],D.Ga[0]);ea.ry=Fa(1,1,-D.Ga[1],D.Ga[1]);ea.vc=Fa(1,2,-D.Ga[2],D.Ga[2]);ea.bb=Fa(1,3,0,1);ia.Be=ea.bb-S.detected;ia.dx=ea.x-S.x;ia.dy=ea.y-S.y;ia.Tb=ea.wc-S.s;ia.Qb=ea.rx-S.rx;ia.Rb=ea.ry-S.ry;ia.Sb=ea.vc-S.rz;c=Da.Qe();a=Math.sqrt(ia.dx*ia.dx+ia.dy*ia.dy+ia.Tb*ia.Tb)/
c;c=Math.sqrt(ia.Qb*ia.Qb+ia.Rb*ia.Rb+ia.Sb*ia.Sb)/c;a=1-rb.hc(D.Uc[0],D.Uc[1],a);c=1-rb.hc(D.Kd[0],D.Kd[1],c);a=a*c*rb.hc(D.Jd[0],D.Jd[1],ea.bb);c=ab[++$b%ab.length]=a;for(d=0;d<ab.length;++d)c=Math.min(c,ab[d]);c=Math.max(.5,c);a=Math.min(c,a);a=sa.W(D.Nc[0],D.Nc[1],1-Math.pow(a,D.je));S.x=sa.W(S.x,ea.x,a);S.y=sa.W(S.y,ea.y,a);S.s=sa.W(S.s,ea.wc,a);S.rx=sa.W(S.rx,ea.rx,a);S.ry=sa.W(S.ry,ea.ry,a);S.rz=sa.W(S.rz,ea.vc,a);S.detected=sa.W(S.detected,ea.bb,D.ie);!ca.Ca&&S.detected>D.Wc+D.Vc?ca.Ca=!0:
ca.Ca&&S.detected<D.Wc-D.Vc&&(ca.Ca=!1);if(ca.Ca){ra.U();var g=ba/ka;a=S.x+D.He*S.ry*S.s;c=S.y+S.s*D.fd[1]*g;var l=S.s*D.fd[0]*g;d=S.s*D.ib[0];g*=S.s*D.ib[1];d*=2*X.T[0];g*=2*X.T[1];a*=2*X.T[0];c*=2*X.T[1];l*=X.T[0];0<S.rx&&(c*=Math.cos(D.Le*S.rx));var p=l;p=0>S.ry?p+Math.sin(S.ry)*D.hb[0]:p-Math.sin(S.ry)*D.hb[1];ca.G[0].m[0]=a+p;ca.G[0].m[1]=c;ca.G[0].scale[0]=d;ca.G[0].scale[1]=g;l=0<S.ry?l-Math.sin(S.ry)*D.hb[0]:l+Math.sin(S.ry)*D.hb[1];ca.G[1].m[0]=a-l;ca.G[1].m[1]=c;ca.G[1].scale[0]=d;ca.G[1].scale[1]=
g;ca.G.forEach(ac)}ra.Zf();ca.Ca&&(b.viewport(0,ka/2,ba/2,ka/2),Hb(ca.G[1]),b.viewport(ba/2,ka/2,ba/2,ka/2),Hb(ca.G[0]),b.viewport(ba/2,ka/4,ba/4,ka/4),Ib(ca.G[1]),b.viewport(ba/2+ba/4,ka/4,ba/4,ka/4),Ib(ca.G[0]),b.viewport(ba/2,0,ba/4,ka/4),Jb(ca.G[1]),b.viewport(ba/2+ba/4,0,ba/4,ka/4),Jb(ca.G[0]),b.viewport(0,0,ba/2,ka/2));t.set("s69");Ra.h(0);X.Wa.h(1);N.l(!1,!1);da.Lb&&(S.pupilLeftRadius=ca.G[0].ca.H,S.pupilRightRadius=ca.G[1].ca.H,da.Lb(S));qa===pa.play&&Qa.Pd(Eb)}}function ac(a){t.set("s70");
t.I("u30",sb*a.scale[0],sb*a.scale[1]);t.da("u46",a.m);t.da("u10",a.scale);t.F("u48",Kb);a.R.C();X.R.h(0);N.l(!1,!1);var c=tb.process(a.R);a.N.m[0]=sa.W(a.N.m[0],c.m[0],D.ac);a.N.m[1]=sa.W(a.N.m[1],c.m[1],D.ac);a.N.H=sa.W(a.N.H,c.H,D.ac);a.N.xa=c.xa;t.set("s71");t.I("u46",a.m[0]+a.scale[0]*(2*a.N.m[0]-1),a.m[1]+a.scale[1]*(2*a.N.m[1]-1));t.I("u10",2*a.N.H*a.scale[0],2*a.N.H*a.scale[1]);X.R.h(0);a.Fb.C();N.l(!1,!1);c=a.ya.A();var d=(D.sa-c)/2;t.set("s72");t.F("u49",Lb);t.I("u50",d/D.sa,c/D.sa);a.ya.C();
a.Fb.h(0);N.l(!1,!1);V.If(a.ya,ub);ra.U();for(var g=0,l=[.5,.5],p=0;p<c;++p)for(var n=0;n<c;++n){var r=ub[4*(n+p*c)];r>g&&(g=r,l[0]=(n+d)/D.sa,l[1]=(p+d)/D.sa)}a.ca.m[0]=l[0];a.ca.m[1]=l[1];a.ca.H=D.Bb[0]+g/255*(D.Bb[1]-D.Bb[0]);a.ca.H*=.5}function Hb(a){a.R.h(0);t.set("s73");t.da("u46",a.N.m);t.F("u51",a.N.H);t.F("u52",a.N.xa);N.l(!1,!1)}function Ib(a){a.Fb.h(0);t.set("s74");t.da("u46",a.ca.m);t.F("u53",a.ca.H);N.l(!1,!1)}function Jb(a){a.ya.h(0);t.set("s75");N.l(!1,!1)}function bc(){X.Wa=V.instance({isPot:!0,
isMirror:!0,isLinear:!0,isFloat:!1,width:ba,height:ka});pb=Gb.instance({});var a={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,D.borderWidth,D.borderHeight,0,0,0,0,0])};Ra=cc.instance(a);$a=new Uint8Array(8*a.width);ea={bb:0,x:0,y:0,wc:1,rx:0,ry:0,vc:0};S={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,pupilRightRadius:0};ia={Be:0,dx:0,dy:0,Tb:0,Qb:0,Rb:0,Sb:0};ca.G.forEach(function(c){c.R=V.instance({isPot:!1,isLinear:!0,isFloat:!0,width:D.Ub,height:Math.round(D.Ub*D.ib[1]/
D.ib[0])});c.Fb=V.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:D.sa});c.ya=V.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(D.zf*D.sa)});ub=new Uint8Array(c.ya.A()*c.ya.A()*4)})}function Mb(){t.J("s77",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u56",value:1},{type:"2f",name:"u57",value:La}]);t.J("s78",[{type:"1i",name:"u58",value:0},{type:"1i",name:"u56",value:1},{type:"1f",name:"u61",value:D.minScaleTracked},{type:"1f",name:"u62",value:D.maxScaleTracked},{type:"1f",
name:"u63",value:D.Xf},{type:"1f",name:"u64",value:D.ge},{type:"1f",name:"u65",value:D.de},{type:"3f",name:"u60",value:[D.Dc[0]*La[0],D.Dc[1]*La[1],D.Dc[2]]}]);t.J("s79",[{type:"1i",name:"u58",value:0}]);t.J("s68",[{type:"1i",name:"u56",value:0},{type:"1f",name:"u66",value:La[0]}]);t.J("s69",[{type:"1i",name:"u56",value:0},{type:"1i",name:"u67",value:1},{type:"2f",name:"u57",value:La}]);var a=[{type:"1i",name:"u1",value:0}];t.J("s70",a);t.J("s71",a);t.J("s72",[{type:"2f",name:"u40",value:D.Bb}].concat(a));
t.J("s73",a);t.J("s74",a);t.J("s75",a)}function Nb(){Ka=qb.Xe();var a=ba/Ka;Pa=D.minScale*a;Za=D.maxScale*a;gb=(1-2*D.borderWidth)/D.nStepsX;hb=(1-2*D.borderHeight)/D.nStepsY;ib=(Za-Pa)/D.nStepsScale;jb=D.borderWidth;kb=D.borderHeight;lb=1-D.borderWidth;mb=1-D.borderHeight;La=[Ka/ba,Ka/ka];fb=0;Ia=D.borderWidth;Ja=D.borderHeight;Sa=Pa}function dc(a){bb.get(da.Kc+D.neuralNetworkPath,function(c){c=JSON.parse(c);a(c)})}function ec(){if(Ta.B({ab:da.ha,width:ba,height:ka,debug:!1,nc:function(){Ma("GLCONTEXT_LOST")},
antialias:!0,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");return!1}function fc(){Ra.Kf(1);b.viewport(0,0,1,1);t.set("s78");t.Rf("u59",Ia,Ja,Sa);N.l(!1,!1);Fb&&(b.viewport(1,0,1,1),t.set("s79"),N.l(!1,!1));1!==++fb%2&&(Sa+=ib,Sa>Za&&(Ia+=gb,Sa=Pa,Ia>lb&&(Ia=jb,Ja+=hb,Ja>mb&&(Ja=kb))))}function vb(){t.J("s76",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u54",value:X.T}])}function Ob(){X.T[0]=.5;X.T[1]=.5;var a=X.cb[1]/X.cb[0],c=Ta.V()/Ta.A();a>c?X.T[1]*=c/a:X.T[0]*=a/c}function gc(a,c,
d){a&&a();a={video:{width:{min:Ga.minWidth,max:Ga.maxWidth,ideal:Ga.idealWidth},height:{min:Ga.minHeight,max:Ga.maxHeight,ideal:Ga.idealHeight}},audio:!1};Y.Mc(a,Ga.deviceId);Y.get(Y.nd(),function(g){c&&c(g);d(g)},function(){Ma("WEBCAM_UNAVAILABLE")},a)}function Ma(a){qa!==pa.error&&(qa=pa.error,da.Na&&da.Na(a))}var sa={ah:function(a){return Math.ceil(Math.log2(a))},yh:function(a){return Math.log2(a)},uh:function(a){return 0===Math.log2(a)%1},ng:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=
d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},og:function(a,c,d){return Math.min(Math.max(a,c),d)},rg:function(a){return a*Math.PI/180},Dh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Eh:function(a){return Math.round(1E6*a)/1E6},bh:function(a,c){return(100*a/c).toFixed(3)},W:function(a,c,d){return a*(1-d)+c*d},zh:function(a,c){return a[0]*(1-c)+a[1]*c},Fe:function(a,c){return sa.we(a-c)},we:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},wg:function(a,
c){return Math.abs(sa.Fe(a,c))},dg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},bb={get:function(a,c,d){var g=new XMLHttpRequest;g.open("GET",a,!0);g.withCredentials=!1;g.onreadystatechange=function(){4===g.readyState&&(200===g.status||0===g.status?c(g.responseText):"undefined"!==typeof d&&d(g.status))};g.send()},af:function(a){return new Promise(function(c,d){bb.get(a,c,d)})},Yg:function(a,c,d){a+=d?"?"+bb.Ie(d):"";bb.get(a,function(g){c(JSON.parse(g))})},Bh:function(a,
c,d){var g=new XMLHttpRequest;g.open("POST",a,!0);g.setRequestHeader("Content-type","application/x-www-form-urlencoded");g.onreadystatechange=function(){4!==g.readyState||200!==g.status&&0!==g.status||d(g.responseText)};g.send(c)},Ie:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},Mg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};
d.send()}},hc={create:function(a,c){for(var d=Array(c),g=0;g<c;++g)d[g]=a;return d},sg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Hh:function(a,c,d){a.forEach(function(g,l){c[l]=g*d})},Qh:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),g=a[c];a[c]=a[d];a[d]=g}},Th:function(a){return a.sort(function(c,d){return c-d})},Wf:function(a){return Array.isArray(a)||a.constructor===Float32Array||
a.constructor===Uint8Array}},wb={Ob:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=wb.Ob(a[d],c);return a},vg:function(a){return JSON.parse(JSON.stringify(a))}},rb={Rh:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},hc:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Gg:function(a,c,d,g){return Math.pow(Math.min(Math.max((g-a)/(c-a),0),1),d)},Zh:function(){return 0},Ah:function(){return 1},
xh:function(a){return a},Dg:function(a){return a*a},Ig:function(a){return a*(2-a)},Ag:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},yg:function(a){return a*a*a},Hg:function(a){return--a*a*a+1},zg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Eg:function(a){return a*a*a*a},Jg:function(a){return 1- --a*a*a*a},Bg:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Fg:function(a){return a*a*a*a*a},Kg:function(a){return 1+--a*a*a*a*a},Cg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},ic={Ne:function(a,
c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},t=function(){function a(e,m,H){m=e.createShader(m);e.shaderSource(m,H);e.compileShader(m);return e.getShaderParameter(m,e.COMPILE_STATUS)?m:null}function c(e,m,H){m=
a(e,e.VERTEX_SHADER,m);H=a(e,e.FRAGMENT_SHADER,H);e===b&&r.push(m,H);var L=e.createProgram();e.attachShader(L,m);e.attachShader(L,H);e.linkProgram(L);return L}function d(e){return["float","sampler2D","int"].map(function(m){return"precision "+e+" "+m+";\n"}).join("")}function g(e,m){m.o=m.o?!0:!1;if(!m.o){m.oa=m.oa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";m.Aa=m.Aa||["a0"];m.ra=m.ra||[2];m.precision=m.precision||y;m.id=v++;
void 0!==m.Qd&&(m.Qd.forEach(function(P,fa){m.g=m.g.replace(P,m.Cb[fa])}),m.Qd.splice(0));m.Gc=0;m.ra.forEach(function(P){m.Gc+=4*P});var H=d(m.precision);m.wa=c(e,H+m.oa,H+m.g);m.D={};m.i.forEach(function(P){m.D[P]=e.getUniformLocation(m.wa,P)});m.attributes={};m.La=[];m.Aa.forEach(function(P){var fa=e.getAttribLocation(m.wa,P);m.attributes[P]=fa;m.La.push(fa)});if(m.j){e.useProgram(m.wa);q=m;k=m.id;for(var L in m.j)e.uniform1i(m.D[L],m.j[L])}m.ua=!0}}function l(e){wa.Qf(M);k!==e.id&&(M.S(),k=e.id,
q=e,b.useProgram(e.wa),e.La.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}function p(e,m,H){g(e,m,H);e.useProgram(m.wa);e.enableVertexAttribArray(m.attributes.a0);k=-1;return q=m}function n(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var r=[],k=-1,q=null,v=0,E=!1,y="highp",B=["u1"],x=["u0"],z={u1:0},h={u0:0},J={u1:0,u2:1},O={u1:0,u3:1},I=["u1","u3","u4"],G={u5:0},f=["u6","u7","u8","u9"],w={u6:0,u7:1},F={s0:n(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:B,j:z,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:J},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:z,o:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:B,j:z},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:J},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:B,j:z},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:B,j:z},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",i:["u0","u10"],j:h},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",
i:["u0","u10"],j:h},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:B,j:z},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",
i:["u1","u14"],j:z},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:B,j:z,o:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:B,j:z,o:!0},
s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:z},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:x,j:h,o:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:x,j:h,o:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:x,j:h,o:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:x,j:h,o:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:x,j:h},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:x,j:h},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:x,j:h,o:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},o:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:z},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},w),o:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:f,j:w},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(f),j:w,o:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(f),j:Object.assign({u25:3,u22:4,u23:5,u24:6},w),o:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(f),j:Object.assign({u3:2},w)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:w,o:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:I,j:O},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(I),j:O,o:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:I,j:O,o:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(I),j:O,o:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:I,j:O,o:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:B,j:z,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:z,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:z,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:J,o:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:J,o:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:G},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:G,o:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:z,precision:"lowp",o:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:z,precision:"lowp",o:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},o:!0}},K={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Cb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Cb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,Q=null,M={ub:function(){return E},B:function(){if(!E){u=wb.Ob(F,2);Q=wb.Ob(K,2);y="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var e in u)g(b,u[e],e);t.set("s0");b.enableVertexAttribArray(0);E=!0}},Xa:function(e){e.forEach(function(m){M.fa(m)})},fa:function(e){u[e.id]=e;g(b,e,e.id)},ff:function(e,
m,H){m||(m=e);u[m]=Object.create(Q[e]);u[m].pf=!0;Q[e].Cb&&Q[e].Cb.forEach(function(L,P){u[m].g=u[m].g.replace(new RegExp(L,"g"),H[P])});g(b,u[m],m)},set:function(e){var m=u[e];m.o&&(m.o=!1,g(b,m,e));l(m)},Va:function(e){return p(e,n(),"s48")},xc:function(e){return p(e,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s49")},Ke:function(e){return"undefined"===typeof u[e]?!1:u[e].ua},S:function(){-1!==k&&(k=-1,q.La.forEach(function(e){0!==e&&b.disableVertexAttribArray(e)}))},yc:function(){var e=
0;q.La.forEach(function(m,H){H=q.ra[H];b.vertexAttribPointer(m,H,b.FLOAT,!1,q.Gc,e);e+=4*H})},Zc:function(){b.enableVertexAttribArray(0)},Ha:function(){M.Db(b)},Db:function(e){e.vertexAttribPointer(q.La[0],2,e.FLOAT,!1,8,0)},Lh:function(e,m){b.uniform1i(q.D[e],m)},F:function(e,m){b.uniform1f(q.D[e],m)},I:function(e,m,H){b.uniform2f(q.D[e],m,H)},da:function(e,m){b.uniform2fv(q.D[e],m)},Mh:function(e,m){b.uniform3fv(q.D[e],m)},Rf:function(e,m,H,L){b.uniform3f(q.D[e],m,H,L)},Sf:function(e,m,H,L,P){b.uniform4f(q.D[e],
m,H,L,P)},Ud:function(e,m){b.uniform4fv(q.D[e],m)},Nh:function(e,m){b.uniformMatrix2fv(q.D[e],!1,m)},Oh:function(e,m){b.uniformMatrix3fv(q.D[e],!1,m)},Ph:function(e,m){b.uniformMatrix4fv(q.D[e],!1,m)},J:function(e,m){M.set(e);m.forEach(function(H){switch(H.type){case "4f":b.uniform4fv(q.D[H.name],H.value);break;case "3f":b.uniform3fv(q.D[H.name],H.value);break;case "2f":b.uniform2fv(q.D[H.name],H.value);break;case "1f":b.uniform1f(q.D[H.name],H.value);break;case "1i":b.uniform1i(q.D[H.name],H.value);
break;case "mat2":b.uniformMatrix2fv(q.D[H.name],!1,H.value);break;case "mat3":b.uniformMatrix3fv(q.D[H.name],!1,H.value);break;case "mat4":b.uniformMatrix4fv(q.D[H.name],!1,H.value)}})},$g:function(){return"lowp"},u:function(){M.S();b.disableVertexAttribArray(0);for(var e in u){var m=u[e];m.ua&&(m.ua=!1,b.deleteProgram(m.wa));m.pf&&delete u[e]}r.forEach(function(H){b.deleteShader(H)});r.splice(0);v=0;E=!1;q=null;k=-1}};return M}(),b=null,Ta=function(){function a(x){console.log("ERROR in ContextFF: ",
x);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x,z,h){x.setAttribute("width",z);x.setAttribute("height",h)}function g(x){function z(){Aa.u();Z.reset();J.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var h=document.createElement("canvas");d(h,5,5);var J=null;try{J=h.getContext("webgl2",x)}catch(O){return!1}if(!J)return!1;l(J);Z.$c(J);x=Z.Pb(J);if(!x.ja&&!x.la)return z(),!1;x=Aa.Oc(J,x);z();return x?!0:!1}function l(x){x.clearColor(0,
0,0,0);x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.FASTEST&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var p=null,n=null,r=null,k=null,q=!0,v=null,E=null,y=[],B={A:function(){return p.width},V:function(){return p.height},Rg:function(){return p},Pg:function(){return b},ma:function(){return q},flush:function(){b.flush()},
kh:function(){ra.U();B.Jf()},Jf:function(){V.reset();N.reset();t.S();t.Zc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);N.Ma();t.Ha()},Pe:function(){v||(v=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,v);return v},Tg:function(){return p.toDataURL("image/jpeg")},Ug:function(){ra.O();n||(n=document.createElement("canvas"),r=n.getContext("2d"));d(n,p.width,p.height);for(var x=B.Pe(),z=r.createImageData(n.width,n.height),h=n.width,J=n.height,O=z.data,I=0;I<
J;++I)for(var G=J-I-1,f=0;f<h;++f){var w=4*(I*h+f),F=4*(G*h+f);O[w]=x[F];O[w+1]=x[F+1];O[w+2]=x[F+2];O[w+3]=x[F+3]}r.putImageData(z,0,0);return n.toDataURL("image/png")},Sg:function(x){!n&&x&&(n=document.createElement("canvas"),r=n.getContext("2d"));var z=x?n:document.createElement("canvas");d(z,p.width,p.height);(x?r:z.getContext("2d")).drawImage(p,0,0);return z},B:function(x){x=Object.assign({ka:null,nc:null,ab:null,Tc:null,width:512,height:512,premultipliedAlpha:!1,kf:!0,antialias:!1,debug:!1,
ug:!1},x);x.ka?(b=x.ka,p=x.ka.canvas):x.Tc&&!x.ab?p=document.getElementById(x.Tc):x.ab&&(p=x.ab);p||(p=document.createElement("canvas"));p.width=x.width;p.height=x.height;if(b)q=b instanceof WebGL2RenderingContext;else{q=!0;var z={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.kf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(z.antialias=!1);var h=g(z);h||!z.antialias||c()||(z.antialias=!1,h=g(z));h&&(b=p.getContext("webgl2",z));b?q=!0:((b=p.getContext("webgl",z))||(b=p.getContext("experimental-webgl",z)),q=!1)}if(!b)return a("WebGL1 and 2 are not enabled");x.nc&&p.addEventListener&&(k=b.getExtension("WEBGL_lose_context"))&&(E=x.nc,p.addEventListener("webglcontextlost",E,!1));if(!Z.B())return a("Not enough GL capabilities");l(b);t.B();N.B();Aa.Oc(b,Z.Oe());y.forEach(function(J){J(b)});y.splice(0);return!0},ig:function(){return new Promise(function(x){b?
x(b):y.push(x)})},u:function(){b&&(Z.u(),t.u(),Aa.u());k&&E&&(p.removeEventListener("webglcontextlost",E,!1),k=E=null);b=v=r=n=p=null;y.splice(0)}};return B}(),wa=function(){function a(){null===c&&("undefined"!==typeof t?c=t:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Qf:function(d){c!==d&&(c&&c.S(),c=d)},ub:function(){return c.ub()},Ha:function(){return c.Ha()},Db:function(d){return c.Db(d)},yc:function(){return c.yc()},S:function(){return c.S()},set:function(d){a();
return c.set(d)},Va:function(d){a();return c.Va(d)},xc:function(d){a();return c.xc(d)}}}(),za=function(){function a(e){b.bindTexture(b.TEXTURE_2D,e)}function c(e){K[0]=e;e=u[0];var m=e>>16&32768,H=e>>12&2047,L=e>>23&255;return 103>L?m:142<L?m|31744|((255==L?0:1)&&e&8388607):113>L?(H|=2048,m|(H>>114-L)+(H>>113-L&1)):m=(m|L-112<<10|H>>1)+(H&1)}function d(e){var m=new Uint16Array(e.length);e.forEach(function(H,L){m[L]=c(H)});return m}function g(){if(null!==Q.Zb)return Q.Zb;var e=p(d([.5,.5,.5,.5]),!0);
return null===e?!0:Q.Zb=e}function l(){if(null!==Q.$b)return Q.$b;var e=p(new Uint8Array([127,127,127,127]),!1);return null===e?!0:Q.$b=e}function p(e,m){if(!wa.ub()||!z)return null;var H=null,L=Math.sqrt(e.length/4);try{var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;H=M.instance({isFloat:!1,P:m,array:e,width:L});P=b.getError();if(P!==b.NO_ERROR)return!1}catch(fa){return!1}oa.O();b.viewport(0,0,L,L);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);wa.set("s0");H.$a(0);na.l(!0,!0);e=4*L*L;
m=new Uint8Array(e);b.readPixels(0,0,L,L,b.RGBA,b.UNSIGNED_BYTE,m);L=!0;for(P=0;P<e;++P)L=L&&3>Math.abs(m[P]-127);H.remove();oa.U();return L}var n=0,r=null,k=0,q=null,v=null,E=null,y=null,B=null,x=null,z=!1,h=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,yd:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,L:null,od:null,mf:!1,P:!1,K:null,wb:4,ic:0},O=!1,I=null,G=null,f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],w=!1,F=!1,K=new Float32Array(1),u=new Int32Array(K.buffer),Q={Zb:null,$b:null},M={B:function(){z||(B=[b.RGBA,null,b.RGBA,b.RGBA],x=[b.RGBA,null,b.RGBA,b.RGBA],r=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],w="undefined"!==typeof JEContext,F="undefined"!==typeof Z,w&&JEContext.vh()&&r.push(b.TEXTURE8,b.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],z=!0)},ef:function(){if(!v){for(var e=new Float32Array(16384),m=0;16384>
m;++m)e[m]=2*Math.random()-1;v={random:M.instance({isFloat:!0,isPot:!0,array:e,width:64}),$d:M.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}M.bg()},Td:function(e){b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0)},ih:function(){return v.$d},bg:function(){y[1]=Z.Wb(b)},Nf:function(){x=B=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Od:function(e){t.set("s1");oa.O();var m=e.A(),H=e.V();b.viewport(0,0,m,H);e.h(0);na.l(!1,!1)},If:function(e,m){M.Od(e);b.readPixels(0,0,
e.A(),e.V(),b.RGBA,b.UNSIGNED_BYTE,m)},Ch:function(e,m){M.Od(e);return Z.uc(0,0,e.A(),e.V(),m)},hd:function(e,m,H,L,P,fa,ua){e.activeTexture(e.TEXTURE0);var Ba=e.createTexture();e.bindTexture(e.TEXTURE_2D,Ba);P=P instanceof Float32Array?P:new Float32Array(P);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);
e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,fa);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,H,L,0,e.RGBA,e.FLOAT,P);e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);ua&&(oa.U(),t.Va(e));e.viewport(0,0,H,L);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0);e.bindTexture(e.TEXTURE_2D,Ba);ua?na.l(!0,!0):N.kb(e);e.deleteTexture(Ba);z&&(q[0]=-1,E=null,n=0)},Kb:function(e){e!==n&&(b.activeTexture(r[e]),n=e)},instance:function(e){var m;function H(){T=void 0!==A.L.videoWidth?
A.L.videoWidth:A.L.width;U=void 0!==A.L.videoHeight?A.L.videoHeight:A.L.height}function L(C){var R=b.getError();if("FUCKING_BIG_ERROR"===R)return!1;b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,C);R=b.getError();R!==b.NO_ERROR&&ha!==b.RGBA&&(ha=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,C));return!0}function P(){if(!Pb){a(ta);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ya);A.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,A.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
A.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));A.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Vg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.eg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,A.isLinear?b.LINEAR:b.NEAREST);var C=A.isMipmap&&!Na;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A.yd?b.LINEAR_MIPMAP_LINEAR:A.isLinear?
C?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:C?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);ha=B[A.wb-1];la=x[A.wb-1];ja=y[xb];Z.ma()&&(C=Z.Re(),ha===b.RGBA&&ja===b.FLOAT?A.isMipmap||A.isLinear?la=Aa.Te(b):Z.Pc()?C&&(la=C):la=b.RGBA16F||b.RGBA:ha===b.RGB&&ja===b.FLOAT&&C&&(la=C,ha=b.RGBA));if(A.P&&!A.isFloat||A.isFloat&&A.isMipmap&&Aa.sf())la=Z.Se(),ja=Z.Wb(b);A.ic&&(cb=A.ic);A.isSrgb&&4===A.wb&&(ha=JEContext.gh());if(A.L)L(A.L);else if(A.url)L(Ea);else if(va){C=va;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,
0,la,T,U,0,ha,ja,C),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,T,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(uc){b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null)}A.isKeepArray||(va=null)}else C=b.getError(),"FUCKING_BIG_ERROR"!==C&&(b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null),C=b.getError(),C!==b.NO_ERROR&&(ha=b.RGBA,A.P&&ja!==b.FLOAT&&(ja=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,null))));if(A.isMipmap)if(!Na&&
aa)aa.mb(),db=!0;else if(Na){C=Math.log2(Math.min(T,U));Oa=Array(1+C);Oa[0]=ta;for(var R=1;R<=C;++R){var ma=Math.pow(2,R),W=T/ma;ma=U/ma;var Ha=b.createTexture();a(Ha);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,la,W,ma,0,ha,ja,null);a(null);Oa[R]=Ha}db=!0}a(null);q[n]=-1;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;A.K&&aa&&(A.K(aa),A.K=null)}}function fa(){for(var C=T*U,R=2*C,ma=3*C,W=
0;W<C;++W)xa[0][W]=Va[W],xa[1][W]=Va[W+C],xa[2][W]=Va[W+R],xa[3][W]=Va[W+ma]}function ua(){var C=T*U*4;Ca=[new Uint8Array(C),new Uint8Array(C),new Uint8Array(C),new Uint8Array(C)];xa=[new Float32Array(Ca[0].buffer),new Float32Array(Ca[1].buffer),new Float32Array(Ca[2].buffer),new Float32Array(Ca[3].buffer)];eb=new Uint8Array(4*C);Va=new Float32Array(eb.buffer);Wa=!0}function Ba(){m=new Uint8Array(T*U*4);Qb=new Float32Array(m.buffer);yb=!0}var A=Object.assign({},J,e),Xa=k++;null===A.isFlipY&&(A.isFlipY=
A.url?!0:!1);A.data&&(A.array="string"===typeof A.data?Zb(A.data):A.isFloat?new Float32Array(A.data):new Uint8Array(A.data),A.isFlipY=!1);var xb=0,Rb=A.L?!0:!1,Ya=null,zb=null,Sb=!1;A.P=A.P||A.isFloat;A.P&&(xb=1);!A.mf&&A.isFloat&&F&&!Z.Pc()&&(A.isFloat=!1);A.isFloat&&(xb=2);A.isAnisotropicFiltering&&w&&!JEContext.oh()&&(A.isAnisotropicFiltering=!1);var ta=A.od||b.createTexture(),Ea=null,va=!1,T=0,U=0,Ua=!1,Pb=!1,Wa=!1,xa=null,Ca=null,eb=null,Va=null,la=null,ha=null,ja=null,ya=A.isFlipY,jc=(e=A.P&&
A.isMipmap)&&Aa.re(),Na=e&&!jc?!0:!1,Oa=null,cb=-1,Tb=-1,db=!1;var yb=!1;var Qb=m=null;A.width&&(T=A.width,U=A.height?A.height:T);var aa={get:function(){return ta},A:function(){return T},V:function(){return U},jh:function(){return A.url},ph:function(){return A.isFloat},rh:function(){return A.P},Jh:function(C){ta=C},sh:function(){return A.isLinear},mb:function(){b.generateMipmap(b.TEXTURE_2D)},oe:function(C,R){Na?(C||(C=aa.ld()),M.Kb(R),a(Oa[C]),q[R]=-1):aa.h(R)},ld:function(){-1===cb&&(cb=Math.log(T)/
Math.log(2));return cb},Me:function(C){C||(C=aa.ld());if(Na){t.set("s12");M.Kb(0);for(var R=T,ma=U,W=1;W<=C;++W)R/=2,ma/=2,t.I("u14",.25/R,.25/ma),b.viewport(0,0,R,ma),a(Oa[W-1]),b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Oa[W],0),na.l(!1,1===W);q[0]=-1}else C!==Tb&&(Tb=C,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,C)),aa.mb()},Kh:function(C){(Rb=!hc.Wf(C))?(va=null,A.L=C,H()):va=C},h:function(C){if(!Ua)return!1;M.Kb(C);if(q[C]===Xa)return!1;a(ta);q[C]=
Xa;return!0},$a:function(C){b.activeTexture(r[C]);n=C;a(ta);q[C]=Xa},v:function(){E=aa;M.Td(ta)},C:function(){b.viewport(0,0,T,U);E=aa;M.Td(ta)},Ec:M.Ec,Mf:function(C,R){T=C;U=R},resize:function(C,R){aa.Mf(C,R);P()},clone:function(C){C=M.instance({width:T,height:U,P:A.P,isFloat:A.isFloat,isLinear:A.isLinear,isMirrorY:A.isMirrorY,isFlipY:C?!ya:ya,isPot:A.isPot});wa.set("s0");oa.U();C.C();aa.h(0);na.l(!0,!0);return C},Tf:function(){b.viewport(0,0,T,U)},remove:function(){b.deleteTexture(ta);Pb=!0;h.splice(h.indexOf(aa),
1);aa=null},refresh:function(){aa.$a(0);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Rb?b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,A.L):b.texImage2D(b.TEXTURE_2D,0,la,T,U,0,ha,ja,va);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Nd:function(){Wa||ua();b.readPixels(0,0,T,4*U,b.RGBA,b.UNSIGNED_BYTE,eb);fa();return xa},Ef:function(){Wa||ua();return Z.uc(0,0,T,4*U,eb).then(function(){fa();return xa})},Gf:function(){yb||Ba();b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,m);return Qb},Ff:function(){yb||Ba();return Z.uc(0,
0,T,U,m)},Xc:function(C){oa.O();t.set("s15");aa.h(0);if(C)b.viewport(0,0,T,U),t.Sf("u15",.25,.25,.25,.25),na.l(!1,!0);else for(C=0;4>C;++C)b.viewport(0,U*C,T,U),t.Ud("u15",f[C]),na.l(!1,0===C)},Fc:function(C){var R=ja===y[0]&&!l();a(ta);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);R?(Sb||(Ya=document.createElement("canvas"),Ya.width=T,Ya.height=U,zb=Ya.getContext("2d"),zb.createImageData(T,U),Sb=!0),null.data.set(C),zb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,Ya)):b.texImage2D(b.TEXTURE_2D,
0,la,T,U,0,ha,ja,C);q[n]=Xa;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Yh:function(C,R){a(ta);R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,la,ha,ja,C);q[n]=Xa;R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ih:function(C,R){var ma=T*U,W=4*ma;C=A.P?C?"RGBE":"JSON":"RGBA";R&&(C=R);R=Z.ma()&&!1;var Ha=null;switch(C){case "RGBE":Ha="s13";break;case "JSON":Ha=R?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Ha="s7"}Wa||("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C?(Ca=new Uint8Array(W),
Wa=!0):"JSON"!==C||R||ua());oa.O();t.set(Ha);aa.h(0);W=null;if("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C){b.viewport(0,0,T,U);na.l(!0,!0);b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,Ca);if("RGBAARRAY"===C)return{data:Ca};O||(I=document.createElement("canvas"),G=I.getContext("2d"),O=!0);I.width=T;I.height=U;ma=G.createImageData(T,U);ma.data.set(Ca);G.putImageData(ma,0,0);W=I.toDataURL("image/png")}else if("JSON"===C)if(R)W=new Float32Array(ma),b.viewport(0,0,T,U),na.l(!0,!0),b.readPixels(0,0,T,U,b.RGBA,
b.FLOAT,W);else{for(W=0;4>W;++W)b.viewport(0,U*W,T,U),t.Ud("u15",f[W]),na.l(!W,!W);aa.Nd();W=Array(ma);for(R=0;R<ma;++R)W[4*R]=xa[0][R],W[4*R+1]=xa[1][R],W[4*R+2]=xa[2][R],W[4*R+3]=xa[3][R]}return{format:C,data:W,width:T,height:U,isMirrorY:A.isMirrorY,isFlipY:"RGBA"===C?A.isFlipY:!A.isFlipY}}};A.isMipmap&&!Na&&Ua&&!db&&(aa.mb(),db=!0);if(A.url)a(ta),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ea=new Image,Ea.tg="Anonymous",Ea.crossOrigin="Anonymous",Ea.src=A.url,Ea.onload=
function(){T=Ea.width;U=Ea.height;P()};else if(A.L){var Ub=function(){H();T?P():setTimeout(Ub,1)};Ub()}else A.array?(A.P&&!A.isFloat?A.array instanceof Uint16Array?(va=A.array,P()):g()?(va=d(A.array),P()):(P(),M.hd(b,ta,aa.A(),aa.V(),A.array,ya,!0)):(va=A.isFloat?A.array instanceof Float32Array?A.array:new Float32Array(A.array):A.array instanceof Uint8Array?A.array:new Uint8Array(A.array),P()),A.isKeepArray||(va&&va!==A.array&&(va=null),delete A.array)):A.od?Ua=!0:P();aa.fh=aa.A;A.K&&Ua&&(A.K(aa),
A.K=null);h.push(aa);return aa},O:function(e){e!==n&&(b.activeTexture(r[e]),n=e);q[e]=-1;a(null)},hg:function(e){v.random.h(e)},Ec:function(){E=null;b.framebufferTexture2D(oa.Xb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==n&&b.activeTexture(r[0]);for(var e=0;e<r.length;++e)q[e]=-1;n=-1},Fh:function(){n=-1},Yf:function(){for(var e=0;e<r.length;++e)M.O(e)},jd:function(){v&&(v.random.remove(),v.$d.remove())},Xh:function(e,m){if("RGBA"===e.format||"RGBE"===e.format){var H=new Image;
H.src=e.data;H.onload=function(){M.instance({isMirrorY:e.isMirrorY,isFlipY:e.isFlipY,isFloat:!1,L:H,K:function(L){if("RGBA"===e.format)m(L);else{var P=e.width,fa=e.height,ua=M.instance({isMirrorY:e.isMirrorY,isFloat:!0,width:P,height:fa,isFlipY:e.isFlipY});oa.U();b.viewport(0,0,P,fa);t.set("s14");ua.v();L.h(0);na.l(!0,!0);M.O(0);m(ua);Z.flush();L.remove()}}})}}else"JSON"===e.format?m(M.instance({isFloat:!0,isFlipY:e.isFlipY,width:e.width,height:e.height,array:new Float32Array(e.data)})):m(!1)},ye:d,
u:function(){E&&(ra.U(),M.Ec(),ra.O());M.Yf();h.slice(0).forEach(function(e){e.remove()});h.splice(0);z=!1;k=0;"undefined"!==typeof Aa&&Aa.u();v=null}};return M}(),cc=function(){return{instance:function(a){var c=[za.instance(a),za.instance(a)],d=[c[1],c[0]],g=d,l={Kf:function(p){g[1].v();g[0].h(p);l.Wd()},Lf:function(p){g[1].C();g[0].h(p);l.Wd()},Wd:function(){g=g===c?d:c},refresh:function(){g[0].refresh();g[1].refresh()},h:function(p){g[0].h(p)},$a:function(p){g[0].$a(p)},gg:function(p){g[1].h(p)},
Zg:function(){return g[0]},dh:function(){return g[1]},Fc:function(p){g[0].Fc(p);g[1].Fc(p)},remove:function(){g[0].remove();g[1].remove();g=null},sync:function(){l.Lf(0);t.set("s0");N.l(!1,!1)}};return l}}}(),na=function(){function a(k){var q={ea:null,indices:null};q.ea=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,q.ea);k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),k.STATIC_DRAW);q.indices=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,q.indices);k.bufferData(k.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),k.STATIC_DRAW);return q}var c=null,d=0,g=!1,l=[],p=-2,n=-2,r={reset:function(){n=p=-2},B:function(){g||(c=a(b),r.Ma(),g=!0)},instance:function(k){var q=d++,v=k.indices?k.indices.length:0,E="undefined"===typeof k.mode?b.STATIC_DRAW:k.mode,y=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,y);b.bufferData(b.ARRAY_BUFFER,k.ea instanceof Float32Array?k.ea:new Float32Array(k.ea),E);p=q;var B=null,x=null,z=null;if(k.indices){B=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,B);
var h=null;65536>k.indices.length?(h=Uint16Array,x=b.UNSIGNED_SHORT,z=2):(h=Uint32Array,x=b.UNSIGNED_INT,z=4);h=k.indices instanceof h?k.indices:new h(k.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,h,E);n=q}var J={pe:function(O){p!==q&&(b.bindBuffer(b.ARRAY_BUFFER,y),p=q);O&&wa.yc()},le:function(){n!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,B),n=q)},bind:function(O){J.pe(O);J.le()},Ge:function(){b.drawElements(b.TRIANGLES,v,x,0)},xg:function(O,I){b.drawElements(b.TRIANGLES,O,x,I*z)},remove:function(){b.deleteBuffer(y);
k.indices&&b.deleteBuffer(B);J=null}};l.push(J);return J},Ma:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ea),p=-1);-1!==n&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),n=-1)},l:function(k,q){k&&na.Ma();q&&wa.Ha();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},kb:function(k){k=k||b;var q=a(k);k.bindBuffer(k.ARRAY_BUFFER,q.ea);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,q.indices);wa.Db(k);k.clear(k.COLOR_BUFFER_BIT);k.drawElements(k.TRIANGLES,3,k.UNSIGNED_SHORT,0);k.flush();k.bindBuffer(k.ARRAY_BUFFER,
null);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,null);k.deleteBuffer(q.ea);k.deleteBuffer(q.indices);r.reset();g&&(r.Ma(),wa.Ha())},jd:function(){var k=b,q=c;k.deleteBuffer(q.ea);k.deleteBuffer(q.indices)},u:function(){r.jd();l.forEach(function(k){k.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);r.reset();g=!1;l.splice(0);d=0}};return r}(),oa=function(){var a=null,c=null,d=null,g=!1,l=[],p={M:-2,gd:1},n={ub:function(){return g},B:function(){if(!g){a=b.createFramebuffer();
var r=Z.ma();c=r&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=r&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;g=!0}},Wg:function(){return c},Ue:function(){return d},Xb:function(){return b.FRAMEBUFFER},eh:function(){return p},Og:function(){return a},instance:function(r){void 0===r.ud&&(r.ud=!1);var k=r.R?r.R:null,q=r.width,v=void 0!==r.height?r.height:r.width,E=a,y=null,B=!1,x=!1,z=0;k&&(q=q?q:k.A(),v=v?v:k.V());var h={Rd:function(){B||(E=b.createFramebuffer(),B=!0,z=p.gd++)},he:function(){h.Rd();
h.v();y=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,y);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,q,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,y);b.clearDepth(1)},bind:function(J,O){z!==p.M&&(b.bindFramebuffer(c,E),p.M=z);k&&k.v();O&&b.viewport(0,0,q,v);J&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},fg:function(){z!==p.M&&(b.bindFramebuffer(c,E),p.M=z)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},pg:function(){b.clear(b.COLOR_BUFFER_BIT)},
qg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Tf:function(){b.viewport(0,0,q,v)},v:function(){z!==p.M&&(b.bindFramebuffer(c,E),p.M=z)},rtt:function(J){k=J;p.M!==z&&(b.bindFramebuffer(b.FRAMEBUFFER,E),p.M=z);J.v()},O:function(){b.bindFramebuffer(c,null);p.M=-1},resize:function(J,O){q=J;v=O;y&&(b.bindRenderbuffer(b.RENDERBUFFER,y),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,q,v))},remove:function(){E===a||x||(b.bindFramebuffer(c,E),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0),y&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(E),y&&b.deleteRenderbuffer(y));x=!0}};r.ud&&h.he();l.push(h);return h},O:function(){b.bindFramebuffer(c,null);p.M=-1},Zf:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.Vd();p.M=-1},reset:function(){p.M=-2},U:function(){0!==p.M&&(b.bindFramebuffer(c,a),p.M=0)},clear:function(){Z.Vd();b.clear(b.COLOR_BUFFER_BIT)},u:function(){n.O();l.forEach(function(r){r.remove()});
null!==a&&(b.deleteFramebuffer(a),a=null);n.reset();g=!1;l.splice(0);p.gd=1}};return n}(),Z=function(){function a(){r="undefined"===typeof Ta?JEContext:Ta;k=!0}function c(f,w,F){for(var K=0;K<w.length;++K){var u=F.getExtension(w[K]+"_"+f);if(u)return u}return null}function d(){null!==h.Gb&&(clearTimeout(h.Gb),h.Gb=null);h.Da=!1}function g(f){if(0===h.ta.length){h.Z=b.PIXEL_PACK_BUFFER;h.ta.splice(0);h.pb.splice(0);for(var w=0;w<h.Oa;++w)h.ta.push(b.createBuffer()),h.pb.push(-1);h.ia=0;h.mc=0}b.bindBuffer(h.Z,
h.ta[h.ia]);f.byteLength!==h.pb[h.ia]&&(b.bufferData(h.Z,f.byteLength,b.STREAM_READ),h.pb[h.ia]=f.byteLength);h.mh=!0}function l(){b.bindBuffer(h.Z,null)}function p(){h.Ba.forEach(function(f){b.deleteSync(f)});h.Ba.splice(0)}function n(){h.ia=(h.ia+1)%h.Oa;++h.mc}var r=null,k=!1,q={vd:!1,zc:null,Ac:null,zd:!1,rf:!1,Bc:null,Ad:!1,Cc:null,wd:!1,Mb:null,hf:!1,Nb:null,jf:!1},v=null,E={ja:!0,la:!0,Vb:!0,Md:!1},y=null,B=!0,x=null,z=null,h={ze:1,Oa:-1,ia:0,mc:0,Da:!1,ta:[],Ba:[],pb:[],Z:null,Gb:null},J=
"EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),O=["OES","MOZ_OES","WEBKIT_OES"],I="undefined"===typeof window?{}:window,G={B:function(){if(k)return!0;G.reset();k||a();var f=b;if(!v.vd){v.zc=G.cd(f);I.GL_EXT_FLOAT=v.zc;v.zd=v.zc?!0:!1;if(v.zd||G.ma())v.Ac=G.dd(f),v.rf=v.Ac?!0:!1,I.GL_EXT_FLOATLINEAR=v.Ac;v.vd=!0}if(!v.wd){v.Bc=G.gb(f);v.Bc&&(v.Ad=!0,I.GL_EXT_HALFFLOAT=v.Bc);if(v.Ad||G.ma())v.Cc=G.ed(f),I.GL_EXT_HALFFLOATLINEAR=v.Cc;v.nh=v.Cc?!0:!1;v.wd=!0}v.Mb=G.ad(f);v.hf=v.Mb?!0:!1;I.GL_EXT_COLORBUFFERFLOAT=
v.Mb;v.Nb=G.bd(f);v.jf=v.Nb?!0:!1;I.GL_EXT_COLORBUFFERHALFFLOAT=v.Nb;oa.B();za.B();if(!G.Ce())return!1;na.B();za.ef();return!0},reset:function(){v=Object.assign({},q);y=Object.assign({},E)},A:function(){k||a();return r.A()},V:function(){k||a();return r.V()},ma:function(){k||a();return r.ma()},$c:function(f){G.ad(f);G.bd(f);G.cd(f);G.dd(f);G.gb(f);G.ed(f)},ad:c.bind(null,"color_buffer_float",J),bd:c.bind(null,"color_buffer_half_float",J),cd:c.bind(null,"texture_float",O),dd:c.bind(null,"texture_float_linear",
O),gb:c.bind(null,"texture_half_float",O),ed:c.bind(null,"texture_half_float_linear",O),Wb:function(f){var w=G.gb(f);return w&&w.HALF_FLOAT_OES?w.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},Re:function(){return z||b.RGBA32F||b.RGBA},Se:function(){return x||b.RGBA16F||b.RGBA},Oe:function(){return y},Pc:function(){return y.ja},kg:function(){return y.la},jg:function(){return y.Vb},se:function(){return y.Md&&B},Zd:function(f){B=f;!f&&h.Da&&(p(),b.bindBuffer(h.Z,null),h.Da=!1)},th:function(){return h.Da},Eb:function(f,
w,F){function K(){f.bindTexture(f.TEXTURE_2D,null);f.bindFramebuffer(u,null);f.deleteTexture(e);f.deleteFramebuffer(M)}var u=f.FRAMEBUFFER,Q=f.NEAREST,M=f.createFramebuffer();f.bindFramebuffer(u,M);var e=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,Q);f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_MIN_FILTER,Q);f.texImage2D(f.TEXTURE_2D,0,w,3,3,0,f.RGBA,F,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,e,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return K(),!1;wa.xc(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);na.kb(f);f.bindFramebuffer(u,null);wa.Va(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);na.kb(f);w=new Uint8Array(36);f.readPixels(0,
0,3,3,f.RGBA,f.UNSIGNED_BYTE,w);K();for(F=0;36>F;++F)if(3!==F%4&&3<Math.abs(w[F]-127))return!1;return!0},Pb:function(f){var w={ja:!1,la:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&G.Eb(f,f.RGBA32F,f.FLOAT)&&(w.ja=!0,z=f.RGBA32F);!w.ja&&G.Eb(f,f.RGBA,f.FLOAT)&&(w.ja=!0,z=f.RGBA);var F=G.Wb(f);x=null;f.RGBA16F&&G.Eb(f,f.RGBA16F,F)&&(w.la=!0,x=f.RGBA16F);!w.la&&G.Eb(f,f.RGBA,F)&&(w.la=!0,x=f.RGBA);return w},De:function(){var f=oa.instance({width:2});f.Rd();var w=
za.instance({width:2,isFloat:!0,wb:3});f.v();w.v();G.flush();b.checkFramebufferStatus(oa.Ue())!==b.FRAMEBUFFER_COMPLETE?(za.Nf(),y.Vb=!1):y.Vb=!0;f.remove();w.remove()},Ee:function(){var f=!1;G.ma()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(w){return"undefined"!==typeof b[w]}));y.Md=f},Ce:function(){var f=G.Pb(b);Object.assign(y,f);if(!y.ja&&!y.la)return!1;G.De();G.Ee();return!0},Hf:function(f,w,F,K,u){b.readPixels(f,
w,F,K,b.RGBA,b.UNSIGNED_BYTE,u);return Promise.resolve(u,!1)},uc:function(f,w,F,K,u,Q,M){if(!G.se())return G.Hf(f,w,F,K,u);h.Oa=M||h.ze;g(u);b.readPixels(f,w,F,K,b.RGBA,b.UNSIGNED_BYTE,0);h.Ba[h.ia]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);G.flush();var e=!1;return new Promise(function(m,H){function L(){if(!h.Da)return d(),l(),n(),H(),!1;var P=(h.ia+1)%h.Oa;switch(b.clientWaitSync(h.Ba[P],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(h.Ba[P]),h.Ba[P]=null,
b.bindBuffer(h.Z,h.ta[P]),b.getBufferSubData(h.Z,0,u),l(),n(),m(u,e),!0}h.Gb=setTimeout(L,0);return!1}d();h.mc+1<h.Oa?(l(),n(),m(u,!1)):(h.Da=!0,L()||!Q||e||(e=!0,Q()))})},Vd:function(){b.viewport(0,0,G.A(),G.V())},flush:function(){b.flush()},u:function(){d();p();za.u();oa.u();na.u();h.ta.forEach(function(f){b.deleteBuffer(f)});h.ta.splice(0);wa.reset();k=!1}};return G}(),N=na,ra=oa,V=za,Aa=function(){function a(f,w,F,K){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,K?h.NEAREST_MIPMAP_NEAREST:
h.LINEAR);var u=null;if(null!==F)try{u=h.getError();if("FUCKING_BIG_ERROR"===u)return!1;h.texImage2D(h.TEXTURE_2D,0,f,4,4,0,h.RGBA,w,F);u=h.getError();if(u!==h.NO_ERROR)return!1}catch(Q){return!1}K&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);N.kb(h);u=h.getError();if("FUCKING_BIG_ERROR"===u)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,v);u=h.getError();u===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,
0,2,2,h.RGBA,h.UNSIGNED_BYTE,v),u=h.getError());if(u!==h.NO_ERROR)return!1;F=!0;for(K=0;16>K;++K)F=F&&4>Math.abs(v[K]-127);F&&(k.Hd=w,k.sd=f);return F}function c(f,w){return J.ja&&a(f,h.FLOAT,new Float32Array(E),w)?(r=n.Lc,!0):!1}function d(f,w,F){if(!J.la)return!1;var K=za.ye(E),u=Z.gb(h);if(u&&u.HALF_FLOAT_OES&&a(f,u.HALF_FLOAT_OES,K,w)||h.HALF_FLOAT&&a(f,h.HALF_FLOAT,K,w))return r=n.Ka,!0;K=new Float32Array(E);if(a(f,h.FLOAT,K,w))return r=n.Ka,!0;h.bindTexture(h.TEXTURE_2D,F);h.texImage2D(h.TEXTURE_2D,
0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(k.eb,G);za.hd(h,F,2,2,K,!1,!1);h.bindFramebuffer(k.eb,null);h.bindTexture(h.TEXTURE_2D,F);return a(f,null,null,w)?(r=n.Ka,!0):!1}function g(f,w,F){q=!0;if(d(f,!0,F)||c(w,!0))return!0;q=!1;return d(f,!1,F)||c(w,!1)?!0:!1}function l(f){if(r===n.S){h=f||b;r=n.RGBA8;q=!0;Z.$c(h);J||(J=Z.Pb(h));ra.reset();G=h.createFramebuffer();k.eb=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(k.eb,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);t.S();
O=t.Va(h);f=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,f);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);I=f;var w=f=h.RGBA,F=h.RGBA16F,K=h.RGBA32F;K&&(f=K);F&&(w=F);if((F||K)&&g(w,f,I))return p(),!0;f=w=h.RGBA;if(g(w,f,I))return p(),!0;r=n.RGBA8;p();return!1}}function p(){h.deleteProgram(O.wa);h.deleteTexture(I);I=O=null}for(var n={S:-1,Lc:3,
Ka:2,RGBA8:0},r=n.S,k={Hd:null,sd:null,eb:null},q=!0,v=new Uint8Array(16),E=Array(64),y=0;4>y;++y)for(var B=0;4>B;++B){var x=0===(B+y)%2?1:0,z=4*y+B;E[4*z]=x;E[4*z+1]=x;E[4*z+2]=x;E[4*z+3]=x}var h=null,J=null,O=null,I=null,G=null;return{re:function(f){l(f);return q},Oc:function(f,w){r===n.S&&(typeof("undefined"!==w)&&(J=w),l(f));return r!==n.RGBA8},qh:function(f){l(f);return r===n.Lc},sf:function(f){l(f);return r===n.Ka},Xg:function(f){l(f);return k.Hd},Te:function(f){l(f);return k.sd},u:function(){h=
null;q=!0;r=n.S;J=null}}}(),Xb=function(){return{instance:function(a){function c(){y&&y.remove();y=V.instance({isFloat:!1,isPot:!1,width:a.size*a.$[0],height:a.size*a.$[1]})}var d=null,g=!1,l=!1,p=null,n=!1,r=!1,k=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(g=!0,D&&void 0!==D.ke&&(a.mask=D.ke+a.mask),d=V.instance({isFloat:!1,url:a.mask}));var E=!1;a.customInputShader&&(E="s50",t.fa({name:"_",id:E,g:a.customInputShader,
Wh:["uSource"],precision:"lowp"}),t.J(E,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":k="s39";n=!0;break;case "meanNormalization":k="s40";n=!0;break;case "grayScale":k="s36";n=!1;break;case "grayScaleTilt":k="s37";r=!0;n=!1;break;case "rgbGrayTilt":k="s38";r=!0;n=!1;break;case "copy":k=E?E:"s0";break;case "inputLightRegulation":k=E?E:"s36";p=kc.instance({rd:v,Gd:a.size,Ed:a.nBlurPass,aa:!1});l=!0;break;case "inputMix0":k="none";p=lc.instance({Y:v,na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||
1,aa:!1});l=!0;break;case "inputMix1":k="none";p=mc.instance({Y:v,na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,aa:!1});l=!0;break;case "inputCut4":k="none";p=nc.instance({Y:v,na:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,Sa:a.isNormalized||!1,sc:a.overlap||0,aa:!1});v*=p.Ve();l=!0;break;case "direct":case "none":case "abort":k="abort";break;default:k="s4"}v=Math.ceil(v);r&&t.J(k,[{name:"u29",type:"1f",value:a.tilt}]);g&&(k+="Mask");var y=null;c();var B={A:function(){return a.size},
We:function(){return v},Yb:function(){return B.A()},$e:function(){return l?p.Qa():y},Hb:function(x){a.$=x;c()},X:function(x){ra.U();if("abort"===k)return x.h(0),x;"none"!==k&&(t.set(k),n&&t.F("u30",1/a.size),y.C(),g&&d.h(1),N.l(!1,!1),y.h(0),x=y);l&&p.process(x)},u:function(){y.remove();g&&d.remove()}};return B}}}(),Yb=function(){return{instance:function(a){function c(){if(G.Ia){l.input&&(l.input.remove(),l.sb.remove());var w=a.size*a.sparsity;I=Math.log(w/a.size)/Math.log(2);l.input=V.instance({isMipmap:!0,
isFloat:!0,isPot:!0,width:w*a.$[0],height:w*a.$[1],ic:I});l.sb=V.instance({isFloat:!0,isPot:!0,width:a.size*a.$[0],height:a.size*a.$[1]})}}function d(){l.va&&l.va.remove();l.va=V.instance({isFloat:!0,isPot:!n,isLinear:!n&&r.isLinear,width:a.size*a.$[0],height:a.size*a.$[1]})}function g(w){r.buffer.forEach(function(F,K){r.results[K][0]=w[0][F];r.results[K][1]=w[1][F];r.results[K][2]=w[2][F];r.results[K][3]=w[3][F]});return r.results}a.normalize=a.normalize||!1;var l={input:null,bias:null,sb:null,va:null,
rc:null,pc:null,qc:null},p=null,n=!0,r={type:"undef",K:null,isLinear:!1,buffer:[],results:[],tb:!1},k=-1,q=a.isReorganize?a.isReorganize:!1,v=a.kernelsCount?!0:!1,E=[a.Ra?"s32":"s31",a.Ra?"s34":"s33","s35"][a.shiftRGBAMode||0],y={isEnabled:!1},B=1/a.size;a.qf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.zb.Yb(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.zb.Yb());var x={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],z=a.sparsity*
a.sparsity,h=!1,J=a.size,O="";if(a.maxPooling){switch(a.maxPooling.size){case 2:O="s41";break;case 4:O="s42"}h=!0;J/=a.maxPooling.size;l.pc=V.instance({isFloat:!0,isPot:!1,width:J})}var I=-1,G=null;n&&d();l.bias=V.instance(a.bias);var f={A:function(){return a.size},Yb:function(){return J},kd:function(){return a.classesCount},me:function(w){p.h(w)},yf:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,vf:V.instance(a.remap.maskTexture),Ua:a.remap.layers.map(function(w){return a.parent.Ye(w)}),
depth:a.remap.depth})},Of:function(){switch(a.connectivityUp){case "direct":G=oc.instance(a.connectivity);break;case "square":G=pc.instance(a.connectivity);break;case "squareFast":G=qc.instance(a.connectivity,a.activation);break;case "full":G=rc.instance(Object.assign({Ra:a.Ra},a.connectivity));break;case "conv":k=a.kernelsCount,G=sc.instance(a.connectivity),q&&(l.rc=V.instance({width:J,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},X:function(w,F){p=w;G.Ia?(l.input.C(),v&&l.bias.h(2),G.X(y),l.input.h(0),
l.input.Me(I),l.sb.C(),v?t.set("s0"):(t.set(E),t.F("u4",z),l.bias.h(1)),l.input.oe(I,0),N.l(!1,!1),t.set(x),l.va.v(),l.sb.h(0),N.l(!1,!1)):(l.va.C(),l.bias.h(1),G.X());if(n)return F=l.va,h&&(l.pc.C(),F.h(0),t.set(O),t.I("u14",B,B),N.l(!1,!1),F=l.pc),q&&(l.rc.v(),t.set("s24"),t.I("u18",k,J/k),F.h(0),N.l(!1,!1),F=l.rc),F.h(0),F;var K=l.va;if(a.normalize||r.tb)w=a.normalize,t.set(r.tb?"s9":"s8"),t.F("u10",w?B:1),l.qc.C(),K.h(0),N.l(!1,!1),K=l.qc;w=null;switch(r.type){case "cpuRGBA2Float":K.Xc(!1);F?
w=f.Cf(K).then(r.K):(K=f.Df(K),r.K(K));break;case "cpuMeanFloat":K.Xc(!0);if(F)w=K.Ff().then(r.K);else{K=K.Gf();for(var u=0;u<K.length;++u);r.K(K)}break;case "gpuRawAvg":case "gpuRaw":K.h(0);case "none":null!==r.K&&r.K(K)}F&&null===w&&(w=Promise.resolve());return w},Hb:function(w){a.$=w;c();d()},Vf:function(w){w&&(r.type=w.yb||"none",r.K=w.xb||null,r.isLinear=w.oc?!0:!1);d();w="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var F=0,K=0,u=0;F<w;++F)r.buffer.push(K+
(a.size-1-u)*a.size),r.results.push([-1,-1,-1,-1]),++K,K===a.size&&(K=0,++u);r.tb="gpuRawAvg"===r.type||"cpuMeanFloat"===r.type;if(a.normalize||r.tb)l.qc=V.instance({isFloat:!0,isPot:!0,width:a.size})},Cf:function(w){return w.Ef().then(g)},Df:function(w){w=w.Nd();g(w);return r.results},u:function(){for(var w in l){var F=l[w];F&&F.remove()}G&&(G.u(),G=null)}};a.zb&&f.Of(a.zb);return f}}}(),oc=function(){return{instance:function(a){var c=V.instance(a.weights);return{Ia:!0,ob:function(){return 1},u:function(){c.remove()},
cf:function(){return c},X:function(){t.set("s30");c.h(1);N.l(!1,!1)}}}}}(),rc=function(){return{instance:function(a){var c=a.fromLayerSize,d=V.instance(a.weights),g=a.Ra?"s27":"s26";return{Ia:!0,ob:function(){return c},u:function(){d.remove()},X:function(l){if(l.isEnabled){t.set("s28");l.vf.h(3);for(var p=Math.min(l.Ua.length,l.depth),n=0;n<p;++n)l.Ua[n].me(4+n)}else t.set(g);t.F("u8",a.toLayerSize);t.F("u9",a.fromLayerSize);d.h(1);N.l(!1,!1)}}}}}(),pc=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,g=a.toSparsity,l=g*d,p=l/c,n=c/d,r=0,k=0,q=0,v=Array(g*d*g*d*4),E=Array(g*d*g*d*4),y=Array(c*c),B=0;B<y.length;++B)y[B]=0;B=Math.floor(g/2);for(var x=.5/d,z=.5/c,h=.5/l,J=0;J<d;++J)for(var O=Math.round(J*n),I=0;I<d;++I){var G=Math.round(I*n),f=J/d,w=I/d;f+=x;w+=x;for(var F=0;F<g;++F){var K=O+F-B;0>K&&(K+=c);K>=c&&(K-=c);for(var u=0;u<g;++u){var Q=r/l,M=k/l,e=G+u-B;0>e&&(e+=c);e>=c&&(e-=c);var m=K/c,H=e/c;M=1-M-1/l;m+=z;H+=z;Q+=h;M+=h;var L=J*g+F,P=I*g+u;P=d*g-P-1;L=
P*d*g+L;v[4*L]=Q;v[4*L+1]=M;v[4*L+2]=m;v[4*L+3]=H;H=y[e*c+K]++;L=H%p;m=K*p+L;e=e*p+(H-L)/p;e=c*p-1-e;e=e*c*p+m;E[4*e]=Q;E[4*e+1]=M;E[4*e+2]=f;E[4*e+3]=w;++r>=l&&(r=0,++k);++q}}}y=null;var fa=V.instance(a.weights);delete a.weights.data;var ua=V.instance({width:l,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var Ba=V.instance({width:l,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{Ia:!0,ob:function(){return p},u:function(){ua.remove();Ba.remove();fa.remove()},X:function(){t.set("s25");
fa.h(1);Ba.h(2);N.l(!1,!1)}}}}}(),sc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,g=d*a.toLayerSize/a.fromLayerSize,l=a.inputScale||[1,1],p=V.instance(a.weights);return{Ia:!0,ob:function(){return g},hh:function(){return d},cf:function(){return p},u:function(){p.remove()},X:function(){t.set("s29");t.da("u28",l);t.F("u26",c);t.F("u27",d);t.F("u8",a.toLayerSize);t.F("u9",a.fromLayerSize);p.h(1);N.l(!1,!1)}}}}}(),qc=function(){return{instance:function(a,c){var d=a.fromLayerSize,
g=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,n=l*g/d,r=g<d,k=d/g,q=V.instance(a.weights),v="s51"+[d.toString(),g.toString(),l.toString(),p.toString(),c].join("_");t.Ke(v)||(a=ic.Ne(c,"gl_FragColor","gl_FragColor"),g=[{type:"1f",name:"u8",value:g},{type:"1f",name:"u32",value:p}],r&&g.push({type:"1f",name:"u9",value:d}),d=[(r?n:l).toFixed(1),a],r&&d.push(k.toFixed(1)),t.ff(r?"s47":"s46",v,d),t.J(v,g.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Ia:!1,ob:function(){return n},u:function(){q.remove()},X:function(){t.set(v);q.h(3);N.l(!1,!1)}}}}}(),kc=function(){return{instance:function(a){var c=a.Ed?a.Ed:3,d=a.rd?a.rd:64,g=a.Gd?a.Gd:64,l=a.aa?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=V.instance(a),n=V.instance(a),r=V.instance(a),k=V.instance(a),q=V.instance({isFloat:!0,width:g,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(E){t.set("s43");k.v();N.l(l,!1);t.set("s44");for(var y=0;y<c;++y)p.v(),t.I("u14",v,0),N.l(l,!1),
r.v(),k.h(0),N.l(l,!1),n.v(),p.h(0),t.I("u14",0,v),N.l(l,!1),k.v(),r.h(0),N.l(l,!1),y!==c-1&&n.h(0);t.set("s45");q.v();E.h(0);n.h(1);k.h(2);N.l(l,!1);q.h(0)},Qa:function(){return q}}}}}(),lc=function(){return{instance:function(a){function c(v){return V.instance({isFloat:v,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,ga:9,Y:128,gain:1,aa:!1},a),g=c(!1),l=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],n=c(!0),r=[g,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6));var k="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};t.Xa([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,j:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:k,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){t.set("s53");g.C();N.l(d.aa,!1);t.set("s54");for(var v=0;3>v;++v)t.I("u33",1,0),l[v].v(),r[v].h(0),
N.l(!1,!1),t.I("u33",0,1),p[v].v(),l[v].h(0),N.l(!1,!1);t.set("s55");n.v();g.h(0);p[0].h(1);p[1].h(2);p[2].h(3);N.l(!1,!1);n.h(0)},Qa:function(){return n}}}}}(),mc=function(){return{instance:function(a){function c(q){return V.instance({isFloat:q,width:d.Y,isPot:!1,isFlipY:!1})}var d=Object.assign({na:.1,ga:9,Y:128,gain:1,aa:!1},a),g=c(!1),l=c(!1),p=c(!1),n=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6));var r="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),k={u1:0};t.Xa([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:k,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,j:k,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){t.set("s56");g.C();N.l(d.aa,!1);t.set("s57");t.I("u33",1,0);l.v();g.h(0);N.l(!1,!1);t.I("u33",0,1);p.v();l.h(0);N.l(!1,!1);t.set("s58");n.v();g.h(0);p.h(1);N.l(!1,!1);n.h(0)},Qa:function(){return n}}}}}(),nc=function(){return{instance:function(a){function c(v){return V.instance({isFloat:v,width:d.Y,isPot:!1,isFlipY:!1})}
var d=Object.assign({na:.1,ga:9,Y:128,gain:1,sc:0,Sa:!1,aa:!1},a),g=c(!1),l=null,p=null,n=null;d.Sa&&(l=c(!1),p=c(!1),n=c(!0));a={u1:0};var r=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.sc.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Sa){var k="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.Y).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.na.toFixed(4)).replace("2.2222",d.gain.toFixed(4));r.push({id:"s60",name:"_",g:k,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:q,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}t.Xa(r);return{process:function(){t.set("s59");g.C();N.l(d.aa,!1);d.Sa?(t.set("s60"),t.I("u33",1,0),l.v(),g.h(0),N.l(!1,!1),t.I("u33",0,1),p.v(),l.h(0),N.l(!1,!1),t.set("s61"),n.v(),g.h(0),p.h(1),N.l(!1,!1),n.h(0)):g.h(0)},Ve:function(){return 2-d.sc},Qa:function(){return d.Sa?n:g}}}}}(),Da=function(){function a(z,
h,J,O,I,G,f){if(!B)if(f===G.length)I();else{switch(G[f]){case "A":J();break;case "D":z();break;case "S":h().then(function(w,F){x.Yd();a(z,h,J,F?null:O,I,G,++f)}).catch(function(w){console.log("An error occurred in the WebAR loop: ",w);I()});return;case "R":O&&O()}a(z,h,J,O,I,G,++f)}}var c={n:5,lc:1,Cd:0,lb:[35,49],fb:[2,200],k:.7,ag:200,xf:.05},d=-1,g=null,l=-1,p=-1,n=0,r=-1,k=-1,q=0,v=0,E=c.fb[1],y=Math.log(2),B=!0,x={Ze:function(){switch(d){case -1:return-1;case 0:return k+g.Cd;case 1:return q}},
Qg:function(z){return Math.pow(Math.min(Math.max(r,0),g.n-1)/(g.n-1),z||1)},B:function(z){g=Object.assign({},c,z);r=k=g.lc;d=0;x.reset()},Yd:function(z){z=("undefined"===typeof z?Date.now():z)||0;var h=Math.min(Math.max(z-v,g.fb[0]),g.fb[1]);E=h;v=z;var J=-1===l?0:g.k;l=Math.min(Math.max(1E3/h,5),120)*(1-J)+l*J;z-p>g.ag&&5<++n&&(h=g.k,r=r*(1-h)+(l<g.lb[0]?k-1:l>g.lb[1]?k+1:k)*h,Math.abs(r-k)>1-g.xf&&(h=Math.min(Math.max(Math.round(r),0),g.n-1),h!==k&&(r=k=h,l=(g.lb[1]-g.lb[0])/2)),p=z)},Pd:function(z,
h,J,O,I,G){B=!1;a(z,h,J,O,I,G,0)},stop:function(){B=!0},Sd:function(z){q=z;d=1},$f:function(){d=0;x.reset()},reset:function(){E=c.fb[1];p=l=-1;n=0},Uh:function(z,h,J){J=Math.exp(-y*E/J);return(1-J)*z+J*h},Qe:function(){return E}};return x}(),Qa=function(){function a(){d(z+B.jc);h.port.postMessage("DONE")}function c(){G.Za=0===B.za?O(d):O(g)}function d(u){I.Ea&&null!==x&&(u-=z,u=Math.min(Math.max(u,B.Yc[0]),B.Yc[1]),z+=u,p(),f.isEnabled&&f.Ta&&I.ba&&z-f.ec>B.Jc&&(q(),f.ec=z),x(z))}function g(u){I.Ea&&
(G.timeout=setTimeout(d.bind(null,u),B.za))}function l(){x=null;I.Ea=!1;p()}function p(){G.Za&&(window.cancelAnimationFrame(G.Za),G.Za=null);G.timeout&&(window.clearTimeout(G.timeout),G.timeout=null)}function n(u){u&&!I.ba?(I.ba=!0,J&&Da.$f(),h.port.postMessage("STOP"),Z.Zd(!0),c()):!u&&I.ba&&(I.ba=!1,J&&Da.Sd(1),Z.Zd(!1),h.port.postMessage("START"))}function r(u){u.target.hidden?F():w()}function k(u,Q,M){Q=u.createShader(Q);u.shaderSource(Q,M);u.compileShader(Q);return Q}function q(){f.Ta=!1;var u=
f.ka,Q=f.qb,M=f.rb,e=f.Z;u.uniform1f(f.pd,Math.random());f.Fa?Q.beginQueryEXT(e,M):u.beginQuery(e,M);u.drawElements(u.POINTS,1,u.UNSIGNED_SHORT,0);f.Fa?Q.endQueryEXT(e):u.endQuery(e);Z.flush();E().then(function(m){0===m||isNaN(m)?(f.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",m)):(m=B.ee*B.Ic*1E3/m,f.Ib=(f.Ib+1)%B.Ja,f.fc[f.Ib]=m,++f.Bd>B.Ja&&(f.vb.set(f.fc),f.vb.sort(function(H,L){return H-L}),m=f.vb[Math.floor(B.Ja/2)],f.jb=
Math.max(f.jb,m),B.Hc(m/f.jb)),f.Ta=!0)}).catch(function(){f.Ta=!0})}function v(u){var Q=f.ka,M=f.qb,e=f.rb;e=f.Fa?M.Ng(e,M.QUERY_RESULT_AVAILABLE_EXT):Q.getQueryParameter(e,Q.QUERY_RESULT_AVAILABLE);Q=Q.getParameter(M.GPU_DISJOINT_EXT);e?u(!Q):setTimeout(v.bind(null,u),.1)}function E(){return new Promise(function(u,Q){v(function(M){if(M){M=f.ka;var e=f.qb,m=f.rb;M=f.Fa?e.getQueryObjectEXT(m,e.QUERY_RESULT_EXT):M.getQueryParameter(m,M.QUERY_RESULT);u(M)}else Q()})})}var y={xd:!0,Yc:[1,200],jc:20,
za:0,Ic:50,ee:240,Jc:3E3,Ja:3,Hc:null},B=null,x=null,z=0,h=null,J=!1,O=null,I={ua:!1,ba:!0,dc:!1,cc:!1,bc:!1,Ea:!1},G={Za:null,timeout:null},f={isEnabled:!1,Ta:!1,ka:null,qb:null,rb:null,Z:null,pd:null,Fa:!0,ec:0,Bd:0,fc:null,vb:null,Ib:0,jb:0},w=n.bind(null,!0),F=n.bind(null,!1),K={B:function(u){B=Object.assign(y,u);Object.assign(I,{ba:!0,ua:!0,Ea:!1});O=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==B.Hc){u=document.createElement("canvas");u.setAttribute("width","1");u.setAttribute("height",
"1");var Q={antialias:!1};u=u.getContext("webgl2",Q)||u.getContext("webgl",Q);if(Q=u.getExtension("EXT_disjoint_timer_query")||u.getExtension("EXT_disjoint_timer_query_webgl2")){f.ka=u;f.qb=Q;f.isEnabled=!0;f.Fa=Q.beginQueryEXT?!0:!1;var M=k(u,u.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),e=k(u,u.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",B.Ic.toString())),m=u.createProgram();
u.attachShader(m,M);u.attachShader(m,e);u.linkProgram(m);M=u.getAttribLocation(m,"a0");f.pd=u.getUniformLocation(m,"u39");u.useProgram(m);u.enableVertexAttribArray(M);m=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,m);u.bufferData(u.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),u.STATIC_DRAW);u.vertexAttribPointer(M,4,u.FLOAT,!1,16,0);m=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,m);u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),u.STATIC_DRAW);u.disable(u.DEPTH_TEST);u.disable(u.DITHER);
u.disable(u.STENCIL_TEST);u.viewport(0,0,1,1);m=f.Fa?Q.createQueryEXT():u.createQuery();f.rb=m;f.Z=Q.TIME_ELAPSED_EXT||u.TIME_ELAPSED;f.ec=-B.Jc;f.fc=new Float32Array(B.Ja);f.vb=new Float32Array(B.Ja);f.jb=0;f.Ib=0;f.Bd=0;f.Ta=!0}}if(B.xd){u=!1;try{if("undefined"===typeof SharedWorker){var H=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
B.jc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),L=new Worker(H);L.addEventListener("message",a);h={Id:L,port:L};I.dc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
B.jc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),fa=new SharedWorker(P);fa.port.start();fa.port.addEventListener("message",a);h={Id:fa,port:fa.port};I.cc=!0}u=!0}catch(ua){}u&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",F),window.addEventListener("focus",w)),window.addEventListener("pagehide",
F),window.addEventListener("pageshow",w),I.bc=!0)}J="undefined"!==typeof Da},u:function(){l();I.bc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",F),window.removeEventListener("focus",w)),window.removeEventListener("pagehide",F),window.removeEventListener("pageshow",w),I.bc=!1);I.cc?(h.port.close(),I.cc=!1):I.dc&&(h.Id.terminate(),I.dc=!1);Object.assign(I,{ba:!0,ua:!1,Ea:!1});x=null},wh:function(){return I.ba},update:function(u){Object.assign(B,
u)},Pd:function(u){I.ua||K.B({});p();I.Ea=!0;x=u;I.ba&&c()},stop:l};return K}(),Y={nd:function(){return Y.Sc()?document.createElement("video"):!1},Pa:function(a,c){a[c]=!0;a.setAttribute(c,"true")},ve:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},ue:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},tf:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},mg:function(){return Y.Qc()||Y.ue()},Qc:function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Lg:function(){return Y.ve()?Y.tf()?window.innerHeight/window.innerWidth*45:45:45},Sc:function(){return navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Gh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Rc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(g){return g&&"object"===typeof g?Object.assign({},g):g};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c=
{audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&Y.Mc(c,a.deviceId);return c},Mc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},Xd:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Ae:function(a){function c(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(B,x){return Math.abs(B-y)-Math.abs(x-y)})}function d(y){var B=Y.Rc(a);y=y(B);l.push(y);g(y)}function g(y){if(y.video&&
y.video.facingMode&&y.video.facingMode.exact){var B=y.video.facingMode.exact;y=Y.Rc(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=B;l.push(y)}}var l=[];if(!a||!a.video)return l;g(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),r={},k=0;for(r.qa=void 0;k<p.length;r={qa:r.qa},++k){r.qa=p[k];var q={},v=0;for(q.pa=void 0;v<n.length;q={pa:q.pa},++v)if(q.pa=n[v],r.qa!==a.video.width.ideal||
q.pa!==a.video.height.ideal){var E=Math.max(r.qa,q.pa)/Math.min(r.qa,q.pa);E<4/3-.1||E>16/9+.1||d(function(y,B){return function(x){x.video.width.ideal=y.qa;x.video.height.ideal=B.pa;return x}}(r,q))}}}d(function(y){return Y.Xd(y)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(d(function(y){delete y.video.facingMode;
return y}),a.video.width&&a.video.height&&d(function(y){Y.Xd(y);delete y.video.facingMode;return y}));l.push({audio:a.audio,video:!0});return l},Dd:function(a){a.volume=0;Y.Pa(a,"muted");if(Y.Qc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Y.Pa(a,"muted")},5)}},Vh:function(a,c,d){return null===
a?Promise.resolve():new Promise(function(g,l){if(a.srcObject&&a.srcObject.getVideoTracks){var p=a.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=p[0],c?Y.get(a,g,l,d):(p.stop(),g()))}else l("BAD_IMPLEMENTATION")})},md:function(a,c,d,g){function l(n){p||(p=!0,d(n))}var p=!1;return navigator.mediaDevices.getUserMedia(g).then(function(n){function r(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)l("VIDEO_NULLSIZE");else{q={te:null,Uf:null,
wf:null};try{var v=n.getVideoTracks()[0];v&&(q.wf=v,q.te=v.getCapabilities(),q.Uf=v.getSettings())}catch(E){}p||c(a,n,q)}}else l("VIDEO_NOTSTARTED")},700)}function k(){a.removeEventListener("loadeddata",k,!1);var q=a.play();Y.Dd(a);"undefined"===typeof q?r():q.then(function(){r()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);Y.Dd(a);a.addEventListener("loadeddata",k,!1)}).catch(function(n){l(n)})},
af:function(a,c){var d=c||Y.nd();return new Promise(function(g,l){Y.get(d,g,l,a)})},get:function(a,c,d,g){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!Y.Sc())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;Y.Pa(a,"autoplay");Y.Pa(a,"playsinline");g&&g.audio?a.volume=0:Y.Pa(a,"muted");Y.xe(g).then(function(){Y.md(a,c,function(){function l(n){if(0===n.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var r=n.shift();Y.md(a,c,function(){l(n)},r)}}var p=Y.Ae(g);l(p)},g)})},xe:function(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(g){Y.bf(function(l){l?(l=l.find(function(p){var n=p.label;return n?d.some(function(r){return n.includes(r)}):!1}))?(a.video.deviceId={exact:l.deviceId},g("SUCCESS")):g("NO_PREFERRED_DEVICE_FOUND"):
g("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},bf:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},lg:function(a,c,d){var g={};g[c]=d;c=[];c.push(g);a.applyConstraints({advanced:c}).catch(function(){})}},
Gb=function(){var a={lf:!0,isLinear:!0,kc:[4,11]};return{Je:function(c,d,g){return d.isDetected?Math.floor(d.s*c):(c=Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(g,Math.pow(2,c)))},instance:function(c){var d=Object.assign({},a,c),g=[],l=null,p=-1,n=null,r=!1;for(c=d.kc[0];c<=d.kc[1];++c)g[c]=null;return{C:function(k,q){q!==p&&(l&&l.remove(),l=V.instance({isLinear:d.isLinear,isPot:!0,width:q}));if(r=d.lf&&q<.5*k){k=Math.floor(Math.log2(k));var v=d.kc;k=Math.min(Math.max(k,v[0]),
v[1]);g[k]||(g[k]=V.instance({isPot:!0,isMipmap:!0,yd:!0,width:Math.pow(2,k)}));n=g[k]}else n=l;p=q;n.C()},h:function(k){n.h(k);r&&n.mb()}}}}}(),tc=function(){function a(n){ra.O();t.set("s1");b.viewport(0,0,1,1);N.l(!1,!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,n);ra.U()}var c=!1,d=!1,g=null,l=null,p={B:function(){var n={u1:0};t.fa({id:"s62",name:"_",g:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u30;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y))*1.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y))*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y))*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30.y))*2.,b-=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y))*1.,b+=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30.y))*2.,b+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
i:["u1","u30"],j:n});t.fa({id:"s63",name:"_",g:"uniform sampler2D u1;uniform vec2 u40;uniform float u41,u42,u43,u44;varying vec2 vv0;void main(){vec2 a=floor(vv0*u42);float d=a.x+a.y*u42,f=u42*u42;vec2 g=fract(vv0*u42),b=u43+g*(1.-2.*u43);float c=d/(f-1.),h=mix(u40.x,u40.y,c);vec2 i=b+h*vec2(1.,1./u44)*vec2(cos(u41),sin(u41));float j=texture2D(u1,i).r;gl_FragColor=vec4(j,b,c);}",i:"u1 u40 u41 u42 u43 u44".split(" "),j:n});t.fa({id:"s64",name:"_",g:"uniform sampler2D u1;uniform vec2 u14,u45;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 g=vv0-u14*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,g+u14*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
i:["u1","u14","u45"],j:n});t.fa({id:"s65",name:"_",g:"uniform sampler2D u1;uniform vec2 u46;uniform float u47;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u46)-u47),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",i:["u1","u46","u47"],j:n});c=!0},Sh:function(n){c||p.B();t.set("s62");t.I("u30",.5/n.A(),.5/n.V());n.h(0);N.l(!1,!1)},Ge:function(n){t.set("s65");t.da("u46",n.m);t.F("u47",n.H);N.l(!1,!1)},instance:function(n){c||p.B();var r="undefined"===typeof n.Bf?
8:n.Bf,k=n.width,q=n.tc,v=[Math.floor(q[0]*k),Math.ceil(q[1]*k)],E=k-2*v[1],y=n.Fd?n.Fd:8,B=Math.ceil(("undefined"===typeof n.Ld?1:n.Ld)*k);E=Math.min(E,2*B);var x=Math.max(v[1],k/2-B)/k,z="undefined"===typeof n.xa?1:n.xa,h=V.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:E*r}),J=1/y,O=Math.ceil(Math.log(h.A())/Math.log(4));n=h.A();var I=Array(O);for(k=0;k<O;++k)I[k]=V.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(n/Math.pow(4,k+1))});var G=new Uint8Array(4),f={H:-1,
m:[0,0],xa:z};return{Pf:function(w){z=w},process:function(w){w.h(0);h.C();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE);b.blendColor(J,J,J,J);t.set("s63");t.da("u40",q);t.F("u42",r);t.F("u43",x);t.F("u44",z);for(w=0;w<y;++w)t.F("u41",2*w*Math.PI/y),N.l(!1,!1);b.disable(b.BLEND);t.set("s64");h.h(0);w=h.A();for(var F=0;F<O;++F){I[F].C();var K=I[F].A();t.I("u45",K,K);t.I("u14",1/w,1/w);N.l(!1,!1);I[F].h(0);w=K}a(G);f.m[0]=G[1]/255;f.m[1]=G[2]/
255;f.H=q[0]+(q[1]-q[0])*G[3]/255;f.xa=z;return f}}},df:function(){g=V.instance({width:256,height:1,isFloat:!0});l=V.instance({width:1,isFloat:!1});var n={u1:0};t.fa({id:"s66",name:"_",g:"uniform sampler2D u1;uniform vec2 u40,u46;varying vec2 vv0;void main(){float f=mix(u40.x,u40.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=f*vec2(cos(a),sin(a)),b+=texture2D(u1,u46+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",i:["u1","u40"],j:n});t.fa({id:"s67",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
i:["u1"],j:n});d=!0},lh:function(n){d||p.df();var r="undefined"===typeof n.m?[0,0]:n.m,k="undefined"===typeof n.tc?[0,0]:n.tc,q=new Uint8Array(4),v={m:r,H:0};return{set:function(E,y){r[0]=E[0];r[1]=E[1];k[0]=y[0];k[1]=y[1]},process:function(E){t.set("s66");t.da("u40",k);t.da("u46",r);g.C();E.h(0);N.l(!1,!1);t.set("s67");l.C();N.l(!1,!1);l.h(0);a(q);v.H=k[0]+(k[1]-k[0])*q[0]/255;return v}}}};return p}(),D={neuralNetworkPath:"jeelizPupillometryNNC.json",za:0,Jb:[2,5],
fe:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,Dc:[.05,.05,.25],Xf:60,minScaleTracked:.6,maxScaleTracked:20,ge:.7,de:1,Uc:[.0015,.005],Kd:[.003,.02],Jd:[.9,.98],Ga:[.49,.42,.17],Nc:[.3,1],ie:.2,je:2,Wc:.5,Vc:.03,fd:[.9,.57],ib:[.22,.22],He:.5,Ub:256,hb:[0,0],Le:3,be:[.21,.24],ae:40,ce:.4,sa:128,ac:1,gf:.005,Bb:[.07,.65],zf:.15,Af:.025,cg:20},Ga={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},Lb=D.Af,sb=D.gf,
Kb=-1,ca={Ca:!1,G:[Cb(),Cb()]},pa={uf:-1,error:-2,qd:0,play:1,pause:2},qa=pa.qd,X={element:!1,R:!1,Wa:!1,cb:[0,0],T:[.5,.5],Ab:0},da={Na:!1,Lb:!1,Kc:"./",ha:!1,Ya:D.za,td:!0},qb=null;var Sa=Ja=Ia=fb=Za=Pa=mb=lb=kb=jb=ib=hb=gb=0;var ba=-1,ka=-1,La=null,Ka=0,pb=null,Ra=null,$a=null,ea=null,S=null,ia=null,Fb=!1,ub=null,ab=new Float32Array(12),$b=0,tb=null,Vb={init:function(a){function c(){qa!==pa.error&&2===++d&&(Ob(),X.R=V.instance({L:X.element,isPot:!1,isFloat:!1,isFlipY:!0,isLinear:!0}),vb(),da.Na&&
(da.Na(!1,{GL:b,canvasElement:da.ha,videoTexture:X.Wa.get()}),b.disable(b.BLEND)),Db())}if(qa!==pa.qd)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;qa=pa.uf;a.callbackReady&&(da.Na=a.callbackReady);a.callbackTrack&&(da.Lb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(da.Ya=a.animateDelay);Qa.B({xd:a.isKeepRunningOnWinFocusLost||!1,za:da.Ya});Da.B({lc:0,n:D.Jb[1]-D.Jb[0]+1,Cd:D.Jb[0]});da.td="undefined"===typeof a.isAdaptative?!0:a.isAdaptative;da.td||Da.Sd(D.fe);"undefined"!==
typeof a.NNCPath&&(da.Kc=a.NNCPath);if(!a.canvasId)return Ma("NO_CANVASID"),!1;da.ha=document.getElementById(a.canvasId);if(!da.ha)return Ma("INVALID_CANVASID"),!1;ba=da.ha.width;ka=da.ha.height;if(!ba||!ka)return Ma("INVALID_CANVASDIMENSIONS"),!1;var d=0;gc(a.onWebcamAsk,a.onWebcamGet,function(g){if(qa!==pa.error){var l=g.videoHeight;X.cb[0]=g.videoWidth;X.cb[1]=l;X.element=g;c&&c()}});dc(function(g){if(!ec())return!1;qb=new Wb({Ua:g.layers,yb:"gpuRawAvg",xb:fc});t.Xa([{id:"s76",name:"_",oa:"attribute vec2 a0;uniform vec2 u54;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u54*a0;}",
Aa:["a0"],ra:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u54"],precision:"lowp"},{id:"s77",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",oa:"attribute vec2 a0;uniform sampler2D u56;uniform vec2 u57;varying vec2 vv0;void main(){vec4 a=texture2D(u56,vec2(.17,.5));vec2 b=a.gb,c=a.a*u57;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",Aa:["a0"],ra:[2],i:["u1","u56","u57"],precision:"lowp"},{id:"s78",name:"_",
g:"uniform sampler2D u58,u56;uniform vec3 u59,u60;uniform float u61,u62,u63,u64,u65;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u58,vec2(.5,.5)),d=texture2D(u58,vec2(.75,.5));float f=dot(e,texture2D(u58,vec2(.75,.75))),g=dot(e,texture2D(u58,vec2(0.,.5))),h=dot(e,texture2D(u58,vec2(.25,.5)));vec4 a=texture2D(u56,vec2(.25,.5));float b=dot(c,e),i=dot(d,e);bool j=b>u64&&b>i+u65;j?a.r=2.:a.r>u63?a.r=0.:a.r>1.9&&(a.a>u62||a.a<u61)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u59);else a.r*=step(1.9,a.r),a.gba+=vec3(f,g,h)*u60*a.a;gl_FragColor=a;}",
oa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u58 u56 u59 u61 u62 u63 u60 u64 u65".split(" ")},{id:"s79",name:"_",oa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u58;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u58,vec2(0.,.75))),b=dot(e,texture2D(u58,vec2(.25,.75))),c=dot(e,texture2D(u58,vec2(.5,.75))),d=dot(e,texture2D(u58,vec2(.5,.5)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u58"]},{id:"s68",name:"_",g:"uniform sampler2D u56;uniform float u66;varying vec2 vv0;void main(){float f=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u56,vec2(vv0.x,.5));a.a=mix(a.a*u66,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u56","u66"]},{id:"s69",name:"_",g:"uniform sampler2D u56,u67;uniform vec2 u57;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u56,vec2(.25,.5));vec2 b=d.gb;float h=d.a;vec2 c=h*u57,i=b+c/2.,j=b-c/2.,f=step(j,a)*step(a,i);vec3 k=texture2D(u67,a).rgb;vec2 g=2.*abs(b-a)/c;float l=f.x*f.y*pow(max(g.x,g.y),3.);vec3 m=mix(k,vec3(0.,.6,1.),l);gl_FragColor=vec4(m,1.);}",
i:["u56","u67","u57"]},{id:"s70",name:"_",g:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u30;uniform float u48;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u30.x,vv0.y-u30.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u30.x,vv0.y-u30.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u30.x,vv0.y+u30.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u30.x,vv0.y+u30.y)).rgb*1.;vec3 e=a*a+b*b,g=texture2D(u1,vv0).rgb;float c=dot(e,f),h=dot(g,f);c=smoothstep(u48-.1,u48+.1,c),gl_FragColor=vec4(c,h,0.,1.);}",
oa:"attribute vec2 a0;uniform vec2 u10,u46;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u46+u10*a0,vv0=.5*vv0+vec2(.5,.5);}",Aa:["a0"],ra:[2],i:["u1","u10","u46","u30","u48"]},{id:"s71",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",oa:"attribute vec2 a0;uniform vec2 u10,u46;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u46+u10*a0,vv0=.5*vv0+vec2(.5,.5);}",Aa:["a0"],ra:[2],i:["u1","u10","u46"]},{id:"s72",name:"_",g:"uniform sampler2D u1;uniform vec2 u50,u40;uniform float u49;varying vec2 vv0;const float n=3.141592;const int o=4;int j(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u49));}void main(){vec2 c=u50.x*vec2(1.,1.)+vv0*u50.y;vec3 k=texture2D(u1,c).rgb;float d=0.,e,f;int a;vec2 l,g,b;for(float h=0.;h<60.;h+=1.){e=0.,a=o,f=h*n/60.,l=vec2(cos(f),sin(f));for(float i=0.;i<255.;i+=1.){g=(u40.x/2.+i/255.*(u40.y-u40.x)/2.)*l;if(a>0)b=c+g,a-=1-j(b,k),b=c-g,a-=1-j(b,k),e+=1.;}d=max(e,d);}gl_FragColor=vec4(d/255.,0,0,1.);}",
i:["u1","u50","u40","u49"]},{id:"s73",name:"_",g:"uniform sampler2D u1;uniform vec2 u46;uniform float u51,u52;const vec3 f=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u52);float d=distance(vv0*b,u46*b),g=step(abs(d-u51),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,f,g),gl_FragColor=vec4(a,1.);}",i:["u1","u46","u51","u52"]},{id:"s74",name:"_",g:"uniform sampler2D u1;uniform vec2 u46;uniform float u53;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u46)-u53),2e-3),c=step(distance(vv0,u46),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
i:["u1","u46","u53"]},{id:"s75",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",i:["u1"]}]);bc();tb=tc.instance({width:D.Ub,tc:D.be,Fd:D.ae,Ld:D.ce});Nb();Mb();c();Vb.update_controls()});return!0},toggle_pause:function(a){if(-1!==[pa.play,pa.pause].indexOf(qa))return a?qa!==pa.play?a=!1:(Qa.stop(),qa=pa.pause,a=!0):a=Db(),a},set_animateDelay:function(a){da.Ya=a;Qa.update({za:da.Ya})},resize:function(){var a=da.ha.width,c=da.ha.height;
if(a===ba&&c===ka)return!1;ba=a;ka=c;Nb();Mb();Ob();vb();return!0},update_controls:function(){function a(d){return(d=document.getElementById(d))?parseFloat(d.value):!1}var c=a("jeePupilControlIrisEdgeSize");!1!==c&&(sb=c,vb());c=a("jeePupilControlIrisThres");!1!==c&&(Kb=c);c=a("jeePupilControlIrisRoundness");!1!==c&&tb.Pf(c);c=a("jeePupilControlPupilSensitivity");!1!==c&&(Lb=c)}};return Vb}();
;return JEELIZPUPILLOMETRY||window.JEELIZPUPILLOMETRY;})();