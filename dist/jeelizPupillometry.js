 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZPUPILLOMETRY=(function(){window.JEELIZPUPILLOMETRY=function(){function Ub(a){var c=null,d=null,e=null,r=0,k=this;this.A=function(m){this.Ef(m.rb);e.ve({mc:m.mc,Cd:m.Cd||!1,ic:m.ic})};this.Se=function(m){return c[m]};this.Ef=function(m){var p=null;r=m.length;c=m.map(function(l,q){l=Object.assign({},l,{index:q,parent:k,ub:p,ff:q===r-1});return p=q=0===q?Vb.instance(l):Wb.instance(l)});d=c[0];e=c[r-1];c.forEach(function(l,q){0!==q&&l.pf()})};this.W=function(m){m.g(0);var p=m;c.forEach(function(l){p=l.W(p,!1)});return p};this.gd=
function(){return d.Re()};this.Pa=function(){return e.Ue()};this.fd=function(){return e.fd()};this.u=function(){c&&(c.forEach(function(m){m.u()}),e=d=c=null,r=0)};"undefined"!==typeof a&&this.A(a)}var fb,Ja,Ka,Oa,Ya,gb,hb,ib,jb,kb,lb,mb;function nb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function zb(a,c,d){var e=1,r=0;for(d=c+d-1;d>=c;--d)r+=e*nb(a,d),e*=2;return r}function Ab(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),
e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function ob(a){return"string"===typeof a?JSON.parse(a):a}function Xb(a){if("undefined"===typeof ob(a).nb){var c=ob(a);a=c.ne;var d=c.nf,e=c.n;c=Ab(c);for(var r=new Float32Array(e),k=new Float32Array(d),m=a+d+1,p=0;p<e;++p){var l=m*p,q=0===nb(c,l)?1:-1,w=zb(c,l+1,a);l=l+1+a;for(var G=k.length,z=0,H=l;H<l+G;++H)k[z]=nb(c,H,!0),++z;for(G=l=0;G<d;++G)l+=k[G]*Math.pow(2,-G-1);r[p]=0===l&&0===w?0:q*(1+l)*Math.pow(2,1+w-Math.pow(2,a-1))}a=r}else if(e=ob(a),a=e.nb,
0===a)a=new Uint8Array(e.nb);else{d=e.n;e=Ab(e);c=new Uint32Array(d);for(r=0;r<d;++r)c[r]=zb(e,r*a,a);a=c}return a}function Bb(){return{m:[.5,.5],scale:[1,1],P:!1,Ab:!1,wa:!1,M:{m:[.5,.5],H:0,va:1},aa:{m:[.5,.5],H:0}}}function Cb(){if(qa===pa.play)return!1;qa=pa.play;Pa.stop();Db(0)}function Fa(a,c,d,e){a=4*a+c;return d+(Za[a]/255+Za[a+8]/65025)*(e-d)}function Db(){if(qa!==pa.pause){t.Vc();N.reset();N.La();b.disable(b.DEPTH_TEST);ra.T();t.Ga();var a=X.element.currentTime-X.vb;0>a&&(X.vb=X.element.currentTime);
1E3*a<E.Vf||(X.P.refresh(),X.vb+=a,t.set("s72"),X.Ta.D(),X.P.g(0),N.j(!1,!1));a=Da.Te();for(var c=0;c<a;++c)Eb=c===a-1,t.set("s73"),pb.D(),X.Ta.g(0),Qa.g(1),N.j(!1,!1),$a.W(pb);Da.Ud();ra.N();b.viewport(0,0,2,2);t.set("s64");Qa.g(0);N.j(!1,!1);b.readPixels(0,0,2,2,b.RGBA,b.UNSIGNED_BYTE,Za);da.x=Fa(0,1,-1,1);da.y=Fa(0,2,-1,1);da.rc=Fa(0,3,0,1);da.rx=Fa(1,0,-E.Fa[0],E.Fa[0]);da.ry=Fa(1,1,-E.Fa[1],E.Fa[1]);da.qc=Fa(1,2,-E.Fa[2],E.Fa[2]);da.Za=Fa(1,3,0,1);ha.we=da.Za-R.detected;ha.dx=da.x-R.x;ha.dy=
da.y-R.y;ha.Nb=da.rc-R.s;ha.Kb=da.rx-R.rx;ha.Lb=da.ry-R.ry;ha.Mb=da.qc-R.rz;c=Da.Le();a=Math.sqrt(ha.dx*ha.dx+ha.dy*ha.dy+ha.Nb*ha.Nb)/c;c=Math.sqrt(ha.Kb*ha.Kb+ha.Lb*ha.Lb+ha.Mb*ha.Mb)/c;a=1-qb.bc(E.Qc[0],E.Qc[1],a);c=1-qb.bc(E.Hd[0],E.Hd[1],c);a=a*c*qb.bc(E.Gd[0],E.Gd[1],da.Za);c=ab[++Yb%ab.length]=a;for(var d=0;d<ab.length;++d)c=Math.min(c,ab[d]);c=Math.max(.5,c);a=Math.min(c,a);a=sa.V(E.Ic[0],E.Ic[1],1-Math.pow(a,E.fe));R.x=sa.V(R.x,da.x,a);R.y=sa.V(R.y,da.y,a);R.s=sa.V(R.s,da.rc,a);R.rx=sa.V(R.rx,
da.rx,a);R.ry=sa.V(R.ry,da.ry,a);R.rz=sa.V(R.rz,da.qc,a);R.detected=sa.V(R.detected,da.Za,E.ee);!ba.Aa&&R.detected>E.Sc+E.Rc?ba.Aa=!0:ba.Aa&&R.detected<E.Sc-E.Rc&&(ba.Aa=!1);if(ba.Aa){ra.T();var e=ea/ja;a=R.x+E.Ce*R.ry*R.s;c=R.y+R.s*E.bd[1]*e;var r=R.s*E.bd[0]*e;d=R.s*E.fb[0];e*=R.s*E.fb[1];d*=2*X.S[0];e*=2*X.S[1];a*=2*X.S[0];c*=2*X.S[1];r*=X.S[0];0<R.rx&&(c*=Math.cos(E.Fe*R.rx));var k=r;k=0>R.ry?k+Math.sin(R.ry)*E.eb[0]:k-Math.sin(R.ry)*E.eb[1];ba.G[0].m[0]=a+k;ba.G[0].m[1]=c;ba.G[0].scale[0]=d;
ba.G[0].scale[1]=e;r=0<R.ry?r-Math.sin(R.ry)*E.eb[0]:r+Math.sin(R.ry)*E.eb[1];ba.G[1].m[0]=a-r;ba.G[1].m[1]=c;ba.G[1].scale[0]=d;ba.G[1].scale[1]=e;ba.G.forEach(Zb)}ra.Rf();ba.Aa&&(b.viewport(0,ja/2,ea/2,ja/2),Fb(ba.G[1]),b.viewport(ea/2,ja/2,ea/2,ja/2),Fb(ba.G[0]),b.viewport(ea/2,ja/4,ea/4,ja/4),Gb(ba.G[1]),b.viewport(ea/2+ea/4,ja/4,ea/4,ja/4),Gb(ba.G[0]),b.viewport(ea/2,0,ea/4,ja/4),Hb(ba.G[1]),b.viewport(ea/2+ea/4,0,ea/4,ja/4),Hb(ba.G[0]),b.viewport(0,0,ea/2,ja/2));t.set("s65");Qa.g(0);X.Ta.g(1);
N.j(!1,!1);ca.Fb&&(R.pupilLeftRadius=ba.G[0].aa.H,R.pupilRightRadius=ba.G[1].aa.H,ca.Fb(R));qa===pa.play&&Pa.Md(Db)}}function Zb(a){t.set("s66");t.I("u28",rb*a.scale[0],rb*a.scale[1]);t.ba("u44",a.m);t.ba("u6",a.scale);t.F("u46",Ib);a.P.D();X.P.g(0);N.j(!1,!1);var c=sb.process(a.P);a.M.m[0]=sa.V(a.M.m[0],c.m[0],E.Wb);a.M.m[1]=sa.V(a.M.m[1],c.m[1],E.Wb);a.M.H=sa.V(a.M.H,c.H,E.Wb);a.M.va=c.va;t.set("s67");t.I("u44",a.m[0]+a.scale[0]*(2*a.M.m[0]-1),a.m[1]+a.scale[1]*(2*a.M.m[1]-1));t.I("u6",2*a.M.H*
a.scale[0],2*a.M.H*a.scale[1]);X.P.g(0);a.Ab.D();N.j(!1,!1);c=a.wa.v();var d=(E.ra-c)/2;t.set("s68");t.F("u47",Jb);t.I("u48",d/E.ra,c/E.ra);a.wa.D();a.Ab.g(0);N.j(!1,!1);U.zf(a.wa,tb);ra.T();for(var e=0,r=[.5,.5],k=0;k<c;++k)for(var m=0;m<c;++m){var p=tb[4*(m+k*c)];p>e&&(e=p,r[0]=(m+d)/E.ra,r[1]=(k+d)/E.ra)}a.aa.m[0]=r[0];a.aa.m[1]=r[1];a.aa.H=E.wb[0]+e/255*(E.wb[1]-E.wb[0]);a.aa.H*=.5}function Fb(a){a.P.g(0);t.set("s69");t.ba("u44",a.M.m);t.F("u49",a.M.H);t.F("u50",a.M.va);N.j(!1,!1)}function Gb(a){a.Ab.g(0);
t.set("s70");t.ba("u44",a.aa.m);t.F("u51",a.aa.H);N.j(!1,!1)}function Hb(a){a.wa.g(0);t.set("s71");N.j(!1,!1)}function $b(){X.Ta=U.instance({isPot:!0,isMirror:!0,isLinear:!0,isFloat:!1,width:ea,height:ja});pb=U.instance({isPot:!0,isFloat:!1,width:$a.gd()});var a={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,E.borderWidth,E.borderHeight,0,0,0,0,0])};Qa=ac.instance(a);Za=new Uint8Array(8*a.width);da={Za:0,x:0,y:0,rc:1,rx:0,ry:0,qc:0};R={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,
pupilRightRadius:0};ha={we:0,dx:0,dy:0,Nb:0,Kb:0,Lb:0,Mb:0};ba.G.forEach(function(c){c.P=U.instance({isPot:!1,isLinear:!0,isFloat:!0,width:E.Ob,height:Math.round(E.Ob*E.fb[1]/E.fb[0])});c.Ab=U.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:E.ra});c.wa=U.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(E.qf*E.ra)});tb=new Uint8Array(c.wa.v()*c.wa.v()*4)})}function Kb(){t.J("s73",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u54",value:1},{type:"2f",name:"u55",value:La}]);t.J("s74",
[{type:"1i",name:"u56",value:0},{type:"1i",name:"u54",value:1},{type:"1f",name:"u59",value:E.minScaleTracked},{type:"1f",name:"u60",value:E.maxScaleTracked},{type:"1f",name:"u61",value:E.Pf},{type:"1f",name:"u62",value:E.ce},{type:"1f",name:"u63",value:E.$d},{type:"3f",name:"u58",value:[E.yc[0]*La[0],E.yc[1]*La[1],E.yc[2]]}]);t.J("s75",[{type:"1i",name:"u56",value:0}]);t.J("s64",[{type:"1i",name:"u54",value:0},{type:"1f",name:"u64",value:La[0]}]);t.J("s65",[{type:"1i",name:"u54",value:0},{type:"1i",
name:"u65",value:1},{type:"2f",name:"u55",value:La}]);var a=[{type:"1i",name:"u1",value:0}];t.J("s66",a);t.J("s67",a);t.J("s68",[{type:"2f",name:"u38",value:E.wb}].concat(a));t.J("s69",a);t.J("s70",a);t.J("s71",a)}function Lb(){var a=$a.gd(),c=ea/a;Oa=E.minScale*c;Ya=E.maxScale*c;gb=(1-2*E.borderWidth)/E.nStepsX;hb=(1-2*E.borderHeight)/E.nStepsY;ib=(Ya-Oa)/E.nStepsScale;jb=E.borderWidth;kb=E.borderHeight;lb=1-E.borderWidth;mb=1-E.borderHeight;La=[a/ea,a/ja];fb=0;Ja=E.borderWidth;Ka=E.borderHeight;
Ra=Oa}function bc(a){bb.get(ca.Fc+E.neuralNetworkPath,function(c){c=JSON.parse(c);a(c)})}function cc(){if(Sa.A({Ya:ca.fa,width:ea,height:ja,debug:!1,hc:function(){Ma("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0}))return!0;Ma("GL_INCOMPATIBLE");return!1}function dc(){Qa.Bf(1);b.viewport(0,0,1,1);t.set("s74");t.Jf("u57",Ja,Ka,Ra);N.j(!1,!1);Eb&&(b.viewport(1,0,1,1),t.set("s75"),N.j(!1,!1));1!==++fb%2&&(Ra+=ib,Ra>Ya&&(Ja+=gb,Ra=Oa,Ja>lb&&(Ja=jb,Ka+=hb,Ka>mb&&(Ka=kb))))}function ub(){t.J("s72",
[{type:"1i",name:"u1",value:0},{type:"2f",name:"u52",value:X.S}])}function Mb(){X.S[0]=.5;X.S[1]=.5;var a=X.$a[1]/X.$a[0],c=Sa.U()/Sa.v();a>c?X.S[1]*=c/a:X.S[0]*=a/c}function ec(a,c,d){a&&a();a={video:{width:{min:Ga.minWidth,max:Ga.maxWidth,ideal:Ga.idealWidth},height:{min:Ga.minHeight,max:Ga.maxHeight,ideal:Ga.idealHeight}},audio:!1};W.Hc(a,Ga.deviceId);W.get(W.kd(),function(e){c&&c(e);d(e)},function(){Ma("WEBCAM_UNAVAILABLE")},a)}function Ma(a){qa!==pa.error&&(qa=pa.error,ca.Ma&&ca.Ma(a))}var sa=
{Sg:function(a){return Math.ceil(Math.log2(a))},qh:function(a){return Math.log2(a)},mh:function(a){return 0===Math.log2(a)%1},eg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},fg:function(a,c,d){return Math.min(Math.max(a,c),d)},ig:function(a){return a*Math.PI/180},vh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},wh:function(a){return Math.round(1E6*a)/1E6},Tg:function(a,c){return(100*a/c).toFixed(3)},V:function(a,c,d){return a*
(1-d)+c*d},rh:function(a,c){return a[0]*(1-c)+a[1]*c},Ae:function(a,c){return sa.re(a-c)},re:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},ng:function(a,c){return Math.abs(sa.Ae(a,c))},Wf:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},bb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==
typeof d&&d(e.status))};e.send()},Ve:function(a){return new Promise(function(c,d){bb.get(a,c,d)})},Pg:function(a,c,d){a+=d?"?"+bb.De(d):"";bb.get(a,function(e){c(JSON.parse(e))})},th:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},De:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+
"="+encodeURIComponent(a[c])}).join("&")},Dg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},fc={create:function(a,c){for(var d=Array(c),e=0;e<c;++e)d[e]=a;return d},jg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},zh:function(a,c,d){a.forEach(function(e,r){c[r]=e*d})},Hh:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*
(c+1)),e=a[c];a[c]=a[d];a[d]=e}},Kh:function(a){return a.sort(function(c,d){return c-d})},Of:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},vb={Ib:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=vb.Ib(a[d],c);return a},mg:function(a){return JSON.parse(JSON.stringify(a))}},qb={Ih:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},bc:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},xg:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Qh:function(){return 0},sh:function(){return 1},ph:function(a){return a},ug:function(a){return a*a},zg:function(a){return a*(2-a)},rg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},pg:function(a){return a*a*a},yg:function(a){return--a*a*a+1},qg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},vg:function(a){return a*a*a*a},Ag:function(a){return 1- --a*a*a*a},sg:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},wg:function(a){return a*a*a*a*a},Bg:function(a){return 1+--a*a*a*a*a},tg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},gc={He:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";
default:return!1}}},t=function(){function a(u,n,g){n=u.createShader(n);u.shaderSource(n,g);u.compileShader(n);return u.getShaderParameter(n,u.COMPILE_STATUS)?n:null}function c(u,n,g){n=a(u,u.VERTEX_SHADER,n);g=a(u,u.FRAGMENT_SHADER,g);u===b&&p.push(n,g);var I=u.createProgram();u.attachShader(I,n);u.attachShader(I,g);u.linkProgram(I);return I}function d(u){return["float","sampler2D","int"].map(function(n){return"precision "+u+" "+n+";\n"}).join("")}function e(u,n){n.C=n.C?!0:!1;if(!n.C){n.ma=n.ma||
"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";n.ya=n.ya||["a0"];n.pa=n.pa||[2];n.precision=n.precision||z;n.id=w++;void 0!==n.Nd&&(n.Nd.forEach(function(O,P){n.h=n.h.replace(O,n.xb[P])}),n.Nd.splice(0));n.Bc=0;n.pa.forEach(function(O){n.Bc+=4*O});var g=d(n.precision);n.ua=c(u,g+n.ma,g+n.h);n.B={};n.i.forEach(function(O){n.B[O]=u.getUniformLocation(n.ua,O)});n.attributes={};n.Ka=[];n.ya.forEach(function(O){var P=u.getAttribLocation(n.ua,
O);n.attributes[O]=P;n.Ka.push(P)});if(n.l){u.useProgram(n.ua);q=n;l=n.id;for(var I in n.l)u.uniform1i(n.B[I],n.l[I])}n.ta=!0}}function r(u){wa.If(x);l!==u.id&&(x.R(),l=u.id,q=u,b.useProgram(u.ua),u.Ka.forEach(function(n){0!==n&&b.enableVertexAttribArray(n)}))}function k(u,n,g){e(u,n,g);u.useProgram(n.ua);u.enableVertexAttribArray(n.attributes.a0);l=-1;return q=n}function m(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],l:{u1:0}}}var p=[],
l=-1,q=null,w=0,G=!1,z="highp",H=["u1"],y=["u0"],B={u1:0},f={u0:0},J={u1:0,u2:1},K={u1:0,u3:1},h=["u1","u3","u4"],L={u5:0},v={s0:m(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:H,l:B,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],l:J},s3:{h:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",
i:["u1","u6","u7"],l:B,C:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:H,l:B},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],l:J},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:H,l:B},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
i:H,l:B},s8:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",i:["u0","u6"],l:f},s9:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",i:["u0","u6"],l:f},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
i:H,l:B},s11:{h:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",i:["u1","u8","u9"],l:{u1:0,u8:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",i:["u1","u10"],l:B},s13:{h:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
i:["u1","u11"],l:B},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:y,l:f,C:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:y,l:f},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:y,l:f},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:y,l:f},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:y,l:f},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:y,l:f,C:!0},s20:{h:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u12","u13"],l:{u0:0,u12:1},C:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u14"],l:B},s22:{h:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u15","u16","u17"],l:{u16:0,u15:1,
u17:2},C:!0},s23:{h:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u16","u15","u18","u19"],l:{u16:0,u15:1}},s24:{h:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),l:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},C:!0},s25:{h:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
i:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),l:{u16:0,u15:1,u3:2}},s26:{h:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",i:["u15","u16"],l:{u16:0,u15:1},C:!0},s27:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:h,l:K},s28:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:h,l:K,C:!0},s29:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:h,l:K,C:!0},s30:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:H,l:B,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],l:B,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],l:B,precision:"lowp"},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],l:J,C:!0},s34:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],l:J,C:!0},s35:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u10"],l:L},s36:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u10"],
l:L,C:!0},s37:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],l:B,precision:"lowp",C:!0},s38:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u10","u1"],
l:B,precision:"lowp",C:!0},s39:{h:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u12","u29"],l:{u1:0,u12:1,u29:2},C:!0}},C={s40:{h:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u18","u15","u16","u3","u30"],xb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{h:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u18 u19 u15 u16 u3 u30".split(" "),xb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},D=null,M=null,x={pb:function(){return G},A:function(){if(!G){D=vb.Ib(v,2);M=vb.Ib(C,2);z="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var u in D)e(b,D[u],u);t.set("s0");b.enableVertexAttribArray(0);G=!0}},Ua:function(u){u.forEach(function(n){x.da(n)})},da:function(u){D[u.id]=u;e(b,u,u.id)},Ze:function(u,
n,g){n||(n=u);D[n]=Object.create(M[u]);D[n].ef=!0;M[u].xb&&M[u].xb.forEach(function(I,O){D[n].h=D[n].h.replace(new RegExp(I,"g"),g[O])});e(b,D[n],n)},set:function(u){var n=D[u];n.C&&(n.C=!1,e(b,n,u));r(n)},Sa:function(u){return k(u,m(),"s42")},sc:function(u){return k(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:z},"s43")},Ee:function(u){return"undefined"===typeof D[u]?!1:D[u].ta},R:function(){-1!==l&&(l=-1,q.Ka.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},tc:function(){var u=
0;q.Ka.forEach(function(n,g){g=q.pa[g];b.vertexAttribPointer(n,g,b.FLOAT,!1,q.Bc,u);u+=4*g})},Vc:function(){b.enableVertexAttribArray(0)},Ga:function(){x.yb(b)},yb:function(u){u.vertexAttribPointer(q.Ka[0],2,u.FLOAT,!1,8,0)},Ch:function(u,n){b.uniform1i(q.B[u],n)},F:function(u,n){b.uniform1f(q.B[u],n)},I:function(u,n,g){b.uniform2f(q.B[u],n,g)},ba:function(u,n){b.uniform2fv(q.B[u],n)},Dh:function(u,n){b.uniform3fv(q.B[u],n)},Jf:function(u,n,g,I){b.uniform3f(q.B[u],n,g,I)},Kf:function(u,n,g,I,O){b.uniform4f(q.B[u],
n,g,I,O)},Qd:function(u,n){b.uniform4fv(q.B[u],n)},Eh:function(u,n){b.uniformMatrix2fv(q.B[u],!1,n)},Fh:function(u,n){b.uniformMatrix3fv(q.B[u],!1,n)},Gh:function(u,n){b.uniformMatrix4fv(q.B[u],!1,n)},J:function(u,n){x.set(u);n.forEach(function(g){switch(g.type){case "4f":b.uniform4fv(q.B[g.name],g.value);break;case "3f":b.uniform3fv(q.B[g.name],g.value);break;case "2f":b.uniform2fv(q.B[g.name],g.value);break;case "1f":b.uniform1f(q.B[g.name],g.value);break;case "1i":b.uniform1i(q.B[g.name],g.value);
break;case "mat2":b.uniformMatrix2fv(q.B[g.name],!1,g.value);break;case "mat3":b.uniformMatrix3fv(q.B[g.name],!1,g.value);break;case "mat4":b.uniformMatrix4fv(q.B[g.name],!1,g.value)}})},Rg:function(){return"lowp"},u:function(){x.R();b.disableVertexAttribArray(0);for(var u in D){var n=D[u];n.ta&&(n.ta=!1,b.deleteProgram(n.ua));n.ef&&delete D[u]}p.forEach(function(g){b.deleteShader(g)});p.splice(0);w=0;G=!1;q=null;l=-1}};return x}(),b=null,Sa=function(){function a(y){console.log("ERROR in ContextFF: ",
y);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(y,B,f){y.setAttribute("width",B);y.setAttribute("height",f)}function e(y){function B(){Aa.u();Z.reset();J.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var f=document.createElement("canvas");d(f,5,5);var J=null;try{J=f.getContext("webgl2",y)}catch(K){return!1}if(!J)return!1;r(J);Z.Wc(J);y=Z.Jb(J);if(!y.ha&&!y.ja)return B(),!1;y=Aa.Jc(J,y);B();return y?!0:!1}function r(y){y.clearColor(0,
0,0,0);y.disable(y.DEPTH_TEST);y.disable(y.BLEND);y.disable(y.DITHER);y.disable(y.STENCIL_TEST);y.disable(y.CULL_FACE);y.GENERATE_MIPMAP_HINT&&y.FASTEST&&y.hint(y.GENERATE_MIPMAP_HINT,y.FASTEST);y.disable(y.SAMPLE_ALPHA_TO_COVERAGE);y.disable(y.SAMPLE_COVERAGE);y.depthFunc(y.LEQUAL);y.clearDepth(1)}var k=null,m=null,p=null,l=null,q=!0,w=null,G=null,z=[],H={v:function(){return k.width},U:function(){return k.height},Ig:function(){return k},Gg:function(){return b},ka:function(){return q},flush:function(){b.flush()},
bh:function(){ra.T();H.Af()},Af:function(){U.reset();N.reset();t.R();t.Vc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);N.La();t.Ga()},Ke:function(){w||(w=new Uint8Array(k.width*k.height*4));b.readPixels(0,0,k.width,k.height,b.RGBA,b.UNSIGNED_BYTE,w);return w},Kg:function(){return k.toDataURL("image/jpeg")},Lg:function(){ra.N();m||(m=document.createElement("canvas"),p=m.getContext("2d"));d(m,k.width,k.height);for(var y=H.Ke(),B=p.createImageData(m.width,m.height),f=m.width,J=m.height,K=B.data,h=0;h<
J;++h)for(var L=J-h-1,v=0;v<f;++v){var C=4*(h*f+v),D=4*(L*f+v);K[C]=y[D];K[C+1]=y[D+1];K[C+2]=y[D+2];K[C+3]=y[D+3]}p.putImageData(B,0,0);return m.toDataURL("image/png")},Jg:function(y){!m&&y&&(m=document.createElement("canvas"),p=m.getContext("2d"));var B=y?m:document.createElement("canvas");d(B,k.width,k.height);(y?p:B.getContext("2d")).drawImage(k,0,0);return B},A:function(y){y=Object.assign({ia:null,hc:null,Ya:null,Pc:null,width:512,height:512,premultipliedAlpha:!1,cf:!0,antialias:!1,debug:!1,
lg:!1},y);y.ia?(b=y.ia,k=y.ia.canvas):y.Pc&&!y.Ya?k=document.getElementById(y.Pc):y.Ya&&(k=y.Ya);k||(k=document.createElement("canvas"));k.width=y.width;k.height=y.height;if(b)q=b instanceof WebGL2RenderingContext;else{q=!0;var B={antialias:y.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:y.premultipliedAlpha,stencil:!1,depth:y.cf,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(B.antialias=!1);var f=e(B);f||!B.antialias||c()||(B.antialias=!1,f=e(B));f&&(b=k.getContext("webgl2",B));b?q=!0:((b=k.getContext("webgl",B))||(b=k.getContext("experimental-webgl",B)),q=!1)}if(!b)return a("WebGL1 and 2 are not enabled");y.hc&&k.addEventListener&&(l=b.getExtension("WEBGL_lose_context"))&&(G=y.hc,k.addEventListener("webglcontextlost",G,!1));if(!Z.A())return a("Not enough GL capabilities");r(b);t.A();N.A();Aa.Jc(b,Z.Je());z.forEach(function(J){J(b)});z.splice(0);return!0},ag:function(){return new Promise(function(y){b?
y(b):z.push(y)})},u:function(){b&&(Z.u(),t.u(),Aa.u());l&&G&&(k.removeEventListener("webglcontextlost",G,!1),l=G=null);b=w=p=m=k=null;z.splice(0)}};return H}(),wa=function(){function a(){null===c&&("undefined"!==typeof t?c=t:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},If:function(d){c!==d&&(c&&c.R(),c=d)},pb:function(){return c.pb()},Ga:function(){return c.Ga()},yb:function(d){return c.yb(d)},tc:function(){return c.tc()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},Sa:function(d){a();return c.Sa(d)},sc:function(d){a();return c.sc(d)}}}(),za=function(){function a(g){b.bindTexture(b.TEXTURE_2D,g)}function c(g){M[0]=g;g=x[0];var I=g>>16&32768,O=g>>12&2047,P=g>>23&255;return 103>P?I:142<P?I|31744|((255==P?0:1)&&g&8388607):113>P?(O|=2048,I|(O>>114-P)+(O>>113-P&1)):I=(I|P-112<<10|O>>1)+(O&1)}function d(g){var I=new Uint16Array(g.length);g.forEach(function(O,P){I[P]=c(O)});return I}function e(){if(null!==u.Tb)return u.Tb;var g=k(d([.5,.5,.5,.5]),!0);
return null===g?!0:u.Tb=g}function r(){if(null!==u.Ub)return u.Ub;var g=k(new Uint8Array([127,127,127,127]),!1);return null===g?!0:u.Ub=g}function k(g,I){if(!wa.pb()||!B)return null;var O=null,P=Math.sqrt(g.length/4);try{var Y=b.getError();if("FUCKING_BIG_ERROR"===Y)return!1;O=n.instance({isFloat:!1,O:I,array:g,width:P});Y=b.getError();if(Y!==b.NO_ERROR)return!1}catch(oa){return!1}ma.N();b.viewport(0,0,P,P);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);wa.set("s0");O.Xa(0);na.j(!0,!0);g=4*P*P;
I=new Uint8Array(g);b.readPixels(0,0,P,P,b.RGBA,b.UNSIGNED_BYTE,I);P=!0;for(Y=0;Y<g;++Y)P=P&&3>Math.abs(I[Y]-127);O.remove();ma.T();return P}var m=0,p=null,l=0,q=null,w=null,G=null,z=null,H=null,y=null,B=!1,f=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,K:null,ld:null,df:!1,O:!1,qa:null,tb:4,cc:0},K=!1,h=null,L=null,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],
C=!1,D=!1,M=new Float32Array(1),x=new Int32Array(M.buffer),u={Tb:null,Ub:null},n={A:function(){B||(H=[b.RGBA,null,b.RGBA,b.RGBA],y=[b.RGBA,null,b.RGBA,b.RGBA],p=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],C="undefined"!==typeof JEContext,D="undefined"!==typeof Z,C&&JEContext.nh()&&p.push(b.TEXTURE8,b.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],z=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],B=!0)},Ye:function(){if(!w){for(var g=new Float32Array(16384),I=0;16384>I;++I)g[I]=
2*Math.random()-1;w={random:n.instance({isFloat:!0,isPot:!0,array:g,width:64}),Wd:n.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}n.Uf()},Zg:function(){return w.Wd},Uf:function(){z[1]=Z.Rb(b)},Ff:function(){y=H=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Ld:function(g){t.set("s1");ma.N();var I=g.v(),O=g.U();b.viewport(0,0,I,O);g.g(0);na.j(!1,!1)},zf:function(g,I){n.Ld(g);b.readPixels(0,0,g.v(),g.U(),b.RGBA,b.UNSIGNED_BYTE,I)},uh:function(g,I){n.Ld(g);return Z.pc(0,0,g.v(),g.U(),I)},
dd:function(g,I,O,P,Y,oa,ta){g.activeTexture(g.TEXTURE0);var Ba=g.createTexture();g.bindTexture(g.TEXTURE_2D,Ba);Y=Y instanceof Float32Array?Y:new Float32Array(Y);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,oa);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,O,P,0,g.RGBA,g.FLOAT,
Y);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);ta&&(ma.T(),t.Sa(g));g.viewport(0,0,O,P);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,I,0);g.bindTexture(g.TEXTURE_2D,Ba);ta?na.j(!0,!0):N.hb(g);g.deleteTexture(Ba);B&&(q[0]=-1,G=null,m=0)},Eb:function(g){g!==m&&(b.activeTexture(p[g]),m=g)},instance:function(g){var I;function O(){S=void 0!==A.K.videoWidth?A.K.videoWidth:A.K.width;T=void 0!==A.K.videoHeight?A.K.videoHeight:A.K.height}function P(F){var Q=
b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;b.texImage2D(b.TEXTURE_2D,0,ka,fa,ia,F);Q=b.getError();Q!==b.NO_ERROR&&fa!==b.RGBA&&(fa=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ka,fa,ia,F));return!0}function Y(){if(!Nb){a(ua);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ya);A.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,A.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,A.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));A.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Mg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Xf);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,A.isLinear?b.LINEAR:b.NEAREST);A.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A.isMipmap&&!Ha?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A.isMipmap&&!Ha?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);
fa=H[A.tb-1];ka=y[A.tb-1];ia=z[wb];if(Z.ka()){var F=Z.Me();fa===b.RGBA&&ia===b.FLOAT?A.isMipmap||A.isLinear?ka=Aa.Oe(b):Z.Kc()?F&&(ka=F):ka=b.RGBA16F||b.RGBA:fa===b.RGB&&ia===b.FLOAT&&F&&(ka=F,fa=b.RGBA)}if(A.O&&!A.isFloat||A.isFloat&&A.isMipmap&&Aa.hf())ka=Z.Ne(),ia=Z.Rb(b);A.cc&&(cb=A.cc);A.isSrgb&&4===A.tb&&(fa=JEContext.Xg());if(A.K)P(A.K);else if(A.url)P(Ea);else if(va){F=va;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,F),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,
0,ka,S,T,0,fa,ia,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,S,T,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(sc){b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,null)}A.isKeepArray||(va=null)}else F=b.getError(),"FUCKING_BIG_ERROR"!==F&&(b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,null),F=b.getError(),F!==b.NO_ERROR&&(fa=b.RGBA,A.O&&ia!==b.FLOAT&&(ia=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,null))));if(A.isMipmap)if(!Ha&&aa)aa.Qb(),db=!0;else if(Ha){F=Math.log2(Math.min(S,T));
Na=Array(1+F);Na[0]=ua;for(var Q=1;Q<=F;++Q){var la=Math.pow(2,Q),V=S/la;la=T/la;var Ia=b.createTexture();a(Ia);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ka,V,la,0,fa,ia,null);a(null);Na[Q]=Ia}db=!0}a(null);q[m]=-1;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ta=!0;A.qa&&aa&&(A.qa(aa),A.qa=null)}}function oa(){for(var F=S*T,Q=2*F,la=3*F,V=0;V<F;++V)xa[0][V]=Ua[V],xa[1][V]=Ua[V+F],xa[2][V]=Ua[V+
Q],xa[3][V]=Ua[V+la]}function ta(){var F=S*T*4;Ca=[new Uint8Array(F),new Uint8Array(F),new Uint8Array(F),new Uint8Array(F)];xa=[new Float32Array(Ca[0].buffer),new Float32Array(Ca[1].buffer),new Float32Array(Ca[2].buffer),new Float32Array(Ca[3].buffer)];eb=new Uint8Array(4*F);Ua=new Float32Array(eb.buffer);Va=!0}function Ba(){I=new Uint8Array(S*T*4);Ob=new Float32Array(I.buffer);xb=!0}var A=Object.assign({},J,g),Wa=l++;null===A.isFlipY&&(A.isFlipY=A.url?!0:!1);A.data&&(A.array="string"===typeof A.data?
Xb(A.data):A.isFloat?new Float32Array(A.data):new Uint8Array(A.data),A.isFlipY=!1);var wb=0,Pb=A.K?!0:!1,Xa=null,yb=null,Qb=!1;A.O=A.O||A.isFloat;A.O&&(wb=1);!A.df&&A.isFloat&&D&&!Z.Kc()&&(A.isFloat=!1);A.isFloat&&(wb=2);A.isAnisotropicFiltering&&C&&!JEContext.gh()&&(A.isAnisotropicFiltering=!1);var ua=A.ld||b.createTexture(),Ea=null,va=!1,S=0,T=0,Ta=!1,Nb=!1,Va=!1,xa=null,Ca=null,eb=null,Ua=null,ka=null,fa=null,ia=null,ya=A.isFlipY,hc=(g=A.O&&A.isMipmap)&&Aa.le(),Ha=g&&!hc?!0:!1,Na=null,cb=-1,Rb=
-1,db=!1;var xb=!1;var Ob=I=null;A.width&&(S=A.width,T=A.height?A.height:S);var aa={get:function(){return ua},v:function(){return S},U:function(){return T},$g:function(){return A.url},hh:function(){return A.isFloat},jh:function(){return A.O},kh:function(){return A.isLinear},Qb:function(){b.generateMipmap(b.TEXTURE_2D)},je:function(F,Q){Ha?(F||(F=aa.hd()),n.Eb(Q),a(Na[F]),q[Q]=-1):aa.g(Q)},hd:function(){-1===cb&&(cb=Math.log(S)/Math.log(2));return cb},Ge:function(F){F||(F=aa.hd());if(Ha){t.set("s12");
n.Eb(0);for(var Q=S,la=T,V=1;V<=F;++V)Q/=2,la/=2,t.I("u10",.25/Q,.25/la),b.viewport(0,0,Q,la),a(Na[V-1]),b.framebufferTexture2D(ma.kb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Na[V],0),na.j(!1,1===V);q[0]=-1}else F!==Rb&&(Rb=F,b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,F)),aa.Qb()},Bh:function(F){(Pb=!fc.Of(F))?(va=null,A.K=F,O()):va=F},g:function(F){if(!Ta)return!1;n.Eb(F);if(q[F]===Wa)return!1;a(ua);q[F]=Wa;return!0},Xa:function(F){b.activeTexture(p[F]);m=F;a(ua);q[F]=Wa},o:function(){G=
aa;b.framebufferTexture2D(ma.kb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ua,0)},D:function(){G=aa;b.viewport(0,0,S,T);b.framebufferTexture2D(ma.kb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ua,0)},zc:n.zc,Df:function(F,Q){S=F;T=Q},resize:function(F,Q){aa.Df(F,Q);Y()},clone:function(F){F=n.instance({width:S,height:T,O:A.O,isFloat:A.isFloat,isLinear:A.isLinear,isMirrorY:A.isMirrorY,isFlipY:F?!ya:ya,isPot:A.isPot});wa.set("s0");ma.T();F.o();b.viewport(0,0,S,T);aa.g(0);na.j(!0,!0);return F},Lf:function(){b.viewport(0,
0,S,T)},remove:function(){b.deleteTexture(ua);Nb=!0;f.splice(f.indexOf(aa),1);aa=null},refresh:function(){aa.Xa(0);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Pb?b.texImage2D(b.TEXTURE_2D,0,ka,fa,ia,A.K):b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,va);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Kd:function(){Va||ta();b.readPixels(0,0,S,4*T,b.RGBA,b.UNSIGNED_BYTE,eb);oa();return xa},vf:function(){Va||ta();return Z.pc(0,0,S,4*T,eb).then(function(){oa();return xa})},xf:function(){xb||Ba();b.readPixels(0,
0,S,T,b.RGBA,b.UNSIGNED_BYTE,I);return Ob},wf:function(){xb||Ba();return Z.pc(0,0,S,T,I)},Tc:function(F){ma.N();t.set("s13");aa.g(0);if(F)b.viewport(0,0,S,T),t.Kf("u11",.25,.25,.25,.25),na.j(!1,!0);else for(F=0;4>F;++F)b.viewport(0,T*F,S,T),t.Qd("u11",v[F]),na.j(!1,0===F)},Ac:function(F){var Q=ia===z[0]&&!r();a(ua);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Q?(Qb||(Xa=document.createElement("canvas"),Xa.width=S,Xa.height=T,yb=Xa.getContext("2d"),yb.createImageData(S,T),Qb=!0),null.data.set(F),yb.putImageData(null,
0,0),b.texImage2D(b.TEXTURE_2D,0,ka,fa,ia,Xa)):b.texImage2D(b.TEXTURE_2D,0,ka,S,T,0,fa,ia,F);q[m]=Wa;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ph:function(F,Q){a(ua);Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ka,fa,ia,F);q[m]=Wa;Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ah:function(F,Q){var la=S*T,V=4*la;F=A.O?F?"RGBE":"JSON":"RGBA";Q&&(F=Q);Q=Z.ka()&&!1;var Ia=null;switch(F){case "RGBE":Ia="s44";break;case "JSON":Ia=Q?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ia=
"s7"}Va||("RGBA"===F||"RGBE"===F||"RGBAARRAY"===F?(Ca=new Uint8Array(V),Va=!0):"JSON"!==F||Q||ta());ma.N();t.set(Ia);aa.g(0);V=null;if("RGBA"===F||"RGBE"===F||"RGBAARRAY"===F){b.viewport(0,0,S,T);na.j(!0,!0);b.readPixels(0,0,S,T,b.RGBA,b.UNSIGNED_BYTE,Ca);if("RGBAARRAY"===F)return{data:Ca};K||(h=document.createElement("canvas"),L=h.getContext("2d"),K=!0);h.width=S;h.height=T;la=L.createImageData(S,T);la.data.set(Ca);L.putImageData(la,0,0);V=h.toDataURL("image/png")}else if("JSON"===F)if(Q)V=new Float32Array(la),
b.viewport(0,0,S,T),na.j(!0,!0),b.readPixels(0,0,S,T,b.RGBA,b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,T*V,S,T),t.Qd("u11",v[V]),na.j(!V,!V);aa.Kd();V=Array(la);for(Q=0;Q<la;++Q)V[4*Q]=xa[0][Q],V[4*Q+1]=xa[1][Q],V[4*Q+2]=xa[2][Q],V[4*Q+3]=xa[3][Q]}return{format:F,data:V,width:S,height:T,isMirrorY:A.isMirrorY,isFlipY:"RGBA"===F?A.isFlipY:!A.isFlipY}}};A.isMipmap&&!Ha&&Ta&&!db&&(aa.Qb(),db=!0);if(A.url)a(ua),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ea=new Image,Ea.kg=
"Anonymous",Ea.crossOrigin="Anonymous",Ea.src=A.url,Ea.onload=function(){S=Ea.width;T=Ea.height;Y()};else if(A.K){var Sb=function(){O();S?Y():setTimeout(Sb,1)};Sb()}else A.array?(A.O&&!A.isFloat?A.array instanceof Uint16Array?(va=A.array,Y()):e()?(va=d(A.array),Y()):(Y(),n.dd(b,ua,aa.v(),aa.U(),A.array,ya,!0)):(va=A.isFloat?A.array instanceof Float32Array?A.array:new Float32Array(A.array):A.array instanceof Uint8Array?A.array:new Uint8Array(A.array),Y()),A.isKeepArray||(va&&va!==A.array&&(va=null),
delete A.array)):A.ld?Ta=!0:Y();aa.Wg=aa.v;A.qa&&Ta&&(A.qa(aa),A.qa=null);f.push(aa);return aa},N:function(g){g!==m&&(b.activeTexture(p[g]),m=g);q[g]=-1;a(null)},$f:function(g){w.random.g(g)},zc:function(){G=null;b.framebufferTexture2D(ma.kb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==m&&b.activeTexture(p[0]);for(var g=0;g<p.length;++g)q[g]=-1;m=-1},xh:function(){m=-1},Qf:function(){for(var g=0;g<p.length;++g)n.N(g)},ed:function(){w&&(w.random.remove(),w.Wd.remove())},Oh:function(g,
I){if("RGBA"===g.format||"RGBE"===g.format){var O=new Image;O.src=g.data;O.onload=function(){n.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,K:O,qa:function(P){if("RGBA"===g.format)I(P);else{var Y=g.width,oa=g.height,ta=n.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:Y,height:oa,isFlipY:g.isFlipY});ma.T();b.viewport(0,0,Y,oa);t.set("s45");ta.o();P.g(0);na.j(!0,!0);n.N(0);I(ta);Z.flush();setTimeout(P.remove,50)}}})}}else"JSON"===g.format?I(n.instance({isFloat:!0,isFlipY:g.isFlipY,
width:g.width,height:g.height,array:new Float32Array(g.data)})):I(!1)},se:d,u:function(){G&&(ra.T(),n.zc(),ra.N());n.Qf();f.slice(0).forEach(function(g){g.remove()});f.splice(0);B=!1;l=0;"undefined"!==typeof Aa&&Aa.u();w=null}};return n}(),ac=function(){return{instance:function(a){var c=[za.instance(a),za.instance(a)],d=[c[1],c[0]],e=d,r={Bf:function(k){e[1].o();e[0].g(k);r.Sd()},Cf:function(k){e[1].D();e[0].g(k);r.Sd()},Sd:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},
g:function(k){e[0].g(k)},Xa:function(k){e[0].Xa(k)},Zf:function(k){e[1].g(k)},Qg:function(){return e[0]},Ug:function(){return e[1]},Ac:function(k){e[0].Ac(k);e[1].Ac(k)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){r.Cf(0);t.set("s0");N.j(!1,!1)}};return r}}}(),na=function(){function a(l){var q={ca:null,indices:null};q.ca=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,q.ca);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);q.indices=l.createBuffer();
l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,q.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),l.STATIC_DRAW);return q}var c=null,d=0,e=!1,r=[],k=-2,m=-2,p={reset:function(){m=k=-2},A:function(){e||(c=a(b),p.La(),e=!0)},instance:function(l){var q=d++,w=l.indices?l.indices.length:0,G="undefined"===typeof l.mode?b.STATIC_DRAW:l.mode,z=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,z);b.bufferData(b.ARRAY_BUFFER,l.ca instanceof Float32Array?l.ca:new Float32Array(l.ca),G);k=q;var H=null,y=
null,B=null;if(l.indices){H=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,H);var f=null;65536>l.indices.length?(f=Uint16Array,y=b.UNSIGNED_SHORT,B=2):(f=Uint32Array,y=b.UNSIGNED_INT,B=4);f=l.indices instanceof f?l.indices:new f(l.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,G);m=q}var J={ke:function(K){k!==q&&(b.bindBuffer(b.ARRAY_BUFFER,z),k=q);K&&wa.tc()},he:function(){m!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,H),m=q)},bind:function(K){J.ke(K);J.he()},Be:function(){b.drawElements(b.TRIANGLES,
w,y,0)},og:function(K,h){b.drawElements(b.TRIANGLES,K,y,h*B)},remove:function(){b.deleteBuffer(z);l.indices&&b.deleteBuffer(H);J=null}};r.push(J);return J},La:function(){-1!==k&&(b.bindBuffer(b.ARRAY_BUFFER,c.ca),k=-1);-1!==m&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),m=-1)},j:function(l,q){l&&na.La();q&&wa.Ga();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},hb:function(l){l=l||b;var q=a(l);l.bindBuffer(l.ARRAY_BUFFER,q.ca);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,q.indices);wa.yb(l);l.clear(l.COLOR_BUFFER_BIT);
l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(q.ca);l.deleteBuffer(q.indices);p.reset();e&&(p.La(),wa.Ga())},ed:function(){var l=b,q=c;l.deleteBuffer(q.ca);l.deleteBuffer(q.indices)},u:function(){p.ed();r.forEach(function(l){l.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);p.reset();e=!1;r.splice(0);d=0}};return p}(),ma=function(){var a=null,c=null,d=null,
e=!1,r=[],k={L:-2,cd:1},m={pb:function(){return e},A:function(){if(!e){a=b.createFramebuffer();var p=Z.ka();c=p&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=p&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Ng:function(){return c},Pe:function(){return d},kb:function(){return b.FRAMEBUFFER},Vg:function(){return k},Fg:function(){return a},instance:function(p){void 0===p.rd&&(p.rd=!1);var l=p.P?p.P:null,q=p.width,w=void 0!==p.height?p.height:p.width,G=a,z=null,H=!1,y=!1,B=0;l&&
(q=q?q:l.v(),w=w?w:l.U());var f={Od:function(){H||(G=b.createFramebuffer(),H=!0,B=k.cd++)},de:function(){f.Od();f.o();z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,q,w);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,z);b.clearDepth(1)},bind:function(J,K){B!==k.L&&(b.bindFramebuffer(c,G),k.L=B);l&&l.o();K&&b.viewport(0,0,q,w);J&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Yf:function(){B!==k.L&&(b.bindFramebuffer(c,
G),k.L=B)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},gg:function(){b.clear(b.COLOR_BUFFER_BIT)},hg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Lf:function(){b.viewport(0,0,q,w)},o:function(){B!==k.L&&(b.bindFramebuffer(c,G),k.L=B)},rtt:function(J){l=J;k.L!==B&&(b.bindFramebuffer(b.FRAMEBUFFER,G),k.L=B);J.o()},N:function(){b.bindFramebuffer(c,null);k.L=-1},resize:function(J,K){q=J;w=K;z&&(b.bindRenderbuffer(b.RENDERBUFFER,z),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,
q,w))},remove:function(){G===a||y||(b.bindFramebuffer(c,G),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),z&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(G),z&&b.deleteRenderbuffer(z));y=!0}};p.rd&&f.de();r.push(f);return f},N:function(){b.bindFramebuffer(c,null);k.L=-1},Rf:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Z.Rd();k.L=-1},reset:function(){k.L=-2},T:function(){0!==
k.L&&(b.bindFramebuffer(c,a),k.L=0)},clear:function(){Z.Rd();b.clear(b.COLOR_BUFFER_BIT)},u:function(){m.N();r.forEach(function(p){p.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);m.reset();e=!1;r.splice(0);k.cd=1}};return m}(),Z=function(){function a(){p="undefined"===typeof Sa?JEContext:Sa;l=!0}function c(h,L){for(var v=0;v<h.length;++v){var C=L.getExtension(h[v]);if(C)return C}return null}function d(){null!==f.Bb&&(clearTimeout(f.Bb),f.Bb=null);f.Ba=!1}function e(h){if(0===f.sa.length){f.Y=
b.PIXEL_PACK_BUFFER;f.sa.splice(0);f.lb.splice(0);for(var L=0;L<f.Na;++L)f.sa.push(b.createBuffer()),f.lb.push(-1);f.ga=0;f.fc=0}b.bindBuffer(f.Y,f.sa[f.ga]);h.byteLength!==f.lb[f.ga]&&(b.bufferData(f.Y,h.byteLength,b.STREAM_READ),f.lb[f.ga]=h.byteLength);f.eh=!0}function r(){b.bindBuffer(f.Y,null)}function k(){f.za.forEach(function(h){b.deleteSync(h)});f.za.splice(0)}function m(){f.ga=(f.ga+1)%f.Na;++f.fc}var p=null,l=!1,q={sd:!1,uc:null,vc:null,vd:!1,gf:!1,wc:null,wd:!1,xc:null,td:!1,Gb:null,af:!1,
Hb:null,bf:!1},w=null,G={ha:!0,ja:!0,Pb:!0,Jd:!1},z=null,H=!0,y=null,B=null,f={te:1,Na:-1,ga:0,fc:0,Ba:!1,sa:[],za:[],lb:[],Y:null,Bb:null},J="undefined"===typeof window?{}:window,K={A:function(){if(l)return!0;K.reset();l||a();var h=b;if(!w.sd){w.uc=K.Zc(h);J.GL_EXT_FLOAT=w.uc;w.vd=w.uc?!0:!1;if(w.vd||K.ka())w.vc=K.$c(h),w.gf=w.vc?!0:!1,J.GL_EXT_FLOATLINEAR=w.vc;w.sd=!0}if(!w.td){w.wc=K.cb(h);w.wc&&(w.wd=!0,J.GL_EXT_HALFFLOAT=w.wc);if(w.wd||K.ka())w.xc=K.ad(h),J.GL_EXT_HALFFLOATLINEAR=w.xc;w.fh=w.xc?
!0:!1;w.td=!0}w.Gb=K.Xc(h);w.af=w.Gb?!0:!1;J.GL_EXT_COLORBUFFERFLOAT=w.Gb;w.Hb=K.Yc(h);w.bf=w.Hb?!0:!1;J.GL_EXT_COLORBUFFERHALFFLOAT=w.Hb;ma.A();za.A();if(!K.xe())return!1;na.A();za.Ye();return!0},reset:function(){w=Object.assign({},q);z=Object.assign({},G)},v:function(){l||a();return p.v()},U:function(){l||a();return p.U()},ka:function(){l||a();return p.ka()},Wc:function(h){K.Xc(h);K.Yc(h);K.Zc(h);K.$c(h);K.cb(h);K.ad(h)},Xc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),
Yc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Zc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),$c:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),cb:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),ad:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),
Rb:function(h){var L=K.cb(h);return L&&L.HALF_FLOAT_OES?L.HALF_FLOAT_OES:h.HALF_FLOAT||h.FLOAT},Me:function(){return B||b.RGBA32F||b.RGBA},Ne:function(){return y||b.RGBA16F||b.RGBA},Je:function(){return z},Kc:function(){return z.ha},cg:function(){return z.ja},bg:function(){return z.Pb},me:function(){return z.Jd&&H},Vd:function(h){H=h;!h&&f.Ba&&(k(),b.bindBuffer(f.Y,null),f.Ba=!1)},lh:function(){return f.Ba},zb:function(h,L,v){function C(){h.bindTexture(h.TEXTURE_2D,null);h.bindFramebuffer(D,null);
h.deleteTexture(u);h.deleteFramebuffer(x)}var D=h.FRAMEBUFFER,M=h.NEAREST,x=h.createFramebuffer();h.bindFramebuffer(D,x);var u=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,u);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,M);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,M);h.texImage2D(h.TEXTURE_2D,
0,L,3,3,0,h.RGBA,v,null);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,u,0);if(h.checkFramebufferStatus(h.READ_FRAMEBUFFER||h.FRAMEBUFFER)!==h.FRAMEBUFFER_COMPLETE)return C(),!1;wa.sc(h);h.clearColor(0,0,0,0);h.viewport(0,0,3,3);h.disable(h.DEPTH_TEST);h.clear(h.COLOR_BUFFER_BIT);na.hb(h);h.bindFramebuffer(D,null);wa.Sa(h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,u);na.hb(h);L=new Uint8Array(36);h.readPixels(0,0,3,3,h.RGBA,h.UNSIGNED_BYTE,L);C();for(v=0;36>v;++v)if(3!==
v%4&&3<Math.abs(L[v]-127))return!1;return!0},Jb:function(h){var L={ha:!1,ja:!1};h.disable(h.BLEND);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);h.RGBA32F&&K.zb(h,h.RGBA32F,h.FLOAT)&&(L.ha=!0,B=h.RGBA32F);!L.ha&&K.zb(h,h.RGBA,h.FLOAT)&&(L.ha=!0,B=h.RGBA);var v=K.Rb(h);y=null;h.RGBA16F&&K.zb(h,h.RGBA16F,v)&&(L.ja=!0,y=h.RGBA16F);!L.ja&&K.zb(h,h.RGBA,v)&&(L.ja=!0,y=h.RGBA);return L},ye:function(){var h=ma.instance({width:2});h.Od();var L=za.instance({width:2,isFloat:!0,tb:3});h.o();L.o();K.flush();
b.checkFramebufferStatus(ma.Pe())!==b.FRAMEBUFFER_COMPLETE?(za.Ff(),z.Pb=!1):z.Pb=!0;h.remove();L.remove()},ze:function(){var h=!1;K.ka()&&(h="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(L){return"undefined"!==typeof b[L]}));z.Jd=h},xe:function(){var h=K.Jb(b);Object.assign(z,h);if(!z.ha&&!z.ja)return!1;K.ye();K.ze();return!0},yf:function(h,L,v,C,D){b.readPixels(h,L,v,C,b.RGBA,b.UNSIGNED_BYTE,D);return Promise.resolve(D,
!1)},pc:function(h,L,v,C,D,M,x){if(!K.me())return K.yf(h,L,v,C,D);f.Na=x||f.te;e(D);b.readPixels(h,L,v,C,b.RGBA,b.UNSIGNED_BYTE,0);f.za[f.ga]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);K.flush();var u=!1;return new Promise(function(n,g){function I(){if(!f.Ba)return d(),r(),m(),g(),!1;var O=(f.ga+1)%f.Na;switch(b.clientWaitSync(f.za[O],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.za[O]),f.za[O]=null,b.bindBuffer(f.Y,f.sa[O]),b.getBufferSubData(f.Y,0,D),r(),
m(),n(D,u),!0}f.Bb=setTimeout(I,0);return!1}d();f.fc+1<f.Na?(r(),m(),n(D,!1)):(f.Ba=!0,I()||!M||u||(u=!0,M()))})},Rd:function(){b.viewport(0,0,K.v(),K.U())},flush:function(){b.flush()},u:function(){d();k();za.u();ma.u();na.u();f.sa.forEach(function(h){b.deleteBuffer(h)});f.sa.splice(0);wa.reset();l=!1}};return K}(),N=na,ra=ma,U=za,Aa=function(){function a(v,C,D,M){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,M?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var x=null;if(null!==D)try{x=f.getError();if("FUCKING_BIG_ERROR"===
x)return!1;f.texImage2D(f.TEXTURE_2D,0,v,4,4,0,f.RGBA,C,D);x=f.getError();if(x!==f.NO_ERROR)return!1}catch(u){return!1}M&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);N.hb(f);x=f.getError();if("FUCKING_BIG_ERROR"===x)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,w);x=f.getError();x===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,w),x=f.getError());if(x!==f.NO_ERROR)return!1;D=
!0;for(M=0;16>M;++M)D=D&&4>Math.abs(w[M]-127);D&&(l.Ed=C,l.pd=v);return D}function c(v,C){return J.ha&&a(v,f.FLOAT,new Float32Array(G),C)?(p=m.Gc,!0):!1}function d(v,C,D){if(!J.ja)return!1;var M=za.se(G),x=Z.cb(f);if(x&&x.HALF_FLOAT_OES&&a(v,x.HALF_FLOAT_OES,M,C)||f.HALF_FLOAT&&a(v,f.HALF_FLOAT,M,C))return p=m.Ja,!0;M=new Float32Array(G);if(a(v,f.FLOAT,M,C))return p=m.Ja,!0;f.bindTexture(f.TEXTURE_2D,D);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(l.ab,L);
za.dd(f,D,2,2,M,!1,!1);f.bindFramebuffer(l.ab,null);f.bindTexture(f.TEXTURE_2D,D);return a(v,null,null,C)?(p=m.Ja,!0):!1}function e(v,C,D){q=!0;if(d(v,!0,D)||c(C,!0))return!0;q=!1;return d(v,!1,D)||c(C,!1)?!0:!1}function r(v){if(p===m.R){f=v||b;p=m.RGBA8;q=!0;Z.Wc(f);J||(J=Z.Jb(f));ra.reset();L=f.createFramebuffer();l.ab=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(l.ab,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);t.R();K=t.Sa(f);v=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,
v);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);h=v;var C=v=f.RGBA,D=f.RGBA16F,M=f.RGBA32F;M&&(v=M);D&&(C=D);if((D||M)&&e(C,v,h))return k(),!0;v=C=f.RGBA;if(e(C,v,h))return k(),!0;p=m.RGBA8;k();return!1}}function k(){f.deleteProgram(K.ua);f.deleteTexture(h);h=K=null}for(var m={R:-1,Gc:3,Ja:2,RGBA8:0},p=m.R,l={Ed:null,pd:null,ab:null},q=!0,w=new Uint8Array(16),G=Array(64),
z=0;4>z;++z)for(var H=0;4>H;++H){var y=0===(H+z)%2?1:0,B=4*z+H;G[4*B]=y;G[4*B+1]=y;G[4*B+2]=y;G[4*B+3]=y}var f=null,J=null,K=null,h=null,L=null;return{le:function(v){r(v);return q},Jc:function(v,C){p===m.R&&(typeof("undefined"!==C)&&(J=C),r(v));return p!==m.RGBA8},ih:function(v){r(v);return p===m.Gc},hf:function(v){r(v);return p===m.Ja},Og:function(v){r(v);return l.Ed},Oe:function(v){r(v);return l.pd},u:function(){f=null;q=!0;p=m.R;J=null}}}(),Vb=function(){return{instance:function(a){var c=null,
d=!1,e=!1,r=null,k=!1,m=!1,p=null,l="undefined"===typeof a.preprocessing?!1:a.preprocessing,q="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,E&&void 0!==E.ge&&(a.mask=E.ge+a.mask),c=U.instance({isFloat:!1,url:a.mask}));var w=!1;a.customInputShader&&(w="s46",t.da({name:"_",id:w,h:a.customInputShader,Nh:["uSource"],precision:"lowp"}),t.J(w,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":p="s33";k=!0;break;case "meanNormalization":p="s34";k=!0;break;case "grayScale":p=
"s30";k=!1;break;case "grayScaleTilt":p="s31";m=!0;k=!1;break;case "rgbGrayTilt":p="s32";m=!0;k=!1;break;case "copy":p=w?w:"s0";break;case "inputLightRegulation":p=w?w:"s30";r=ic.instance({od:q,Dd:a.size,Ad:a.nBlurPass,Z:!1});e=!0;break;case "inputMix0":p="none";r=jc.instance({X:q,la:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Z:!1});e=!0;break;case "inputMix1":p="none";r=kc.instance({X:q,la:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Z:!1});e=!0;break;case "inputCut4":p="none";r=lc.instance({X:q,
la:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Qa:a.isNormalized||!1,nc:a.overlap||0,Z:!1});q*=r.Qe();e=!0;break;case "direct":case "none":p="abort";break;default:p="s4"}q=Math.ceil(q);m&&t.J(p,[{name:"u27",type:"1f",value:a.tilt}]);d&&(p+="Mask");var G=U.instance({isFloat:!1,isPot:!1,width:a.size}),z={v:function(){return a.size},Re:function(){return q},Sb:function(){return z.v()},Ue:function(){return e?r.Pa():G},W:function(H){ra.T();"abort"!==p&&("none"!==p&&(t.set(p),k&&t.F("u28",1/a.size),
G.D(),d&&c.g(1),N.j(!1,!1),G.g(0),H=G),e&&r.process(H))},u:function(){G.remove();d&&c.remove()}};return z}}}(),Wb=function(){return{instance:function(a){function c(C){r.forEach(function(D,M){k[M][0]=C[0][D];k[M][1]=C[1][D];k[M][2]=C[2][D];k[M][3]=C[3][D]});return k}a.normalize=a.normalize||!1;var d={input:null,bias:null,Vb:null,Ea:null,lc:null,jc:null,kc:null},e=null,r=[],k=[],m=!1,p=null,l=!0,q=-1,w=a.isReorganize?a.isReorganize:!1,G=a.kernelsCount?!0:!1,z=["s27","s28","s29"][a.shiftRGBAMode||0],
H={isEnabled:!1};a.ff?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.ub.Sb(),l=!1):"full"===a.connectivityUp&&(a.sparsity=a.ub.Sb());var y={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],B=a.sparsity*a.sparsity,f=!1,J=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s35";break;case 4:K="s36"}f=!0;J/=a.maxPooling.size;d.jc=U.instance({isFloat:!0,isPot:!1,width:J})}var h=-1,L=null;l&&(d.Ea=U.instance({isFloat:!0,isPot:!1,
width:a.size}));d.bias=U.instance(a.bias);var v={v:function(){return a.size},Sb:function(){return J},fd:function(){return a.classesCount},ie:function(C){e.g(C)},pf:function(){a.remap&&a.remap.isEnabled&&(H={isEnabled:!0,kf:U.instance(a.remap.maskTexture),rb:a.remap.layers.map(function(C){return a.parent.Se(C)}),depth:a.remap.depth})},Gf:function(){switch(a.connectivityUp){case "direct":L=mc.instance(a.connectivity);break;case "square":L=nc.instance(a.connectivity);break;case "squareFast":L=oc.instance(a.connectivity,
a.activation);break;case "full":L=pc.instance(a.connectivity);break;case "conv":q=a.kernelsCount,L=qc.instance(a.connectivity),w&&(d.lc=U.instance({width:J,isFloat:!0,isFlipY:!1,isPot:!1}))}if(L.Ha){var C=a.size*a.sparsity;h=Math.log(C/a.size)/Math.log(2);d.input=U.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:C,cc:h});d.Vb=U.instance({isFloat:!0,isPot:!0,width:a.size})}},W:function(C,D){e=C;L.Ha?(d.input.D(),G&&d.bias.g(2),L.W(H),d.input.g(0),d.input.Ge(h),d.Vb.D(),G?t.set("s0"):(t.set(z),t.F("u4",
B),d.bias.g(1)),d.input.je(h,0),N.j(!1,!1),t.set(y),d.Ea.o(),d.Vb.g(0),N.j(!1,!1)):(d.Ea.D(),d.bias.g(1),L.W());if(l)return D=d.Ea,f&&(d.jc.D(),D.g(0),t.set(K),t.I("u10",1/a.size,1/a.size),N.j(!1,!1),D=d.jc),w&&(d.lc.o(),t.set("s21"),t.I("u14",q,J/q),D.g(0),N.j(!1,!1),D=d.lc),D.g(0),D;var M=d.Ea;a.normalize&&(C=M,t.set("gpuRawAvg"===m?"s9":"s8"),t.F("u6",1/a.size),d.kc.D(),C.g(0),N.j(!1,!1),M=d.kc);C=null;switch(m){case "cpuRGBA2Float":M.Tc(!1);D?C=v.tf(M).then(p):(M=v.uf(M),p(M));break;case "cpuMeanFloat":M.Tc(!0);
if(D)C=M.wf().then(p);else{M=M.xf();for(var x=0;x<M.length;++x);p(M)}break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==p&&p(M)}D&&null===C&&(C=Promise.resolve());return C},ve:function(C){var D=!1;C&&(m=C.mc||"none",p=C.ic||null,D=C.Cd?!0:!1);d.Ea=U.instance({isFloat:!0,isPot:!0,isLinear:D,isMipmap:!1,width:a.size});C="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var M=D=0,x=0;D<C;++D)r.push(M+(a.size-1-x)*a.size),k.push([-1,-1,-1,-1]),++M,M===a.size&&
(M=0,++x);a.normalize&&(d.kc=U.instance({isFloat:!0,isPot:!0,width:a.size}))},tf:function(C){return C.vf().then(c)},uf:function(C){C=C.Kd();c(C);return k},u:function(){for(var C in d){var D=d[C];D&&D.remove()}L&&(L.u(),L=null)}};a.ub&&v.Gf(a.ub);return v}}}(),mc=function(){return{instance:function(a){var c=U.instance(a.weights);return{Ha:!0,jb:function(){return 1},u:function(){c.remove()},We:function(){return c},W:function(){t.set("s26");c.g(1);N.j(!1,!1)}}}}}(),pc=function(){return{instance:function(a){var c=
a.fromLayerSize,d=U.instance(a.weights);return{Ha:!0,jb:function(){return c},u:function(){d.remove()},W:function(e){if(e.isEnabled){t.set("s24");e.kf.g(3);for(var r=Math.min(e.rb.length,e.depth),k=0;k<r;++k)e.rb[k].ie(4+k)}else t.set("s23");t.F("u18",a.toLayerSize);t.F("u19",a.fromLayerSize);d.g(1);N.j(!1,!1)}}}}}(),nc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,r=e*d,k=r/c,m=c/d,p=0,l=0,q=0,w=Array(e*d*e*d*4),G=Array(e*d*e*d*4),z=Array(c*c),H=0;H<
z.length;++H)z[H]=0;H=Math.floor(e/2);for(var y=.5/d,B=.5/c,f=.5/r,J=0;J<d;++J)for(var K=Math.round(J*m),h=0;h<d;++h){var L=Math.round(h*m),v=J/d,C=h/d;v+=y;C+=y;for(var D=0;D<e;++D){var M=K+D-H;0>M&&(M+=c);M>=c&&(M-=c);for(var x=0;x<e;++x){var u=p/r,n=l/r,g=L+x-H;0>g&&(g+=c);g>=c&&(g-=c);var I=M/c,O=g/c;n=1-n-1/r;I+=B;O+=B;u+=f;n+=f;var P=J*e+D,Y=h*e+x;Y=d*e-Y-1;P=Y*d*e+P;w[4*P]=u;w[4*P+1]=n;w[4*P+2]=I;w[4*P+3]=O;O=z[g*c+M]++;P=O%k;I=M*k+P;g=g*k+(O-P)/k;g=c*k-1-g;g=g*c*k+I;G[4*g]=u;G[4*g+1]=n;G[4*
g+2]=v;G[4*g+3]=C;++p>=r&&(p=0,++l);++q}}}z=null;var oa=U.instance(a.weights);delete a.weights.data;var ta=U.instance({width:r,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var Ba=U.instance({width:r,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{Ha:!0,jb:function(){return k},u:function(){ta.remove();Ba.remove();oa.remove()},W:function(){t.set("s22");oa.g(1);Ba.g(2);N.j(!1,!1)}}}}}(),qc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/
a.fromLayerSize,r=a.inputScale||[1,1],k=U.instance(a.weights);return{Ha:!0,jb:function(){return e},Yg:function(){return d},We:function(){return k},u:function(){k.remove()},W:function(){t.set("s25");t.ba("u26",r);t.F("u24",c);t.F("u25",d);t.F("u18",a.toLayerSize);t.F("u19",a.fromLayerSize);k.g(1);N.j(!1,!1)}}}}}(),oc=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,r=a.toSparsity,k=a.stride?a.stride:1,m=r*e/d,p=e<d,l=d/e,q=U.instance(a.weights),w="s47"+[d.toString(),e.toString(),
r.toString(),k.toString(),c].join("_");t.Ee(w)||(a=gc.He(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u30",value:k}],p&&e.push({type:"1f",name:"u19",value:d}),d=[(p?m:r).toFixed(1),a],p&&d.push(l.toFixed(1)),t.Ze(p?"s41":"s40",w,d),t.J(w,e.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{Ha:!1,jb:function(){return m},u:function(){q.remove()},W:function(){t.set(w);q.g(3);N.j(!1,!1)}}}}}(),ic=function(){return{instance:function(a){var c=
a.Ad?a.Ad:3,d=a.od?a.od:64,e=a.Dd?a.Dd:64,r=a.Z?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var k=U.instance(a),m=U.instance(a),p=U.instance(a),l=U.instance(a),q=U.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),w=1/d;return{process:function(G){t.set("s37");l.o();N.j(r,!1);t.set("s38");for(var z=0;z<c;++z)k.o(),t.I("u10",w,0),N.j(r,!1),p.o(),l.g(0),N.j(r,!1),m.o(),k.g(0),t.I("u10",0,w),N.j(r,!1),l.o(),p.g(0),N.j(r,!1),z!==c-1&&m.g(0);t.set("s39");q.o();G.g(0);m.g(1);l.g(2);N.j(r,!1);q.g(0)},
Pa:function(){return q}}}}}(),jc=function(){return{instance:function(a){function c(w){return U.instance({isFloat:w,width:d.X,isPot:!1,isFlipY:!1})}var d=Object.assign({la:.1,ea:9,X:128,gain:1,Z:!1},a),e=c(!1),r=[c(!1),c(!1),c(!1)],k=[c(!1),c(!1),c(!1)],m=c(!0),p=[e,k[0],k[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ea-1)/2).toFixed(2)).replace("2.2222",(1/d.X).toFixed(6));var l="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.la.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),q={u1:0};t.Ua([{id:"s49",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",l:q,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,l:q,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:l,l:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){t.set("s49");e.D();N.j(d.Z,!1);t.set("s50");for(var w=0;3>w;++w)t.I("u31",1,0),r[w].o(),p[w].g(0),
N.j(!1,!1),t.I("u31",0,1),k[w].o(),r[w].g(0),N.j(!1,!1);t.set("s51");m.o();e.g(0);k[0].g(1);k[1].g(2);k[2].g(3);N.j(!1,!1);m.g(0)},Pa:function(){return m}}}}}(),kc=function(){return{instance:function(a){function c(q){return U.instance({isFloat:q,width:d.X,isPot:!1,isFlipY:!1})}var d=Object.assign({la:.1,ea:9,X:128,gain:1,Z:!1},a),e=c(!1),r=c(!1),k=c(!1),m=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ea-1)/2).toFixed(2)).replace("2.2222",(1/d.X).toFixed(6));var p="uniform sampler2D u0,u36;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u36,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.la.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};t.Ua([{id:"s52",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
l:l,i:["u1"],precision:"lowp"},{id:"s53",name:"_",h:a,l:l,i:["u1","u31"],precision:"lowp"},{id:"s54",name:"_",h:p,l:{u0:0,u36:1},i:["u0","u36"],precision:"highp"}]);return{process:function(){t.set("s52");e.D();N.j(d.Z,!1);t.set("s53");t.I("u31",1,0);r.o();e.g(0);N.j(!1,!1);t.I("u31",0,1);k.o();r.g(0);N.j(!1,!1);t.set("s54");m.o();e.g(0);k.g(1);N.j(!1,!1);m.g(0)},Pa:function(){return m}}}}}(),lc=function(){return{instance:function(a){function c(w){return U.instance({isFloat:w,width:d.X,isPot:!1,isFlipY:!1})}
var d=Object.assign({la:.1,ea:9,X:128,gain:1,nc:0,Qa:!1,Z:!1},a),e=c(!1),r=null,k=null,m=null;d.Qa&&(r=c(!1),k=c(!1),m=c(!0));a={u1:0};var p=[{id:"s55",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.nc.toFixed(4)),l:a,i:["u1"],precision:"lowp"}];if(d.Qa){var l="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ea-1)/2).toFixed(2)).replace("2.2222",(1/d.X).toFixed(6)),q="uniform sampler2D u0,u36;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u36,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.la.toFixed(4)).replace("2.2222",d.gain.toFixed(4));p.push({id:"s56",name:"_",h:l,l:a,i:["u1","u31"],precision:"lowp"},{id:"s57",name:"_",h:q,l:{u0:0,u36:1},i:["u0","u36"],precision:"highp"})}t.Ua(p);return{process:function(){t.set("s55");e.D();N.j(d.Z,!1);d.Qa?(t.set("s56"),t.I("u31",1,0),r.o(),e.g(0),N.j(!1,!1),t.I("u31",0,1),k.o(),r.g(0),N.j(!1,!1),t.set("s57"),m.o(),e.g(0),k.g(1),N.j(!1,!1),m.g(0)):e.g(0)},Qe:function(){return 2-d.nc},Pa:function(){return d.Qa?m:e}}}}}(),Da=function(){function a(B,
f,J,K,h,L,v){if(!H)if(v===L.length)h();else{switch(L[v]){case "A":J();break;case "D":B();break;case "S":f().then(function(C,D){y.Ud();a(B,f,J,D?null:K,h,L,++v)}).catch(function(C){console.log("An error occurred in the WebAR loop: ",C);h()});return;case "R":K&&K()}a(B,f,J,K,h,L,++v)}}var c={n:5,ec:1,zd:0,ib:[35,49],bb:[2,200],k:.7,Tf:200,mf:.05},d=-1,e=null,r=-1,k=-1,m=0,p=-1,l=-1,q=0,w=0,G=c.bb[1],z=Math.log(2),H=!0,y={Te:function(){switch(d){case -1:return-1;case 0:return l+e.zd;case 1:return q}},
Hg:function(B){return Math.pow(Math.min(Math.max(p,0),e.n-1)/(e.n-1),B||1)},A:function(B){e=Object.assign({},c,B);p=l=e.ec;d=0;y.reset()},Ud:function(B){B=("undefined"===typeof B?Date.now():B)||0;var f=Math.min(Math.max(B-w,e.bb[0]),e.bb[1]);G=f;w=B;var J=-1===r?0:e.k;r=Math.min(Math.max(1E3/f,5),120)*(1-J)+r*J;B-k>e.Tf&&5<++m&&(f=e.k,p=p*(1-f)+(r<e.ib[0]?l-1:r>e.ib[1]?l+1:l)*f,Math.abs(p-l)>1-e.mf&&(f=Math.min(Math.max(Math.round(p),0),e.n-1),f!==l&&(p=l=f,r=(e.ib[1]-e.ib[0])/2)),k=B)},Md:function(B,
f,J,K,h,L){H=!1;a(B,f,J,K,h,L,0)},stop:function(){H=!0},Pd:function(B){q=B;d=1},Sf:function(){d=0;y.reset()},reset:function(){G=c.bb[1];k=r=-1;m=0},Lh:function(B,f,J){J=Math.exp(-z*G/J);return(1-J)*B+J*f},Le:function(){return G}};return y}(),Pa=function(){function a(){d(B+H.dc);f.port.postMessage("DONE")}function c(){L.Wa=0===H.xa?K(d):K(e)}function d(x){h.Ca&&null!==y&&(x-=B,x=Math.min(Math.max(x,H.Uc[0]),H.Uc[1]),B+=x,k(),v.isEnabled&&v.Ra&&h.$&&B-v.$b>H.Ec&&(q(),v.$b=B),y(B))}function e(x){h.Ca&&
(L.timeout=setTimeout(d.bind(null,x),H.xa))}function r(){y=null;h.Ca=!1;k()}function k(){L.Wa&&(window.cancelAnimationFrame(L.Wa),L.Wa=null);L.timeout&&(window.clearTimeout(L.timeout),L.timeout=null)}function m(x){x&&!h.$?(h.$=!0,J&&Da.Sf(),f.port.postMessage("STOP"),Z.Vd(!0),c()):!x&&h.$&&(h.$=!1,J&&Da.Pd(1),Z.Vd(!1),f.port.postMessage("START"))}function p(x){x.target.hidden?D():C()}function l(x,u,n){u=x.createShader(u);x.shaderSource(u,n);x.compileShader(u);return u}function q(){v.Ra=!1;var x=v.ia,
u=v.mb,n=v.ob,g=v.Y;x.uniform1f(v.md,Math.random());v.Da?u.beginQueryEXT(g,n):x.beginQuery(g,n);x.drawElements(x.POINTS,1,x.UNSIGNED_SHORT,0);v.Da?u.endQueryEXT(g):x.endQuery(g);Z.flush();G().then(function(I){0===I||isNaN(I)?(v.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",I)):(I=H.ae*H.Dc*1E3/I,v.Cb=(v.Cb+1)%H.Ia,v.ac[v.Cb]=I,++v.yd>H.Ia&&(v.qb.set(v.ac),v.qb.sort(function(O,P){return O-P}),I=v.qb[Math.floor(H.Ia/2)],v.gb=Math.max(v.gb,
I),H.Cc(I/v.gb)),v.Ra=!0)}).catch(function(){v.Ra=!0})}function w(x){var u=v.ia,n=v.mb,g=v.ob;g=v.Da?n.Eg(g,n.QUERY_RESULT_AVAILABLE_EXT):u.getQueryParameter(g,u.QUERY_RESULT_AVAILABLE);u=u.getParameter(n.GPU_DISJOINT_EXT);g?x(!u):setTimeout(w.bind(null,x),.1)}function G(){return new Promise(function(x,u){w(function(n){if(n){n=v.ia;var g=v.mb,I=v.ob;n=v.Da?g.getQueryObjectEXT(I,g.QUERY_RESULT_EXT):n.getQueryParameter(I,n.QUERY_RESULT);x(n)}else u()})})}var z={ud:!0,Uc:[1,200],dc:20,xa:0,Dc:50,ae:240,
Ec:3E3,Ia:3,Cc:null},H=null,y=null,B=0,f=null,J=!1,K=null,h={ta:!1,$:!0,Zb:!1,Yb:!1,Xb:!1,Ca:!1},L={Wa:null,timeout:null},v={isEnabled:!1,Ra:!1,ia:null,mb:null,ob:null,Y:null,md:null,Da:!0,$b:0,yd:0,ac:null,qb:null,Cb:0,gb:0},C=m.bind(null,!0),D=m.bind(null,!1),M={A:function(x){H=Object.assign(z,x);Object.assign(h,{$:!0,ta:!0,Ca:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==H.Cc){x=document.createElement("canvas");x.setAttribute("width","1");x.setAttribute("height",
"1");var u={antialias:!1};x=x.getContext("webgl2",u)||x.getContext("webgl",u);if(u=x.getExtension("EXT_disjoint_timer_query")||x.getExtension("EXT_disjoint_timer_query_webgl2")){v.ia=x;v.mb=u;v.isEnabled=!0;v.Da=u.beginQueryEXT?!0:!1;var n=l(x,x.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),g=l(x,x.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",H.Dc.toString())),I=x.createProgram();
x.attachShader(I,n);x.attachShader(I,g);x.linkProgram(I);n=x.getAttribLocation(I,"a0");v.md=x.getUniformLocation(I,"u37");x.useProgram(I);x.enableVertexAttribArray(n);I=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,I);x.bufferData(x.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),x.STATIC_DRAW);x.vertexAttribPointer(n,4,x.FLOAT,!1,16,0);I=x.createBuffer();x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,I);x.bufferData(x.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),x.STATIC_DRAW);x.disable(x.DEPTH_TEST);x.disable(x.DITHER);
x.disable(x.STENCIL_TEST);x.viewport(0,0,1,1);I=v.Da?u.createQueryEXT():x.createQuery();v.ob=I;v.Y=u.TIME_ELAPSED_EXT||x.TIME_ELAPSED;v.$b=-H.Ec;v.ac=new Float32Array(H.Ia);v.qb=new Float32Array(H.Ia);v.gb=0;v.Cb=0;v.yd=0;v.Ra=!0}}if(H.ud){x=!1;try{if("undefined"===typeof SharedWorker){var O=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
H.dc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),P=new Worker(O);P.addEventListener("message",a);f={Fd:P,port:P};h.Zb=!0}else{var Y=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
H.dc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),oa=new SharedWorker(Y);oa.port.start();oa.port.addEventListener("message",a);f={Fd:oa,port:oa.port};h.Yb=!0}x=!0}catch(ta){}x&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",p):(window.addEventListener("blur",D),window.addEventListener("focus",C)),window.addEventListener("pagehide",
D),window.addEventListener("pageshow",C),h.Xb=!0)}J="undefined"!==typeof Da},u:function(){r();h.Xb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",p):(window.removeEventListener("blur",D),window.removeEventListener("focus",C)),window.removeEventListener("pagehide",D),window.removeEventListener("pageshow",C),h.Xb=!1);h.Yb?(f.port.close(),h.Yb=!1):h.Zb&&(f.Fd.terminate(),h.Zb=!1);Object.assign(h,{$:!0,ta:!1,Ca:!1});y=null},oh:function(){return h.$},update:function(x){Object.assign(H,
x)},Md:function(x){h.ta||M.A({});k();h.Ca=!0;y=x;h.$&&c()},stop:r};return M}(),W={kd:function(){return W.Oc()?document.createElement("video"):!1},Oa:function(a,c){a[c]=!0;a.setAttribute(c,"true")},qe:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Lc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ie:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},xd:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},pe:function(){return W.Mc()||W.Lc()},Mc:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Cg:function(){return W.qe()?W.xd()?window.innerHeight/window.innerWidth*45:45:45},Oc:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},yh:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Nc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&W.Hc(c,a.deviceId);return c},Hc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},Td:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
ue:function(a){function c(z){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(H,y){return Math.abs(H-z)-Math.abs(y-z)})}function d(z){var H=W.Nc(a);z=z(H);r.push(z);e(z)}function e(z){if(z.video&&z.video.facingMode&&z.video.facingMode.exact){var H=z.video.facingMode.exact;z=W.Nc(z);delete z.video.facingMode.exact;z.video.facingMode.ideal=H;r.push(z)}}var r=[];if(!a||!a.video)return r;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var k=
c(a.video.width.ideal).slice(0,3),m=c(a.video.height.ideal).slice(0,3),p={},l=0;for(p.oa=void 0;l<k.length;p={oa:p.oa},++l){p.oa=k[l];var q={},w=0;for(q.na=void 0;w<m.length;q={na:q.na},++w)if(q.na=m[w],p.oa!==a.video.width.ideal||q.na!==a.video.height.ideal){var G=Math.max(p.oa,q.na)/Math.min(p.oa,q.na);G<4/3-.1||G>16/9+.1||d(function(z,H){return function(y){y.video.width.ideal=z.oa;y.video.height.ideal=H.na;return y}}(p,q))}}}d(function(z){return W.Td(z)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(z){delete z.video.width.ideal;delete z.video.height.ideal;return z}),d(function(z){delete z.video.width;delete z.video.height;return z}));a.video.facingMode&&(d(function(z){delete z.video.facingMode;return z}),a.video.width&&a.video.height&&d(function(z){W.Td(z);delete z.video.facingMode;return z}));r.push({audio:a.audio,video:!0});return r},Nf:function(a){if(W.xd()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&
c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},sb:function(a){a.volume=0;W.Oa(a,"muted");if(W.Mc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;W.Oa(a,"muted")},5)}},Mh:function(a,c,d){return null===a?Promise.resolve():new Promise(function(e,r){if(a.srcObject&&a.srcObject.getVideoTracks){var k=
a.srcObject.getVideoTracks();1!==k.length?r("INVALID_TRACKNUMBER"):(k=k[0],c?W.get(a,e,r,d):(k.stop(),e()))}else r("BAD_IMPLEMENTATION")})},jd:function(a,c,d,e){function r(m){k||(k=!0,d(m))}var k=!1;return navigator.mediaDevices.getUserMedia(e).then(function(m){function p(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)r("VIDEO_NULLSIZE");else{var w={oe:null,Mf:null,lf:null};try{var G=m.getVideoTracks()[0];G&&(w.lf=G,w.oe=G.getCapabilities(),w.Mf=G.getSettings())}catch(z){}W.pe()?
a.parentNode&&null!==a.parentNode?(k||c(a,m,w),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),W.sb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";W.sb(a);setTimeout(function(){a.play();k||c(a,m,w)},100)},80)):k||c(a,m,w)}}else r("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var q=a.play();W.sb(a);"undefined"===typeof q?p():q.then(function(){p()}).catch(function(){r("VIDEO_PLAYPROMISEREJECTED")})}
"undefined"!==typeof a.srcObject?a.srcObject=m:(a.src=window.URL.createObjectURL(m),a.videoStream=m);W.sb(a);a.addEventListener("loadeddata",l,!1)}).catch(function(m){r(m)})},Ve:function(a,c){var d=c||W.kd();return new Promise(function(e,r){W.get(d,e,r,a)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!W.Oc())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video&&W.Lc()){var r=W.Ie();0!==r[0]&&(12>r[0]||12===r[0]&&2>r[1])&&W.Nf(e)}W.Oa(a,"autoplay");W.Oa(a,"playsinline");
e&&e.audio?a.volume=0:W.Oa(a,"muted");W.jd(a,c,function(){function k(p){if(0===p.length)d("INVALID_FALLBACKCONSTRAINTS");else{var l=p.shift();W.jd(a,c,function(){k(p)},l)}}var m=W.ue(e);k(m)},e)},ah:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,
!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},dg:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},rc=function(){function a(m){ra.N();t.set("s1");b.viewport(0,0,1,1);N.j(!1,!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,m);ra.T()}var c=!1,d=!1,e=null,r=null,k={A:function(){var m={u1:0};t.da({id:"s58",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u28;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y))*1.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y))*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y))*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28.y))*2.,b-=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y))*1.,b+=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28.y))*2.,b+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
i:["u1","u28"],l:m});t.da({id:"s59",name:"_",h:"uniform sampler2D u1;uniform vec2 u38;uniform float u39,u40,u41,u42;varying vec2 vv0;void main(){vec2 a=floor(vv0*u40);float d=a.x+a.y*u40,f=u40*u40;vec2 g=fract(vv0*u40),b=u41+g*(1.-2.*u41);float c=d/(f-1.),h=mix(u38.x,u38.y,c);vec2 i=b+h*vec2(1.,1./u42)*vec2(cos(u39),sin(u39));float j=texture2D(u1,i).r;gl_FragColor=vec4(j,b,c);}",i:"u1 u38 u39 u40 u41 u42".split(" "),l:m});t.da({id:"s60",name:"_",h:"uniform sampler2D u1;uniform vec2 u10,u43;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 g=vv0-u10*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,g+u10*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
i:["u1","u10","u43"],l:m});t.da({id:"s61",name:"_",h:"uniform sampler2D u1;uniform vec2 u44;uniform float u45;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u44)-u45),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",i:["u1","u44","u45"],l:m});c=!0},Jh:function(m){c||k.A();t.set("s58");t.I("u28",.5/m.v(),.5/m.U());m.g(0);N.j(!1,!1)},Be:function(m){t.set("s61");t.ba("u44",m.m);t.F("u45",m.H);N.j(!1,!1)},instance:function(m){c||k.A();var p="undefined"===typeof m.sf?
8:m.sf,l=m.width,q=m.oc,w=[Math.floor(q[0]*l),Math.ceil(q[1]*l)],G=l-2*w[1],z=m.Bd?m.Bd:8,H=Math.ceil(("undefined"===typeof m.Id?1:m.Id)*l);G=Math.min(G,2*H);var y=Math.max(w[1],l/2-H)/l,B="undefined"===typeof m.va?1:m.va,f=U.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:G*p}),J=1/z,K=Math.ceil(Math.log(f.v())/Math.log(4));m=f.v();var h=Array(K);for(l=0;l<K;++l)h[l]=U.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(m/Math.pow(4,l+1))});var L=new Uint8Array(4),v={H:-1,
m:[0,0],va:B};return{Hf:function(C){B=C},process:function(C){C.g(0);f.D();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE);b.blendColor(J,J,J,J);t.set("s59");t.ba("u38",q);t.F("u40",p);t.F("u41",y);t.F("u42",B);for(C=0;C<z;++C)t.F("u39",2*C*Math.PI/z),N.j(!1,!1);b.disable(b.BLEND);t.set("s60");f.g(0);C=f.v();for(var D=0;D<K;++D){h[D].D();var M=h[D].v();t.I("u43",M,M);t.I("u10",1/C,1/C);N.j(!1,!1);h[D].g(0);C=M}a(L);v.m[0]=L[1]/255;v.m[1]=L[2]/
255;v.H=q[0]+(q[1]-q[0])*L[3]/255;v.va=B;return v}}},Xe:function(){e=U.instance({width:256,height:1,isFloat:!0});r=U.instance({width:1,isFloat:!1});var m={u1:0};t.da({id:"s62",name:"_",h:"uniform sampler2D u1;uniform vec2 u38,u44;varying vec2 vv0;void main(){float f=mix(u38.x,u38.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=f*vec2(cos(a),sin(a)),b+=texture2D(u1,u44+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",i:["u1","u38"],l:m});t.da({id:"s63",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
i:["u1"],l:m});d=!0},dh:function(m){d||k.Xe();var p="undefined"===typeof m.m?[0,0]:m.m,l="undefined"===typeof m.oc?[0,0]:m.oc,q=new Uint8Array(4),w={m:p,H:0};return{set:function(G,z){p[0]=G[0];p[1]=G[1];l[0]=z[0];l[1]=z[1]},process:function(G){t.set("s62");t.ba("u38",l);t.ba("u44",p);e.D();G.g(0);N.j(!1,!1);t.set("s63");r.D();N.j(!1,!1);r.g(0);a(q);w.H=l[0]+(l[1]-l[0])*q[0]/255;return w}}}};return k}(),E={neuralNetworkPath:"jeelizPupillometryNNC.json",xa:0,Db:[2,5],
be:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,yc:[.1,.1,.25],Pf:60,minScaleTracked:.6,maxScaleTracked:20,ce:.7,$d:1,Qc:[.0015,.005],Hd:[.003,.02],Gd:[.9,.98],Fa:[.49,.42,.17],Ic:[.3,1],ee:.2,fe:2,Sc:.5,Rc:.03,bd:[.9,.57],fb:[.22,.22],Ce:.5,Ob:256,eb:[0,0],Fe:3,Yd:[.21,.24],Xd:40,Zd:.4,ra:128,Wb:1,$e:.005,wb:[.07,.65],qf:.15,rf:.025,Vf:20},Ga={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},Jb=E.rf,rb=E.$e,
Ib=-1,ba={Aa:!1,G:[Bb(),Bb()]},pa={jf:-1,error:-2,nd:0,play:1,pause:2},qa=pa.nd,X={element:!1,P:!1,Ta:!1,$a:[0,0],S:[.5,.5],vb:0},ca={Ma:!1,Fb:!1,Fc:"./",fa:!1,Va:E.xa,qd:!0},$a=null;var Ra=Ka=Ja=fb=Ya=Oa=mb=lb=kb=jb=ib=hb=gb=0;var ea=-1,ja=-1,La=null,pb=null,Qa=null,Za=null,da=null,R=null,ha=null,Eb=!1,tb=null,ab=new Float32Array(12),Yb=0,sb=null,Tb={init:function(a){function c(){qa!==pa.error&&2===++d&&(Mb(),X.P=U.instance({K:X.element,isPot:!1,isFloat:!1,isFlipY:!0,isLinear:!0}),ub(),ca.Ma&&(ca.Ma(!1,
{GL:b,canvasElement:ca.fa,videoTexture:X.Ta.get()}),b.disable(b.BLEND)),Cb())}if(qa!==pa.nd)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;qa=pa.jf;a.callbackReady&&(ca.Ma=a.callbackReady);a.callbackTrack&&(ca.Fb=a.callbackTrack);"undefined"!==typeof a.animateDelay&&(ca.Va=a.animateDelay);Pa.A({ud:a.isKeepRunningOnWinFocusLost||!1,xa:ca.Va});Da.A({ec:0,n:E.Db[1]-E.Db[0]+1,zd:E.Db[0]});ca.qd="undefined"===typeof a.isAdaptative?!0:a.isAdaptative;ca.qd||Da.Pd(E.be);"undefined"!==typeof a.NNCPath&&
(ca.Fc=a.NNCPath);if(!a.canvasId)return Ma("NO_CANVASID"),!1;ca.fa=document.getElementById(a.canvasId);if(!ca.fa)return Ma("INVALID_CANVASID"),!1;ea=ca.fa.width;ja=ca.fa.height;if(!ea||!ja)return Ma("INVALID_CANVASDIMENSIONS"),!1;var d=0;ec(a.onWebcamAsk,a.onWebcamGet,function(e){if(qa!==pa.error){var r=e.videoHeight;X.$a[0]=e.videoWidth;X.$a[1]=r;X.element=e;c&&c()}});bc(function(e){if(!cc())return!1;$a=new Ub({rb:e.layers,mc:"gpuRawAvg",ic:dc});t.Ua([{id:"s72",name:"_",ma:"attribute vec2 a0;uniform vec2 u52;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u52*a0;}",
ya:["a0"],pa:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u52"],precision:"lowp"},{id:"s73",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ma:"attribute vec2 a0;uniform sampler2D u54;uniform vec2 u55;varying vec2 vv0;void main(){vec4 a=texture2D(u54,vec2(.17,.5));vec2 b=a.gb,c=a.a*u55;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",ya:["a0"],pa:[2],i:["u1","u54","u55"],precision:"lowp"},{id:"s74",name:"_",
h:"uniform sampler2D u56,u54;uniform vec3 u57,u58;uniform float u59,u60,u61,u62,u63;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u56,vec2(.5,.5)),d=texture2D(u56,vec2(.75,.5));float f=dot(e,texture2D(u56,vec2(.75,.75))),g=dot(e,texture2D(u56,vec2(0.,.5))),h=dot(e,texture2D(u56,vec2(.25,.5)));vec4 a=texture2D(u54,vec2(.25,.5));float b=dot(c,e),i=dot(d,e);bool j=b>u62&&b>i+u63;j?a.r=2.:a.r>u61?a.r=0.:a.r>1.9&&(a.a>u60||a.a<u59)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u57);else a.r*=step(1.9,a.r),a.gba+=vec3(f,g,h)*u58*a.a;gl_FragColor=a;}",
ma:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u56 u54 u57 u59 u60 u61 u58 u62 u63".split(" ")},{id:"s75",name:"_",ma:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u56;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u56,vec2(0.,.75))),b=dot(e,texture2D(u56,vec2(.25,.75))),c=dot(e,texture2D(u56,vec2(.5,.75))),d=dot(e,texture2D(u56,vec2(.5,.5)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u56"]},{id:"s64",name:"_",h:"uniform sampler2D u54;uniform float u64;varying vec2 vv0;void main(){float f=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u54,vec2(vv0.x,.5));a.a=mix(a.a*u64,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u54","u64"]},{id:"s65",name:"_",h:"uniform sampler2D u54,u65;uniform vec2 u55;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u54,vec2(.25,.5));vec2 b=d.gb;float h=d.a;vec2 c=h*u55,i=b+c/2.,j=b-c/2.,f=step(j,a)*step(a,i);vec3 k=texture2D(u65,a).rgb;vec2 g=2.*abs(b-a)/c;float l=f.x*f.y*pow(max(g.x,g.y),3.);vec3 m=mix(k,vec3(0.,.6,1.),l);gl_FragColor=vec4(m,1.);}",
i:["u54","u65","u55"]},{id:"s66",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u28;uniform float u46;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u28.x,vv0.y-u28.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u28.x,vv0.y-u28.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u28.x,vv0.y+u28.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u28.x,vv0.y+u28.y)).rgb*1.;vec3 e=a*a+b*b,g=texture2D(u1,vv0).rgb;float c=dot(e,f),h=dot(g,f);c=smoothstep(u46-.1,u46+.1,c),gl_FragColor=vec4(c,h,0.,1.);}",
ma:"attribute vec2 a0;uniform vec2 u6,u44;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u44+u6*a0,vv0=.5*vv0+vec2(.5,.5);}",ya:["a0"],pa:[2],i:["u1","u6","u44","u28","u46"]},{id:"s67",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ma:"attribute vec2 a0;uniform vec2 u6,u44;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u44+u6*a0,vv0=.5*vv0+vec2(.5,.5);}",ya:["a0"],pa:[2],i:["u1","u6","u44"]},{id:"s68",name:"_",h:"uniform sampler2D u1;uniform vec2 u48,u38;uniform float u47;varying vec2 vv0;const float n=3.141592;const int o=4;int j(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u47));}void main(){vec2 c=u48.x*vec2(1.,1.)+vv0*u48.y;vec3 k=texture2D(u1,c).rgb;float d=0.,e,f;int a;vec2 l,g,b;for(float h=0.;h<60.;h+=1.){e=0.,a=o,f=h*n/60.,l=vec2(cos(f),sin(f));for(float i=0.;i<255.;i+=1.){g=(u38.x/2.+i/255.*(u38.y-u38.x)/2.)*l;if(a>0)b=c+g,a-=1-j(b,k),b=c-g,a-=1-j(b,k),e+=1.;}d=max(e,d);}gl_FragColor=vec4(d/255.,0,0,1.);}",
i:["u1","u48","u38","u47"]},{id:"s69",name:"_",h:"uniform sampler2D u1;uniform vec2 u44;uniform float u49,u50;const vec3 f=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u50);float d=distance(vv0*b,u44*b),g=step(abs(d-u49),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,f,g),gl_FragColor=vec4(a,1.);}",i:["u1","u44","u49","u50"]},{id:"s70",name:"_",h:"uniform sampler2D u1;uniform vec2 u44;uniform float u51;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u44)-u51),2e-3),c=step(distance(vv0,u44),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
i:["u1","u44","u51"]},{id:"s71",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",i:["u1"]}]);$b();sb=rc.instance({width:E.Ob,oc:E.Yd,Bd:E.Xd,Id:E.Zd});Lb();Kb();c();Tb.update_controls()});return!0},toggle_pause:function(a){if(-1!==[pa.play,pa.pause].indexOf(qa))return a?qa!==pa.play?a=!1:(Pa.stop(),qa=pa.pause,a=!0):a=Cb(),a},set_animateDelay:function(a){ca.Va=a;Pa.update({xa:ca.Va})},resize:function(){var a=ca.fa.width,c=ca.fa.height;
if(a===ea&&c===ja)return!1;ea=a;ja=c;Lb();Kb();Mb();ub();return!0},update_controls:function(){function a(d){return(d=document.getElementById(d))?parseFloat(d.value):!1}var c=a("jeePupilControlIrisEdgeSize");!1!==c&&(rb=c,ub());c=a("jeePupilControlIrisThres");!1!==c&&(Ib=c);c=a("jeePupilControlIrisRoundness");!1!==c&&sb.Hf(c);c=a("jeePupilControlPupilSensitivity");!1!==c&&(Jb=c)}};return Tb}();
;return JEELIZPUPILLOMETRY||window.JEELIZPUPILLOMETRY;})();