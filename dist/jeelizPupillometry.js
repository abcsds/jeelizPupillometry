 /**
 * Jeeliz Pupillometry - https://github.com/jeeliz/jeelizPupillometry
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEPUPILAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
function da(b,e,d){return b*(1-d)+e*d}function ea(b,e){var d=new XMLHttpRequest;d.open("GET",b,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||e(d.responseText)};d.send()}function xa(b,e){if(0===e||"object"!==typeof b)return b;b=Object.assign({},b);e=void 0===e||-1===e?-1:e-1;for(var d in b)b[d]=xa(b[d],e);return b}function ya(b,e,d){return Math.min(Math.max((d-b)/(e-b),0),1)}
function Ba(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ga(b,e){var d=e%8;return b[(e-d)/8]>>7-d&1}
function Ha(b){var e=JSON.parse(b);b=e.ne;var d=e.nf,l=e.n;var w="undefined"===typeof btoa?Buffer.from(e.data,"base64").toString("latin1"):atob(e.data);var u=w.length;e=new Uint8Array(u);for(var g=0;g<u;++g)e[g]=w.charCodeAt(g);w=new Float32Array(l);u=new Float32Array(d);g=b+d+1;for(var q=0;q<l;++q){for(var c=g*q,y=0===Ga(e,c)?1:-1,B=c+1,m=1,k=0,C=B+b-1;C>=B;--C)k+=m*Ga(e,C),m*=2;B=k;c=c+1+b;m=u.length;k=0;for(C=c;C<c+m;++C)u[k]=Ga(e,C),++k;for(m=c=0;m<d;++m)c+=u[m]*Math.pow(2,-m-1);w[q]=0===c&&0===
B?0:y*(1+c)*Math.pow(2,1+B-Math.pow(2,b-1))}return w}
var x=function(){function b(v,t,F){t=v.createShader(t);v.shaderSource(t,F);v.compileShader(t);return v.getShaderParameter(t,v.COMPILE_STATUS)?t:!1}function e(v,t,F){t=b(v,v.VERTEX_SHADER,t);F=b(v,v.FRAGMENT_SHADER,F);v===a&&g.push(t,F);var M=v.createProgram();v.attachShader(M,t);v.attachShader(M,F);v.linkProgram(M);return M}function d(v,t){t.G=t.G?!0:!1;if(!t.G){void 0===t.fa&&(t.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
t.pa&&(t.pa=["a0"]);void 0===t.ia&&(t.ia=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=m;t.id=y++;void 0!==t.fd&&(t.fd.forEach(function(M,U){t.h=t.h.replace(M,t.cb[U])}),t.fd.splice(0));t.dc=0;t.ia.forEach(function(M){t.dc+=4*M});t.la=e(v,t.fa,"precision "+t.precision+" float;\n"+t.h);t.B={};t.i.forEach(function(M){t.B[M]=v.getUniformLocation(t.la,M)});t.attributes={};t.xa=[];t.pa.forEach(function(M){var U=v.getAttribLocation(t.la,M);t.attributes[M]=U;t.xa.push(U)});if(t.l){v.useProgram(t.la);
c=t;q=t.id;for(var F in t.l)v.uniform1i(t.B[F],t.l[F])}t.ta=!0}}function l(v){Ia.Ke(K);q!==v.id&&(K.V(),q=v.id,c=v,a.useProgram(v.la),v.xa.forEach(function(t){0!==t&&a.enableVertexAttribArray(t)}))}function w(v,t,F){d(v,t,F);v.useProgram(t.la);v.enableVertexAttribArray(0);q=-1;return c=t}function u(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],l:{u1:0}}}var g=[],q=-1,c=null,y=0,B=!1,m="highp",k=["u1"],C=["u0"],A={u1:0},f={u0:0},p={u1:0,u2:1},
I={u3:0},N={s0:u(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:k,l:A,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],l:p},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:k,l:A},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],l:p},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:k,l:A},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:k,l:A},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],l:f},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],l:f},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:k,l:A},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],l:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],l:A},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],l:A},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:C,l:f,G:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:C,l:f},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:C,l:f},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:C,l:f},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],l:{u0:0,u6:1,u9:2},G:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:C,l:f},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:C,l:f,G:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],l:{u0:0,u10:1},G:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],l:A},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],l:{u14:0,u13:1,u15:2},G:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],l:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),l:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},G:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
l:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],l:{u14:0,u13:1},G:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],l:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:k,l:A,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],l:A,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],l:A,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],l:p,G:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],l:p,G:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],l:I},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],l:I,G:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],l:A,precision:"lowp",G:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],l:A,precision:"lowp",
G:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],l:{u1:0,u10:1,u28:2},G:!0}},L={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],cb:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),cb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},T=null,G=null,K={Wa:function(){return B},A:function(){if(!B){T=xa(N,2);G=xa(L,2);m="highp";for(var v in T)d(a,T[v],v);x.set("s0");a.enableVertexAttribArray(0);B=!0}},ic:function(v){v.forEach(function(t){K.$(t)})},$:function(v){T[v.id]=v;d(a,v,v.id)},Jc:function(v,t,F){t||(t=v);T[t]=Object.create(G[v]);T[t].he=!0;G[v].cb&&G[v].cb.forEach(function(M,U){T[t].h=T[t].h.replace(new RegExp(M,"g"),F[U])});d(a,T[t],t)},
set:function(v){v=T[v];v.G&&(v.G=!1,d(a,v,v.id));l(v)},Ba:function(v){return w(v,u(),"s40")},Vb:function(v){return w(v,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Od:function(v){return"undefined"===typeof T[v]?!1:T[v].ta},V:function(){-1!==q&&(q=-1,c.xa.forEach(function(v){0!==v&&a.disableVertexAttribArray(v)}))},Xb:function(){var v=0;c.xa.forEach(function(t,F){F=c.ia[F];a.vertexAttribPointer(t,F,a.FLOAT,!1,c.dc,v);v+=4*F})},Nd:function(){a.enableVertexAttribArray(0)},
Ca:function(){K.eb(a)},eb:function(v){v.vertexAttribPointer(c.xa[0],2,v.FLOAT,!1,8,0)},Mf:function(v,t){a.uniform1i(c.B[v],t)},C:function(v,t){a.uniform1f(c.B[v],t)},M:function(v,t,F){a.uniform2f(c.B[v],t,F)},ea:function(v,t){a.uniform2fv(c.B[v],t)},Nf:function(v,t){a.uniform3fv(c.B[v],t)},Le:function(v,t,F,M){a.uniform3f(c.B[v],t,F,M)},Of:function(v,t,F,M,U){a.uniform4f(c.B[v],t,F,M,U)},Wb:function(v,t){a.uniform4fv(c.B[v],t)},Pf:function(v,t){a.uniformMatrix2fv(c.B[v],!1,t)},Qf:function(v,t){a.uniformMatrix3fv(c.B[v],
!1,t)},Rf:function(v,t){a.uniformMatrix4fv(c.B[v],!1,t)},I:function(v,t){K.set(v);t.forEach(function(F){switch(F.type){case "4f":a.uniform4fv(c.B[F.name],F.value);break;case "3f":a.uniform3fv(c.B[F.name],F.value);break;case "2f":a.uniform2fv(c.B[F.name],F.value);break;case "1f":a.uniform1f(c.B[F.name],F.value);break;case "1i":a.uniform1i(c.B[F.name],F.value);break;case "mat2":a.uniformMatrix2fv(c.B[F.name],!1,F.value);break;case "mat3":a.uniformMatrix3fv(c.B[F.name],!1,F.value);break;case "mat4":a.uniformMatrix4fv(c.B[F.name],
!1,F.value)}})},sf:function(){return"lowp"},o:function(){a.disableVertexAttribArray(0);K.V();for(var v in T){var t=T[v];t.ta&&(t.ta=!1,a.deleteProgram(t.la));t.he&&delete T[v]}g.forEach(function(F){a.deleteShader(F)});g.splice(0);y=0;B=!1;c=null;q=-1}};return K}(),a=null,Ma=function(){function b(m){console.log("ERROR in ContextFF: ",m);return!1}function e(m){function k(){Ja.o();Ka.reset();A.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var C=document.createElement("canvas");C.setAttribute("width",5);C.setAttribute("height",5);var A=null;try{A=C.getContext("webgl2",m)}catch(f){return!1}if(!A)return!1;d(A);Ka.tc(A);m=Ka.pb(A);if(!m.ba&&!m.ca)return k(),!1;m=Ja.mc(A,m);k();return m?!0:!1}function d(m){m.clearColor(0,0,0,0);m.disable(m.DEPTH_TEST);m.disable(m.BLEND);m.disable(m.DITHER);m.disable(m.STENCIL_TEST);m.disable(m.CULL_FACE);m.GENERATE_MIPMAP_HINT&&m.hint(m.GENERATE_MIPMAP_HINT,m.FASTEST);m.disable(m.SAMPLE_ALPHA_TO_COVERAGE);
m.disable(m.SAMPLE_COVERAGE);m.depthFunc(m.LEQUAL);m.clearDepth(1)}var l=null,w=null,u=null,g=null,q=!0,c=null,y=null,B={u:function(){return l.width},P:function(){return l.height},hf:function(){return l},ff:function(){return a},da:function(){return q},flush:function(){a.flush()},Sd:function(){c||(c=new Uint8Array(l.width*l.height*4));a.readPixels(0,0,l.width,l.height,a.RGBA,a.UNSIGNED_BYTE,c);return c},kf:function(){return l.toDataURL("image/jpeg")},lf:function(){La.O();w||(w=document.createElement("canvas"),
u=w.getContext("2d"));w.width=l.width;w.height=l.height;for(var m=B.Sd(),k=u.createImageData(w.width,w.height),C=w.width,A=w.height,f=k.data,p=0;p<A;++p)for(var I=A-p-1,N=0;N<C;++N){var L=4*(p*C+N),T=4*(I*C+N);f[L]=m[T];f[L+1]=m[T+1];f[L+2]=m[T+2];f[L+3]=m[T+3]}u.putImageData(k,0,0);return w.toDataURL("image/png")},jf:function(m){!w&&m&&(w=document.createElement("canvas"),u=w.getContext("2d"));var k=m?w:document.createElement("canvas");k.width=l.width;k.height=l.height;(m?u:k.getContext("2d")).drawImage(l,
0,0);return k},A:function(m){m.Fd&&!m.ob?l=document.getElementById(m.Fd):m.ob&&(l=m.ob);l||(l=document.createElement("canvas"));l.width=m&&void 0!==m.width?m.width:512;l.height=m&&void 0!==m.height?m.height:512;"undefined"===typeof m&&(m={});void 0===m.premultipliedAlpha&&(m.premultipliedAlpha=!1);void 0===m.Oc&&(m.Oc=!0);void 0===m.antialias&&(m.antialias=!1);if(a)q=a instanceof WebGL2RenderingContext;else{q=!0;var k={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,
stencil:!1,depth:m.Oc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(k.antialias=!1);var C=e(k);!C&&k.antialias&&(k.antialias=!1,C=e(k));C&&(a=l.getContext("webgl2",k));a?q=!0:((a=l.getContext("webgl",k))||(a=l.getContext("experimental-webgl",k)),q=!1)}if(!a)return b("WebGL1 and 2 are not enabled");(g=a.getExtension("WEBGL_lose_context"))&&m.Xc&&(y=m.Xc,l.addEventListener("webglcontextlost",y,!1));if(!Ka.A())return b("Not enough GL capabilities");d(a);x.A();
J.A();return Ja.mc(a,Ka.Rd())?!0:b("Cannot filter float textures")},o:function(){a&&(Ka.o(),Ja.o());g&&y&&(l.removeEventListener("webglcontextlost",y,!1),g=y=null);a=c=u=w=l=null}};return B}(),Ia=function(){function b(){null===e&&("undefined"!==typeof x?e=x:"undefined"!==typeof JEShaders&&(e=JEShaders))}var e=null;b();return{Ke:function(d){e!==d&&(e&&e.V(),e=d)},Wa:function(){return e.Wa()},Ca:function(){return e.Ca()},eb:function(d){return e.eb(d)},Xb:function(){return e.Xb()},V:function(){return e.V()},
set:function(d){return e.set(d)},Ba:function(d){b();return e.Ba(d)},Vb:function(d){b();return e.Vb(d)},o:function(){return e.o()}}}(),S=function(){function b(h){a.bindTexture(a.TEXTURE_2D,h)}function e(h){t[0]=h;h=F[0];var H=h>>16&32768,n=h>>12&2047,P=h>>23&255;return 103>P?H:142<P?H|31744|((255==P?0:1)&&h&8388607):113>P?(n|=2048,H|(n>>114-P)+(n>>113-P&1)):H=(H|P-112<<10|n>>1)+(n&1)}function d(h){var H=new Uint16Array(h.length);h.forEach(function(n,P){H[P]=e(n)});return H}function l(){if(null!==M.Db)return M.Db;
var h=u(d([.5,.5,.5,.5]));return null===h?!0:M.Db=h}function w(){if(null!==M.Eb)return M.Eb;var h=u(new Uint8Array([127,127,127,127]));return null===h?!0:M.Eb=h}function u(h){if(!Ia.Wa()||!f)return null;var H=null,n=Math.sqrt(h.length/4);try{var P=a.getError();if("FUCKING_BIG_ERROR"===P)return!1;H=U.instance({isFloat:!1,R:!0,array:h,width:n});P=a.getError();if(P!==a.NO_ERROR)return!1}catch(sa){return!1}La.O();a.viewport(0,0,n,n);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ia.set("s0");H.kc(0);
J.j(!0,!0);h=4*n*n;P=new Uint8Array(h);a.readPixels(0,0,n,n,a.RGBA,a.UNSIGNED_BYTE,P);n=!0;for(var la=0;la<h;++la)n=n&&3>Math.abs(P[la]-127);H.remove();La.W();return n}var g=0,q=null,c=0,y=null,B=null,m=null,k=null,C=null,A=null,f=!1,p=[],I={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,N:null,Hc:null,ge:!1,R:!1,ja:null,Ya:4,Ib:0},N=!1,L=null,T=null,G=[[1,0,0,0],[0,
1,0,0],[0,0,1,0],[0,0,0,1]],K=!1,v=!1,t=new Float32Array(1),F=new Int32Array(t.buffer),M={Db:null,Eb:null},U={A:function(){f||(C=[a.RGBA,null,a.RGBA,a.RGBA],A=[a.RGBA,null,a.RGBA,a.RGBA],q=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7],K="undefined"!==typeof JEContext,v="undefined"!==typeof Ka,K&&JEContext.Hf()&&q.push(a.TEXTURE8,a.TEXTURE9),y=[-1,-1,-1,-1,-1,-1,-1,-1],k=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT],f=!0)},ce:function(){if(!B){for(var h=new Float32Array(16384),
H=0;16384>H;++H)h[H]=2*Math.random()-1;B={random:U.instance({isFloat:!0,isPot:!0,array:h,width:64}),kd:U.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}U.Te()},yf:function(){return B.kd},Te:function(){k[1]=Ka.zb(a)},He:function(){A=C=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},ed:function(h){x.set("s1");La.O();var H=h.u(),n=h.P();a.viewport(0,0,H,n);h.g(0);J.j(!1,!1)},Ce:function(h,H){U.ed(h);a.readPixels(0,0,h.u(),h.P(),a.RGBA,a.UNSIGNED_BYTE,H)},If:function(h,H){U.ed(h);return Ka.Qb(0,
0,h.u(),h.P(),H)},Bc:function(h,H,n,P,la,sa,z){h.activeTexture(h.TEXTURE0);var X=h.createTexture();h.bindTexture(h.TEXTURE_2D,X);la=la instanceof Float32Array?la:new Float32Array(la);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,sa);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,
n,P,0,h.RGBA,h.FLOAT,la);h.bindTexture(h.TEXTURE_2D,null);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);z&&(La.W(),x.Ba(h));h.viewport(0,0,n,P);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,H,0);h.bindTexture(h.TEXTURE_2D,X);z?J.j(!0,!0):J.Pa(h);h.deleteTexture(X);f&&(y[0]=-1,m=null,g=0)},jb:function(h){h!==g&&(a.activeTexture(q[h]),g=h)},instance:function(h){function H(D){var V=a.getError();if("FUCKING_BIG_ERROR"===V)return!1;a.texImage2D(a.TEXTURE_2D,0,na,ka,ma,D);V=a.getError();
V!==a.NO_ERROR&&ka!==a.RGBA&&(ka=a.RGBA,a.texImage2D(a.TEXTURE_2D,0,na,ka,ma,D));return!0}function n(){if(!ja){b(Z);r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r);z.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,z.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,z.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));z.isAnisotropicFiltering&&"undefined"!==
typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.mf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ve);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,z.isLinear?a.LINEAR:a.NEAREST);z.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,z.isMipmap&&!ba?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,z.isMipmap&&!ba?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);ka=C[z.Ya-1];na=A[z.Ya-1];ma=k[oa];if(Ka.da()){var D=Ka.Ud();ka===a.RGBA&&ma===a.FLOAT?z.isMipmap||z.isLinear?
na=Ja.Wd(a):Ka.nc()?D&&(na=D):na=a.RGBA16F||a.RGBA:ka===a.RGB&&ma===a.FLOAT&&D&&(na=D,ka=a.RGBA)}if(z.R&&!z.isFloat||z.isFloat&&z.isMipmap&&Ja.me())na=Ka.Vd(),ma=Ka.zb(a);z.Ib&&(pa=z.Ib);z.isSrgb&&4===z.Ya&&(ka=JEContext.wf());if(z.N)H(z.N);else if(z.url)H(fa);else if(ra){D=ra;try{"FUCKING_BIG_ERROR"!==a.getError()&&(a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,D),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,
Q,R,0,a.RGBA,a.UNSIGNED_BYTE,null)))}catch(ob){a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,null)}z.isKeepArray||(ra=null)}else D=a.getError(),"FUCKING_BIG_ERROR"!==D&&(a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,null),D=a.getError(),D!==a.NO_ERROR&&(ka=a.RGBA,z.R&&ma!==a.FLOAT&&(ma=a.FLOAT,a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,null))));if(z.isMipmap)if(!ba&&ha)ha.yb(),ua=!0;else if(ba){D=Math.log2(Math.min(Q,R));ca=Array(1+D);ca[0]=Z;for(var V=1;V<=D;++V){var qa=Math.pow(2,V),Y=Q/qa;qa=R/qa;var Ea=
a.createTexture();b(Ea);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,na,Y,qa,0,ka,ma,null);b(null);ca[V]=Ea}ua=!0}b(null);y[g]=-1;r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);za=!0;z.ja&&ha&&(z.ja(ha),z.ja=null)}}function P(){for(var D=Q*R,V=2*D,qa=3*D,Y=0;Y<D;++Y)aa[0][Y]=Aa[Y],aa[1][Y]=Aa[Y+D],aa[2][Y]=Aa[Y+V],aa[3][Y]=Aa[Y+qa]}function la(){var D=Q*R*4;wa=[new Uint8Array(D),new Uint8Array(D),
new Uint8Array(D),new Uint8Array(D)];aa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Da=new Uint8Array(4*D);Aa=new Float32Array(Da.buffer);O=!0}function sa(){va.kb=new Uint8Array(Q*R*4);va.Cc=new Float32Array(va.buffer);va.Hb=!0}var z=Object.assign({},I,h),X=c++;null===z.isFlipY&&(z.isFlipY=z.url||z.array?!0:!1);z.data&&(z.array="string"===typeof z.data?Ha(z.data):z.isFloat?new Float32Array(z.data):new Uint8Array(z.data),
z.isFlipY=!1);var oa=0,ta=z.N?!0:!1,W=null,ia=null,Fa=!1,Ca=null;z.R=z.R||z.isFloat;z.R&&(oa=1);!z.ge&&z.isFloat&&v&&!Ka.nc()&&(z.isFloat=!1);z.isFloat&&(oa=2);z.isAnisotropicFiltering&&K&&!JEContext.Cf()&&(z.isAnisotropicFiltering=!1);var Z=z.Hc||a.createTexture(),fa=null,ra=!1,Q=0,R=0,za=!1,ja=!1,O=!1,aa=null,wa=null,Da=null,Aa=null,na=null,ka=null,ma=null,r=z.isFlipY,E=(h=z.R&&z.isMipmap)&&Ja.Ad(),ba=h&&E?!0:!1,ca=null,pa=-1,ua=!1,va={Hb:!1,kb:null,Cc:null};z.width&&(Q=z.width,R=z.height?z.height:
Q);var ha={get:function(){return Z},u:function(){return Q},P:function(){return R},zf:function(){return z.url},Df:function(){return z.isFloat},Ff:function(){return z.R},Gf:function(){return z.isLinear},yb:function(){a.generateMipmap(a.TEXTURE_2D)},yd:function(D,V){ba?(D||(D=ha.Gc()),U.jb(V),b(ca[D]),y[V]=-1):ha.g(V)},Gc:function(){-1===pa&&(pa=Math.log(Q)/Math.log(2));return pa},Qd:function(D){if(ba){D||(D=ha.Gc());x.set("s11");U.jb(0);for(var V=Q,qa=R,Y=1;Y<=D;++Y)V/=2,qa/=2,x.M("u7",.25/V,.25/qa),
a.viewport(0,0,V,qa),b(ca[Y-1]),a.framebufferTexture2D(La.Sa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ca[Y],0),J.j(!1,1===Y);y[0]=-1}else ha.yb()},g:function(D){if(!za)return!1;U.jb(D);if(y[D]===X)return!1;b(Z);y[D]=X;return!0},kc:function(D){a.activeTexture(q[D]);g=D;b(Z);y[D]=X},v:function(){m=ha;a.framebufferTexture2D(La.Sa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Z,0)},H:function(){m=ha;a.viewport(0,0,Q,R);a.framebufferTexture2D(La.Sa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Z,0)},cc:U.cc,resize:function(D,V){Q=
D;R=V;n()},clone:function(D){D=U.instance({width:Q,height:R,R:z.R,isFloat:z.isFloat,isLinear:z.isLinear,isMirrorY:z.isMirrorY,isFlipY:D?!r:r,isPot:z.isPot});Ia.set("s0");La.W();D.v();a.viewport(0,0,Q,R);ha.g(0);J.j(!0,!0);return D},Me:function(){a.viewport(0,0,Q,R)},remove:function(){a.deleteTexture(Z);ja=!0;p.splice(p.indexOf(ha),1);ha=null},refresh:function(){ha.kc(0);r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);ta?a.texImage2D(a.TEXTURE_2D,0,na,ka,a.UNSIGNED_BYTE,z.N):a.texImage2D(a.TEXTURE_2D,0,
na,Q,R,0,ka,ma,ra);r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},dd:function(){O||la();a.readPixels(0,0,Q,4*R,a.RGBA,a.UNSIGNED_BYTE,Da);P();return aa},ze:function(){O||la();return Ka.Qb(0,0,Q,4*R,Da).then(function(){P();return aa})},Be:function(){va.Hb||sa();a.readPixels(0,0,Q,R,a.RGBA,a.UNSIGNED_BYTE,va.kb);return va.Cc},Ae:function(){va.Hb||sa();return Ka.Qb(0,0,Q,R,va.kb)},rc:function(D){La.O();x.set("s12");ha.g(0);if(D)a.viewport(0,0,Q,R),x.Wb("u8",.25,.25,.25,.25),J.j(!1,!0);else for(D=0;4>D;++D)a.viewport(0,
R*D,Q,R),x.Wb("u8",G[D]),J.j(!1,0===D)},Wf:function(D){var V=ma===k[0]&&!w();b(Z);r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);V?(Fa||(W=document.createElement("canvas"),W.width=Q,W.height=R,ia=W.getContext("2d"),Ca=ia.createImageData(Q,R),Fa=!0),Ca.data.set(D),ia.putImageData(Ca,0,0),a.texImage2D(a.TEXTURE_2D,0,na,ka,ma,W)):a.texImage2D(a.TEXTURE_2D,0,na,Q,R,0,ka,ma,D);y[g]=X;r&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Xf:function(D,V){b(Z);V&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,
0,na,ka,ma,D);y[g]=X;V&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Kf:function(D,V){var qa=Q*R,Y=4*qa;D=z.R?D?"RGBE":"JSON":"RGBA";V&&(D=V);V=Ka.da()&&!1;var Ea=null;switch(D){case "RGBE":Ea="s42";break;case "JSON":Ea=V?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Ea="s6"}O||("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D?(wa=new Uint8Array(Y),O=!0):"JSON"!==D||V||la());La.O();x.set(Ea);ha.g(0);Y=null;if("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D){a.viewport(0,0,Q,R);J.j(!0,!0);a.readPixels(0,0,Q,R,a.RGBA,a.UNSIGNED_BYTE,
wa);if("RGBAARRAY"===D)return{data:wa};N||(L=document.createElement("canvas"),T=L.getContext("2d"),N=!0);L.width=Q;L.height=R;qa=T.createImageData(Q,R);qa.data.set(wa);T.putImageData(qa,0,0);Y=L.toDataURL("image/png")}else if("JSON"===D)if(V)Y=new Float32Array(qa),a.viewport(0,0,Q,R),J.j(!0,!0),a.readPixels(0,0,Q,R,a.RGBA,a.FLOAT,Y);else{for(Y=0;4>Y;++Y)a.viewport(0,R*Y,Q,R),x.Wb("u8",G[Y]),J.j(!Y,!Y);ha.dd();Y=Array(qa);for(V=0;V<qa;++V)Y[4*V]=aa[0][V],Y[4*V+1]=aa[1][V],Y[4*V+2]=aa[2][V],Y[4*V+3]=
aa[3][V]}return{format:D,data:Y,width:Q,height:R,isMirrorY:z.isMirrorY,isFlipY:"RGBA"===D?z.isFlipY:!z.isFlipY}}};z.isMipmap&&!ba&&za&&!ua&&(ha.yb(),ua=!0);if(z.url)b(Z),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),fa=new Image,fa.cf="Anonymous",fa.crossOrigin="Anonymous",fa.src=z.url,fa.onload=function(){Q=fa.width;R=fa.height;n()};else if(z.N){var Oa=function(){Q=void 0!==z.N.videoWidth?z.N.videoWidth:z.N.width;R=void 0!==z.N.videoHeight?z.N.videoHeight:z.N.height;Q?n():
setTimeout(Oa,1)};Oa()}else z.array?(z.R&&!z.isFloat?z.array instanceof Uint16Array?(ra=z.array,n()):l()?(ra=d(z.array),n()):(n(),U.Bc(a,Z,ha.u(),ha.P(),z.array,r,!0)):(ra=z.isFloat?z.array instanceof Float32Array?z.array:new Float32Array(z.array):z.array instanceof Uint8Array?z.array:new Uint8Array(z.array),n()),z.isKeepArray||(ra&&ra!==z.array&&(ra=null),delete z.array)):z.Hc?za=!0:n();ha.vf=ha.u;z.ja&&za&&(z.ja(ha),z.ja=null);p.push(ha);return ha},O:function(h){h!==g&&(a.activeTexture(q[h]),g=
h);y[h]=-1;b(null)},Ye:function(h){B.random.g(h)},cc:function(){m=null;a.framebufferTexture2D(La.Sa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},reset:function(){0!==g&&a.activeTexture(q[0]);for(var h=0;h<q.length;++h)y[h]=-1;g=-1},Jf:function(){g=-1},Qe:function(){for(var h=0;h<q.length;++h)U.O(h)},Dc:function(){B&&(B.random.remove(),B.kd.remove())},Uf:function(h,H){if("RGBA"===h.format||"RGBE"===h.format){var n=new Image;n.src=h.data;n.onload=function(){U.instance({isMirrorY:h.isMirrorY,isFlipY:h.isFlipY,
isFloat:!1,N:n,ja:function(P){if("RGBA"===h.format)H(P);else{var la=h.width,sa=h.height,z=U.instance({isMirrorY:h.isMirrorY,isFloat:!0,width:la,height:sa,isFlipY:h.isFlipY});La.W();a.viewport(0,0,la,sa);x.set("s43");z.v();P.g(0);J.j(!0,!0);U.O(0);H(z);a.flush();setTimeout(P.remove,50)}}})}}else"JSON"===h.format?H(U.instance({isFloat:!0,isFlipY:h.isFlipY,width:h.width,height:h.height,array:new Float32Array(h.data)})):H(!1)},Dd:d,o:function(){m&&(La.W(),U.cc(),La.O());U.Qe();p.slice(0).forEach(function(h){h.remove()});
p.splice(0);f=!1;c=0;"undefined"!==typeof Ja&&Ja.o();B=null}};return U}(),Na={instance:function(b){var e=[S.instance(b),S.instance(b)],d=[e[1],e[0]],l=d,w={Ee:function(u){l[1].v();l[0].g(u);w.hd()},Lf:function(u){l[1].H();l[0].g(u);w.hd()},hd:function(){l=l===e?d:e},refresh:function(){l[0].refresh();l[1].refresh()},g:function(u){l[0].g(u)},Xe:function(u){l[1].g(u)},rf:function(){return l[0]},tf:function(){return l[1]},remove:function(){l[0].remove();l[1].remove();l=null}};return w}},J=function(){function b(c){var y=
{Z:null,K:null};y.Z=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,y.Z);c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),c.STATIC_DRAW);y.K=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y.K);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),c.STATIC_DRAW);return y}var e=null,d=0,l=!1,w=[],u=-2,g=-2,q={reset:function(){g=u=-2},A:function(){l||(e=b(a),q.Ha(),l=!0)},instance:function(c){var y=d++,B=c.K?c.K.length:0,m="undefined"===typeof c.mode?a.STATIC_DRAW:c.mode,k=a.createBuffer();
a.bindBuffer(a.ARRAY_BUFFER,k);a.bufferData(a.ARRAY_BUFFER,c.Z instanceof Float32Array?c.Z:new Float32Array(c.Z),m);u=y;var C=null,A=null,f=null;if(c.K){C=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,C);var p=null;65536>c.K.length?(p=Uint16Array,A=a.UNSIGNED_SHORT,f=2):(p=Uint32Array,A=a.UNSIGNED_INT,f=4);p=c.K instanceof p?c.K:new p(c.K);a.bufferData(a.ELEMENT_ARRAY_BUFFER,p,m);g=y}var I={zd:function(N){u!==y&&(a.bindBuffer(a.ARRAY_BUFFER,k),u=y);N&&Ia.Xb()},wd:function(){g!==y&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
C),g=y)},bind:function(N){I.zd(N);I.wd()},Kd:function(){a.drawElements(a.TRIANGLES,B,A,0)},df:function(N,L){a.drawElements(a.TRIANGLES,N,A,L*f)},remove:function(){a.deleteBuffer(k);c.K&&a.deleteBuffer(C);I=null}};w.push(I);return I},Ha:function(){-1!==u&&(a.bindBuffer(a.ARRAY_BUFFER,e.Z),u=-1);-1!==g&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.K),g=-1)},j:function(c,y){c&&J.Ha();y&&Ia.Ca();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Pa:function(c){c=c||a;var y=b(c);c.bindBuffer(c.ARRAY_BUFFER,y.Z);
c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,y.K);Ia.eb(c);c.clear(c.COLOR_BUFFER_BIT);c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0);c.flush();c.bindBuffer(c.ARRAY_BUFFER,null);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);c.deleteBuffer(y.Z);c.deleteBuffer(y.K);q.reset();l&&(q.Ha(),Ia.Ca())},Dc:function(){var c=a,y=e;c.deleteBuffer(y.Z);c.deleteBuffer(y.K)},o:function(){q.Dc();w.forEach(function(c){c.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);q.reset();l=!1;w.splice(0);
d=0}};return q}(),La=function(){var b=null,e=null,d=null,l=!1,w=[],u={J:-2,Ac:1},g={Wa:function(){return l},A:function(){if(!l){b=a.createFramebuffer();var q=Ka.da();e=q&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;d=q&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;l=!0}},pf:function(){return e},Xd:function(){return d},Sa:function(){return a.FRAMEBUFFER},uf:function(){return u},ef:function(){return b},instance:function(q){void 0===q.Nc&&(q.Nc=!1);var c=q.S?q.S:null,y=q.width,B=void 0!==
q.height?q.height:q.width,m=b,k=null,C=!1,A=!1,f=0;c&&(y=y?y:c.u(),B=B?B:c.P());var p={gd:function(){C||(m=a.createFramebuffer(),C=!0,f=u.Ac++)},sd:function(){p.gd();p.v();k=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,k);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,y,B);a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,k);a.clearDepth(1)},bind:function(I,N){f!==u.J&&(a.bindFramebuffer(e,m),u.J=f);c&&c.v();N&&a.viewport(0,0,y,B);I&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},
We:function(){f!==u.J&&(a.bindFramebuffer(e,m),u.J=f)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},af:function(){a.clear(a.COLOR_BUFFER_BIT)},bf:function(){a.clear(a.DEPTH_BUFFER_BIT)},Me:function(){a.viewport(0,0,y,B)},v:function(){f!==u.J&&(a.bindFramebuffer(e,m),u.J=f)},rtt:function(I){c=I;u.J!==f&&(a.bindFramebuffer(a.FRAMEBUFFER,m),u.J=f);I.v()},O:function(){a.bindFramebuffer(e,null);u.J=-1},resize:function(I,N){y=I;B=N;k&&(a.bindRenderbuffer(a.RENDERBUFFER,k),a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,y,B))},remove:function(){m===b||A||(a.bindFramebuffer(e,m),a.framebufferTexture2D(e,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),k&&a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(e,null),a.deleteFramebuffer(m),k&&a.deleteRenderbuffer(k));A=!0}};q.Nc&&p.sd();w.push(p);return p},O:function(){a.bindFramebuffer(e,null);u.J=-1},Re:function(){a.bindFramebuffer(e,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ka.u(),Ka.P());u.J=
-1},reset:function(){u.J=-2},W:function(){0!==u.J&&(a.bindFramebuffer(e,b),u.J=0)},clear:function(){a.viewport(0,0,Ka.u(),Ka.P());a.clear(a.COLOR_BUFFER_BIT)},o:function(){g.O();w.forEach(function(q){q.remove()});a.deleteFramebuffer(b);g.reset();l=!1;w.splice(0);u.J=-2;u.Ac=1}};return g}(),Ka=function(){function b(){l="undefined"===typeof Ma?JEContext:Ma;w=!0}function e(f,p){for(var I=0;I<f.length;++I){var N=p.getExtension(f[I]);if(N)return N}return null}function d(){null!==k.hb&&(clearInterval(k.hb),
k.hb=null);k.za=!1}var l=null,w=!1,u={Pc:!1,Yb:null,Zb:null,Sc:!1,ke:!1,$b:null,Tc:!1,ac:null,Qc:!1,mb:null,ee:!1,nb:null,fe:!1},g=null,q={ba:!0,ca:!0,xb:!0,cd:!1},c=null,y=!0,B=null,m=null,k={za:!1,qa:null,Ta:null,Cb:-1,ra:null,hb:null},C="undefined"===typeof window?{}:window,A={A:function(){if(w)return!0;A.reset();w||b();var f=a;if(!g.Pc){g.Yb=A.wc(f);C.GL_EXT_FLOAT=g.Yb;g.Sc=g.Yb?!0:!1;if(g.Sc||A.da())g.Zb=A.xc(f),g.ke=g.Zb?!0:!1,C.GL_EXT_FLOATLINEAR=g.Zb;g.Pc=!0}if(!g.Qc){g.$b=A.Ma(f);g.$b&&(g.Tc=
!0,C.GL_EXT_HALFFLOAT=g.$b);if(g.Tc||A.da())g.ac=A.yc(f),C.GL_EXT_HALFFLOATLINEAR=g.ac;g.Bf=g.ac?!0:!1;g.Qc=!0}g.mb=A.uc(f);g.ee=g.mb?!0:!1;C.GL_EXT_COLORBUFFERFLOAT=g.mb;g.nb=A.vc(f);g.fe=g.nb?!0:!1;C.GL_EXT_COLORBUFFERHALFFLOAT=g.nb;La.A();S.A();if(!A.Hd())return!1;J.A();S.ce();return!0},reset:function(){g=Object.assign({},u);c=Object.assign({},q)},u:function(){w||b();return l.u()},P:function(){w||b();return l.P()},da:function(){w||b();return l.da()},tc:function(f){A.uc(f);A.vc(f);A.wc(f);A.xc(f);
A.Ma(f);A.yc(f)},uc:e.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),vc:e.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),wc:e.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),xc:e.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Ma:e.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),
yc:e.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),zb:function(f){var p=A.Ma(f);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},Ud:function(){return m||a.RGBA32F||a.RGBA},Vd:function(){return B||a.RGBA16F||a.RGBA},Rd:function(){return c},nc:function(){return c.ba},$e:function(){return c.ca},Ze:function(){return c.xb},Bd:function(){return c.cd&&y},jd:function(f){y=f;!f&&k.za&&(a.deleteSync(k.Ta),a.bindBuffer(k.ra,
null),k.za=!1)},fb:function(f,p,I){function N(){f.bindTexture(f.TEXTURE_2D,null);f.bindFramebuffer(L,null);f.deleteTexture(K);f.deleteFramebuffer(G)}var L=f.FRAMEBUFFER,T=f.NEAREST,G=f.createFramebuffer();f.bindFramebuffer(L,G);var K=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,K);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_MAG_FILTER,T);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,T);f.texImage2D(f.TEXTURE_2D,0,p,3,3,0,f.RGBA,I,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,K,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return N(),!1;Ia.Vb(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);J.Pa(f);f.bindFramebuffer(L,null);Ia.Ba(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,
K);J.Pa(f);p=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,p);N();for(I=0;36>I;++I)if(3!==I%4&&3<Math.abs(p[I]-127))return!1;return!0},pb:function(f){var p={ba:!1,ca:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&A.fb(f,f.RGBA32F,f.FLOAT)&&(p.ba=!0,m=f.RGBA32F);!p.ba&&A.fb(f,f.RGBA,f.FLOAT)&&(p.ba=!0,m=f.RGBA);var I=A.zb(f);B=null;f.RGBA16F&&A.fb(f,f.RGBA16F,I)&&(p.ca=!0,B=f.RGBA16F);!p.ca&&A.fb(f,f.RGBA,I)&&(p.ca=!0,B=f.RGBA);return p},Id:function(){var f=
La.instance({width:2});f.gd();var p=S.instance({width:2,isFloat:!0,Ya:3});f.v();p.v();a.flush();a.checkFramebufferStatus(La.Xd())!==a.FRAMEBUFFER_COMPLETE?(S.He(),c.xb=!1):c.xb=!0;f.remove();p.remove()},Jd:function(){var f=!1;A.da()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof a[p]}));c.cd=f},Hd:function(){var f=A.pb(a);Object.assign(c,f);if(!c.ba&&!c.ca)return!1;A.Id();A.Jd();return!0},
Qb:function(f,p,I,N,L){if(!A.Bd())return a.readPixels(f,p,I,N,a.RGBA,a.UNSIGNED_BYTE,L),Promise.resolve(L);null===k.qa&&(k.ra=a.PIXEL_PACK_BUFFER,k.qa=a.createBuffer(),k.Cb=-1);a.bindBuffer(k.ra,k.qa);L.byteLength!==k.Cb&&(a.bufferData(k.ra,L.byteLength,a.STREAM_READ),k.Cb=L.byteLength);a.readPixels(f,p,I,N,a.RGBA,a.UNSIGNED_BYTE,0);k.Ta=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();return new Promise(function(T,G){function K(){if(!k.za)return d(),G(),!1;switch(a.clientWaitSync(k.Ta,0,0)){case a.TIMEOUT_EXPIRED:return!1;
case a.WAIT_FAILED:return d(),G(),!1;default:return d(),a.deleteSync(k.Ta),a.getBufferSubData(k.ra,0,L),a.bindBuffer(k.ra,null),T(L),!0}}d();k.za=!0;K()||(k.hb=setInterval(K,0))})},o:function(){S.o();Ia.o();La.o();J.o();null!==k.qa&&(a.deleteBuffer(k.qa),k.qa=null);w=!1}};return A}(),Ja=function(){function b(G,K,v,t){p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,t?p.NEAREST_MIPMAP_NEAREST:p.LINEAR);var F=null;if(null!==v)try{F=p.getError();if("FUCKING_BIG_ERROR"===F)return!1;p.texImage2D(p.TEXTURE_2D,
0,G,4,4,0,p.RGBA,K,v);F=p.getError();if(F!==p.NO_ERROR)return!1}catch(M){return!1}t&&p.generateMipmap(p.TEXTURE_2D);p.clear(p.COLOR_BUFFER_BIT);J.Pa(p);F=p.getError();if("FUCKING_BIG_ERROR"===F)return!1;p.readPixels(0,0,2,2,p.RGBA,p.UNSIGNED_BYTE,B);F=p.getError();F===p.INVALID_OPERATION&&"undefined"!==typeof p.PIXEL_PACK_BUFFER&&(p.bindBuffer(p.PIXEL_PACK_BUFFER,null),p.readPixels(0,0,2,2,p.RGBA,p.UNSIGNED_BYTE,B),F=p.getError());if(F!==p.NO_ERROR)return!1;v=!0;for(t=0;16>t;++t)v=v&&4>Math.abs(B[t]-
127);v&&(c.Zc=K,c.Lc=G);return v}function e(G,K){return I.ba&&b(G,p.FLOAT,new Float32Array(m),K)?(q=g.hc,!0):!1}function d(G,K,v){if(!I.ca)return!1;var t=S.Dd(m),F=Ka.Ma(p);if(F&&F.HALF_FLOAT_OES&&b(G,F.HALF_FLOAT_OES,t,K)||p.HALF_FLOAT&&b(G,p.HALF_FLOAT,t,K))return q=g.wa,!0;t=new Float32Array(m);if(b(G,p.FLOAT,t,K))return q=g.wa,!0;p.bindTexture(p.TEXTURE_2D,v);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,2,2,0,p.RGBA,p.UNSIGNED_BYTE,null);p.bindFramebuffer(c.Ka,T);S.Bc(p,v,2,2,t,!1,!1);p.bindFramebuffer(c.Ka,
null);p.bindTexture(p.TEXTURE_2D,v);return b(G,null,null,K)?(q=g.wa,!0):!1}function l(G,K,v){y=!0;if(d(G,!0,v)||e(K,!0))return!0;y=!1;return d(G,!1,v)||e(K,!1)?!0:!1}function w(G){if(q===g.V){p=G||a;q=g.RGBA8;y=!0;Ka.tc(p);I||(I=Ka.pb(p));La.reset();T=p.createFramebuffer();c.Ka=p.DRAW_FRAMEBUFFER||p.FRAMEBUFFER;p.bindFramebuffer(c.Ka,null);p.clearColor(0,0,0,0);p.viewport(0,0,2,2);x.V();N=x.Ba(p);G=p.createTexture();p.activeTexture(p.TEXTURE0);p.bindTexture(p.TEXTURE_2D,G);p.texParameteri(p.TEXTURE_2D,
p.TEXTURE_WRAP_S,p.REPEAT);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);L=G;var K=G=p.RGBA,v=p.RGBA16F,t=p.RGBA32F;t&&(G=t);v&&(K=v);if((v||t)&&l(K,G,L))return u(),!0;G=K=p.RGBA;if(l(K,G,L))return u(),!0;q=g.RGBA8;u();return!1}}function u(){p.deleteProgram(N.la);p.deleteTexture(L);L=N=null}for(var g={V:-1,hc:3,wa:2,RGBA8:0},q=g.V,c={Zc:null,Lc:null,Ka:null},y=!0,B=new Uint8Array(16),m=Array(64),k=0;4>k;++k)for(var C=0;4>C;++C){var A=
0===(C+k)%2?1:0,f=4*k+C;m[4*f]=A;m[4*f+1]=A;m[4*f+2]=A;m[4*f+3]=A}var p=null,I=null,N=null,L=null,T=null;return{Ad:function(G){w(G);return y},mc:function(G,K){q===g.V&&(typeof("undefined"!==K)&&(I=K),w(G));return q!==g.RGBA8},Ef:function(G){w(G);return q===g.hc},me:function(G){w(G);return q===g.wa},qf:function(G){w(G);return c.Zc},Wd:function(G){w(G);return c.Lc},o:function(){p=null;y=!0;q=g.V;I=null}}}(),Pa={instance:function(b){var e=S.instance(b.alpha),d=S.instance(b.beta);return{Ld:function(){e.g(1);
d.g(2)}}}},Sa={instance:function(b){var e=null,d=!1,l=!1,w=null,u=!1,g=!1,q=null,c="undefined"===typeof b.preprocessing?!1:b.preprocessing,y="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(d=!0,SETTINGS&&void 0!==SETTINGS.vd&&(b.mask=SETTINGS.vd+b.mask),e=S.instance({isFloat:!1,url:b.mask}));var B=!1;b.customInputShader&&(B="s44",x.$({name:"_",id:B,h:b.customInputShader,Tf:["uSource"],precision:"lowp"}),x.I(B,[{type:"1i",name:"_",value:0}]));switch(c){case "sobel":q="s31";
u=!0;break;case "meanNormalization":q="s32";u=!0;break;case "grayScale":q="s28";u=!1;break;case "grayScaleTilt":q="s29";g=!0;u=!1;break;case "rgbGrayTilt":q="s30";g=!0;u=!1;break;case "copy":q=B?B:"s0";break;case "inputLightRegulation":q=B?B:"s28";w=Qa.instance({Kc:y,Yc:b.size,Vc:b.nBlurPass,Ua:!1});l=!0;break;case "inputMix0":q="none";w=Ra.instance({ec:y,ld:b.varianceMin,lc:b.blurKernelSizePx,Ua:!1});l=!0;break;case "direct":case "none":q="abort";break;default:q="s3"}g&&x.I(q,[{name:"u26",type:"1f",
value:b.tilt}]);d&&(q+="Mask");var m=S.instance({isFloat:!1,isPot:!1,width:b.size}),k={u:function(){return y},Ab:function(){return k.u()},$d:function(){return l?w.Bb():m},U:function(C){La.W();"abort"!==q&&("none"!==q&&(x.set(q),u&&x.C("u27",1/b.size),m.H(),d&&e.g(1),J.j(!1,!1),m.g(0),C=m),l&&w.process(C))},o:function(){m.remove();d&&e.remove()}};return k}},Ya={instance:function(b){function e(h){w.forEach(function(H,n){u[n][0]=h[0][H];u[n][1]=h[1][H];u[n][2]=h[2][H];u[n][3]=h[3][H]});return u}"undefined"===
typeof b.normalize&&(b.normalize=!1);var d={input:null,Ga:null,Fb:null,X:null,Za:null,Mb:null,Nb:null},l=null,w=[],u=[],g=!1,q=null,c=!0,y=-1,B=b.isReorganize?b.isReorganize:!1,m=b.kernelsCount?!0:!1,k=b.dynPelu?Pa.instance(b.dynPelu):!1,C=k?!0:!1,A={isEnabled:!1};b.ie?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.$a.Ab(),c=!1):"full"===b.connectivityUp&&(b.sparsity=b.$a.Ab());var f={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],
p=b.sparsity*b.sparsity,I=!1,N=b.size,L="";if(b.maxPooling){switch(b.maxPooling.size){case 2:L="s33";break;case 4:L="s34"}I=!0;N/=b.maxPooling.size;d.Mb=S.instance({isFloat:!0,isPot:!1,width:N})}var T=void 0!==b.re&&b.re?!0:!1,G=null,K=null,v=null;if(T){G="s45"+b.index.toString();x.Jc("s45",G,[((b.normalization.n-1)/2).toFixed(1)]);x.I(G,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},
{type:"1f",name:"u30",value:b.normalization.k}]);var t={isFloat:!0,isPot:!0,width:b.size};K=S.instance(t);v=S.instance(t)}var F=-1,M=null;c&&(d.X=S.instance({isFloat:!0,isPot:!1,width:b.size}));d.Ga=S.instance(b.bias);var U={u:function(){return b.size},Ab:function(){return N},Ec:function(){return b.classesCount},xd:function(h){l.g(h)},te:function(){b.remap&&b.remap.isEnabled&&(A={isEnabled:!0,pe:S.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,
isPot:!1}),Xa:b.remap.layers.map(function(h){return b.parent.Yd(h)}),depth:b.remap.depth})},Ie:function(){switch(b.connectivityUp){case "direct":M=Ta.instance(b.connectivity);break;case "square":M=Ua.instance(b.connectivity);break;case "squareFast":M=Va.instance(b.connectivity,b.activation);break;case "full":M=Wa.instance(b.connectivity);break;case "conv":y=b.kernelsCount,M=Xa.instance(b.connectivity),B&&(d.Za=S.instance({width:N,isFloat:!0,isFlipY:!1,isPot:!1}))}if(M.va){var h=b.size*b.sparsity;
F=Math.log(h/b.size)/Math.log(2);d.input=S.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:h,Ib:F});d.Fb=S.instance({isFloat:!0,isPot:!0,width:b.size})}},U:function(h,H){l=h;M.va?(d.input.H(),m&&d.Ga.g(2),M.U(A),d.input.g(0),d.input.Qd(F),d.Fb.H(),m?x.set("s0"):(x.set("s27"),x.C("u25",p),d.Ga.g(1)),d.input.yd(F,0),J.j(!1,!1),x.set(f),T?K.v():d.X.v(),d.Fb.g(0),C&&k.Ld(),J.j(!1,!1)):(d.X.H(),d.Ga.g(1),M.U());T&&(x.set(G),v.v(),K.g(0),J.j(!1,!1),x.set("s46"),x.C("u6",1),d.X.v(),v.g(1),J.j(!1,!1));if(c)return I?
(d.Mb.H(),d.X.g(0),x.set(L),x.M("u7",1/b.size,1/b.size),J.j(!1,!1),H=d.Mb):H=d.X,H.g(0),B&&(d.Za.v(),x.set("s21"),x.M("u12",y,N/y),J.j(!1,!1),H=d.Za,d.Za.g(0)),H;var n=d.X;b.normalize&&(x.set("gpuRawAvg"===g?"s8":"s7"),x.C("u4",1/b.size),d.Nb.H(),d.X.g(0),J.j(!1,!1),n=d.Nb);h=null;switch(g){case "cpuRGBA2Float":n.rc(!1);H?h=U.xe(n).then(q):(n=U.ye(n),q(n));break;case "cpuMeanFloat":n.rc(!0);H?h=n.Ae().then(q):(n=n.Be(),q(n));break;case "gpuRawAvg":case "gpuRaw":n.g(0);case "none":null!==q&&q(n)}H&&
null===h&&(h=Promise.resolve());return h},Ed:function(h){h&&(g=h.Ob||"none",q=h.Lb||null);d.X=S.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});h="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var H=0,n=0,P=0;H<h;++H)w.push(n+(b.size-1-P)*b.size),u.push([-1,-1,-1,-1]),++n,n===b.size&&(n=0,++P);b.normalize&&(d.Nb=S.instance({isFloat:!0,isPot:!0,width:b.size}))},xe:function(h){return h.ze().then(e)},ye:function(h){h=h.dd();e(h);return u},o:function(){for(var h in d){var H=
d[h];H&&H.remove()}M&&(M.o(),M=null)}};b.$a&&U.Ie(b.$a);return U}};
function Za(b){var e=null,d=null,l=null,w=0;this.A=function(u){this.Ge(u.Xa);l.Ed({Ob:u.Ob,Lb:u.Lb})};this.Yd=function(u){return e[u]};this.Ge=function(u){var g=null;w=u.length;e=u.map(function(q,c){q=Object.assign({},q,{index:c,parent:this,$a:g,ie:c===w-1});return g=c=0===c?Sa.instance(q):Ya.instance(q)});d=e[0];l=e[w-1];e.forEach(function(q,c){0!==c&&q.te()})};this.U=function(u){var g=u;e.forEach(function(q){g=q.U(g,!1)});return g};this.Fc=function(){return d.u()};this.Bb=function(){return l.$d()};
this.Ec=function(){return l.Ec()};this.o=function(){e&&(e.forEach(function(u){u.o()}),l=d=e=null,w=0)};"undefined"!==typeof b&&this.A(b)}
var Ta={instance:function(b){var e=S.instance(b.weights);return{va:!0,Ra:function(){return 1},o:function(){e.remove()},ae:function(){return e},U:function(){x.set("s26");e.g(1);J.j(!1,!1)}}}},Wa={instance:function(b){var e=b.fromLayerSize,d=S.instance(b.weights);return{va:!0,Ra:function(){return e},o:function(){d.remove()},U:function(l){if(l.isEnabled){x.set("s24");l.pe.g(3);var w,u=Math.min(l.Xa.length,l.depth);for(w=0;w<u;++w)l.Xa[w].xd(4+w)}else x.set("s23");x.C("u16",b.toLayerSize);d.g(1);J.j(!1,
!1)}}}},Ua={instance:function(b){for(var e=b.fromLayerSize,d=b.toLayerSize,l=b.toSparsity,w=l*d,u=w/e,g=e/d,q=0,c=0,y=0,B=Array(l*d*l*d*4),m=Array(l*d*l*d*4),k=Array(e*e),C=0;C<k.length;++C)k[C]=0;C=Math.floor(l/2);for(var A=.5/d,f=.5/e,p=.5/w,I=0;I<d;++I)for(var N=Math.round(I*g),L=0;L<d;++L){var T=Math.round(L*g),G=I/d,K=L/d;G+=A;K+=A;for(var v=0;v<l;++v){var t=N+v-C;0>t&&(t+=e);t>=e&&(t-=e);for(var F=0;F<l;++F){var M=q/w,U=c/w,h=T+F-C;0>h&&(h+=e);h>=e&&(h-=e);var H=t/e,n=h/e;U=1-U-1/w;H+=f;n+=
f;M+=p;U+=p;var P=I*l+v,la=L*l+F;la=d*l-la-1;P=la*d*l+P;B[4*P]=M;B[4*P+1]=U;B[4*P+2]=H;B[4*P+3]=n;n=k[h*e+t]++;P=n%u;H=t*u+P;h=h*u+(n-P)/u;h=e*u-1-h;h=h*e*u+H;m[4*h]=M;m[4*h+1]=U;m[4*h+2]=G;m[4*h+3]=K;++q>=w&&(q=0,++c);++y}}}k=null;var sa=S.instance(b.weights);delete b.weights.data;var z=S.instance({width:w,isFloat:!0,array:new Float32Array(m),isPot:!0});m=null;var X=S.instance({width:w,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{va:!0,Ra:function(){return u},o:function(){z.remove();
X.remove();sa.remove()},U:function(){x.set("s22");sa.g(1);X.g(2);J.j(!1,!1)}}}},Xa={instance:function(b){var e=b.kernelsCount,d=b.toSparsity,l=d*b.toLayerSize/b.fromLayerSize,w=S.instance(b.weights);return{va:!0,Ra:function(){return l},xf:function(){return d},ae:function(){return w},o:function(){w.remove()},U:function(){x.set("s25");x.C("u22",e);x.C("u23",d);x.C("u16",b.toLayerSize);x.C("u24",b.fromLayerSize);w.g(1);J.j(!1,!1)}}}},Va={instance:function(b,e){var d=b.fromLayerSize,l=b.toLayerSize,w=
b.toSparsity,u=b.stride?b.stride:1,g=w*l/d,q=l<d,c=d/l,y=S.instance(b.weights),B="s47"+[d.toString(),l.toString(),w.toString(),u.toString(),e].join("_");x.Od(B)||(b=Ba(e),l=[{type:"1f",name:"u16",value:l},{type:"1f",name:"u29",value:u}],q&&l.push({type:"1f",name:"u24",value:d}),d=[(q?g:w).toFixed(1),b],q&&d.push(c.toFixed(1)),x.Jc(q?"s39":"s38",B,d),x.I(B,l.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{va:!1,Ra:function(){return g},
o:function(){y.remove()},U:function(){x.set(B);y.g(3);J.j(!1,!1)}}}},Qa={instance:function(b){var e=b.Vc?b.Vc:3,d=b.Kc?b.Kc:64,l=b.Yc?b.Yc:64,w=b.Ua?!0:!1;b={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var u=S.instance(b),g=S.instance(b),q=S.instance(b),c=S.instance(b),y=S.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),B=1/d;return{process:function(m){x.set("s35");c.v();J.j(w,!1);x.set("s36");for(var k=0;k<e;++k)u.v(),x.M("u7",B,0),J.j(w,!1),q.v(),c.g(0),J.j(w,!1),g.v(),u.g(0),x.M("u7",0,B),J.j(w,
!1),c.v(),q.g(0),J.j(w,!1),k!==e-1&&g.g(0);x.set("s37");y.v();m.g(0);g.g(1);c.g(2);J.j(w,!1);y.g(0)},Bb:function(){return y}}}},Ra={instance:function(b){function e(c){return S.instance({isFloat:c,width:d.ec,isPot:!1,isFlipY:!1})}var d=Object.assign({ld:.1,lc:9,ec:128,Ua:!1},b),l=e(!1),w=[e(!1),e(!1),e(!1)],u=[e(!1),e(!1),e(!1)],g=e(!0),q=[l,u[0],u[1]];b={u1:0};x.ic([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
l:b,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:"uniform sampler2D u1;\n        const float HALFKERNELSIZE = "+Math.round((d.lc-1)/2).toFixed(2)+";\n        const float DXY = "+(1/d.ec).toFixed(6)+"HALFKERNELSIZE",l:b,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32, u33, u34, u35;\n        const float VARIANCEMIN = "+d.ld.toFixed(4)+"u32",l:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){x.set("s49");l.H();J.j(d.Ua,
!1);x.set("s50");for(var c=0;3>c;++c)x.M("u31",1,0),w[c].v(),q[c].g(0),J.j(!1,!1),x.M("u31",0,1),u[c].v(),w[c].g(0),J.j(!1,!1);x.set("s51");g.v();l.g(0);u[0].g(1);u[1].g(2);u[2].g(3);J.j(!1,!1);g.g(0)},Bb:function(){return g}}}},$a=function(){function b(g){La.O();x.set("s1");a.viewport(0,0,1,1);J.j(!1,!1);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,g);La.W()}var e=!1,d=!1,l=null,w=null,u={A:function(){var g={u1:0};x.$({id:"s52",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u27;const vec3 f=vec3(.3333,.3333,.3333);const vec4 h=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y-u27.y))*1.,a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y+u27.y))*1.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y-u27.y))*1.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y+u27.y))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y-u27.y))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27.y))*2.,b-=texture2D(u1,vec2(vv0.x+u27.x,vv0.y-u27.y))*1.,b+=texture2D(u1,vec2(vv0.x-u27.x,vv0.y+u27.y))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27.y))*2.,b+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y+u27.y))*1.;vec3 e=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 c=texture2D(u1,vv0),g=vec4(e,c.a);gl_FragColor=vec4(dot(g.rgb,f),dot(c.rgb,f),0.,1.);}",
i:["u1","u27"],l:g});x.$({id:"s53",name:"_",h:"uniform sampler2D u1;uniform vec2 u36;uniform float u37,u38,u39,u40;varying vec2 vv0;void main(){vec2 a=floor(vv0*u38);float d=a.x+a.y*u38,f=u38*u38;vec2 g=fract(vv0*u38),b=u39+g*(1.-2.*u39);float c=d/(f-1.),h=mix(u36.x,u36.y,c);vec2 i=b+h*vec2(1.,1./u40)*vec2(cos(u37),sin(u37));float j=texture2D(u1,i).r;gl_FragColor=vec4(j,b,c);}",i:"u1 u36 u37 u38 u39 u40".split(" "),l:g});x.$({id:"s54",name:"_",h:"uniform sampler2D u1;uniform vec2 u7,u41;varying vec2 vv0;void main(){vec4 a=vec4(0.,0.,0.,0.),b;float e;vec2 g=vv0-u7*2.;for(float c=0.;c<3.9;c+=1.)for(float d=0.;d<3.9;d+=1.)b=texture2D(u1,g+u7*vec2(c,d)),e=step(a.r,b.r),a=mix(a,b,e);gl_FragColor=a;}",
i:["u1","u7","u41"],l:g});x.$({id:"s55",name:"_",h:"uniform sampler2D u1;uniform vec2 u42;uniform float u43;const vec4 f=vec4(0.,1.,0.,1.);varying vec2 vv0;void main(){float a=step(abs(distance(vv0,u42)-u43),1e-3);gl_FragColor=mix(texture2D(u1,vv0),f,a);}",i:["u1","u42","u43"],l:g});e=!0},Sf:function(g){e||u.A();x.set("s52");x.M("u27",.5/g.u(),.5/g.P());g.g(0);J.j(!1,!1)},Kd:function(g){x.set("s55");x.ea("u42",g.m);x.C("u43",g.F);J.j(!1,!1)},instance:function(g){e||u.A();var q="undefined"===typeof g.we?
8:g.we,c=g.width,y=g.Pb,B=[Math.floor(y[0]*c),Math.ceil(y[1]*c)],m=c-2*B[1],k=g.Wc?g.Wc:8,C=Math.ceil(("undefined"===typeof g.bd?1:g.bd)*c);m=Math.min(m,2*C);var A=Math.max(B[1],c/2-C)/c,f="undefined"===typeof g.ma?1:g.ma,p=S.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:m*q}),I=1/k,N=Math.ceil(Math.log(p.u())/Math.log(4));g=p.u();var L=Array(N);for(c=0;c<N;++c)L[c]=S.instance({isFloat:!0,isPot:!1,isLinear:!1,isFlipY:!1,width:Math.ceil(g/Math.pow(4,c+1))});var T=new Uint8Array(4),G={F:-1,
m:[0,0],ma:f};return{Je:function(K){f=K},process:function(K){K.g(0);p.H();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);a.enable(a.BLEND);a.blendFunc(a.CONSTANT_ALPHA,a.ONE);a.blendColor(I,I,I,I);x.set("s53");x.ea("u36",y);x.C("u38",q);x.C("u39",A);x.C("u40",f);for(K=0;K<k;++K)x.C("u37",2*K*Math.PI/k),J.j(!1,!1);a.disable(a.BLEND);x.set("s54");p.g(0);K=p.u();for(var v=0;v<N;++v){L[v].H();var t=L[v].u();x.M("u41",t,t);x.M("u7",1/K,1/K);J.j(!1,!1);L[v].g(0);K=t}b(T);G.m[0]=T[1]/255;G.m[1]=T[2]/
255;G.F=y[0]+(y[1]-y[0])*T[3]/255;G.ma=f;return G}}},be:function(){l=S.instance({width:256,height:1,isFloat:!0});w=S.instance({width:1,isFloat:!1});var g={u1:0};x.$({id:"s56",name:"_",h:"uniform sampler2D u1;uniform vec2 u36,u42;varying vec2 vv0;void main(){float f=mix(u36.x,u36.y,vv0.x),b=0.,a=0.;vec2 c;for(float d=0.;d<51.;d+=1.)c=f*vec2(cos(a),sin(a)),b+=texture2D(u1,u42+c).r,a+=.123137;gl_FragColor=vec4(b/51.,0.,0.,1.);}",i:["u1","u36"],l:g});x.$({id:"s57",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float b=0.,c=0.,d=0.,e;for(float a=0.;a<255.9;a+=1.)d=texture2D(u1,vec2(a/255.,.5)).r,e=step(b,d),b=mix(b,d,e),c=mix(c,a,e);gl_FragColor=vec4(c/255.,0.,0.,1.);}",
i:["u1"],l:g});d=!0},Af:function(g){d||u.be();var q="undefined"===typeof g.m?[0,0]:g.m,c="undefined"===typeof g.Pb?[0,0]:g.Pb,y=new Uint8Array(4),B={m:q,F:0};return{set:function(m,k){q[0]=m[0];q[1]=m[1];c[0]=k[0];c[1]=k[1]},process:function(m){x.set("s56");x.ea("u36",c);x.ea("u42",q);l.H();m.g(0);J.j(!1,!1);x.set("s57");w.H();J.j(!1,!1);w.g(0);b(y);B.F=c[0]+(c[1]-c[0])*y[0]/255;return B}}}};return u}();function ab(b,e){b[e]=!0;b.setAttribute(e,"true")}
function bb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function cb(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function db(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function eb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function fb(b){if(!b)return b;var e=null;if(b.video){var d=function(l){return l&&"object"===typeof l?Object.assign({},l):l};e={};"undefined"!==typeof b.video.width&&(e.width=d(b.video.width));"undefined"!==typeof b.video.height&&(e.height=d(b.video.height));"undefined"!==typeof b.video.facingMode&&(e.facingMode=d(b.video.facingMode))}e={audio:b.audio,video:e};"undefined"!==typeof b.deviceId&&(e.deviceId=b.deviceId);return e}
function gb(b){var e=b.video.width;b.video.width=b.video.height;b.video.height=e;return b}
function hb(b){function e(k){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(C,A){return Math.abs(C-k)-Math.abs(A-k)})}function d(k){var C=fb(b);k=k(C);w.push(k);l(k)}function l(k){if(k.video&&k.video.facingMode&&k.video.facingMode.exact){var C=k.video.facingMode.exact;k=fb(k);delete k.video.facingMode.exact;k.video.facingMode.ideal=C;w.push(k)}}var w=[];if(!b||!b.video)return w;l(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var u=
e(b.video.width.ideal).slice(0,3),g=e(b.video.height.ideal).slice(0,3),q={},c=0;for(q.ha=void 0;c<u.length;q={ha:q.ha},++c){q.ha=u[c];var y={},B=0;for(y.ga=void 0;B<g.length;y={ga:y.ga},++B)if(y.ga=g[B],q.ha!==b.video.width.ideal||y.ga!==b.video.height.ideal){var m=Math.max(q.ha,y.ga)/Math.min(q.ha,y.ga);m<4/3-.1||m>16/9+.1||d(function(k,C){return function(A){A.video.width.ideal=k.ha;A.video.height.ideal=C.ga;return A}}(q,y))}}}d(function(k){return gb(k)})}b.video.width&&b.video.height&&(b.video.width.ideal&&
b.video.height.ideal&&d(function(k){delete k.video.width.ideal;delete k.video.height.ideal;return k}),d(function(k){delete k.video.width;delete k.video.height;return k}));b.video.facingMode&&(d(function(k){delete k.video.facingMode;return k}),b.video.width&&b.video.height&&d(function(k){gb(k);delete k.video.facingMode;return k}));w.push({audio:b.audio,video:!0});return w}
function ib(b){try{var e=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){e=window.innerHeight>window.innerWidth}if(e&&b&&b.video){e=b.video.width;var d=b.video.height;e&&d&&e.ideal&&d.ideal&&e.ideal>d.ideal&&(b.video.height=e,b.video.width=d)}}
function jb(b){b.volume=0;ab(b,"muted");if(db()){if(1===b.volume){var e=function(){b.volume=0;window.removeEventListener("mousemove",e,!1);window.removeEventListener("touchstart",e,!1)};window.addEventListener("mousemove",e,!1);window.addEventListener("touchstart",e,!1)}setTimeout(function(){b.volume=0;ab(b,"muted")},5)}}
function kb(b,e,d,l){function w(g){u||(u=!0,d(g))}var u=!1;navigator.mediaDevices.getUserMedia(l).then(function(g){function q(){setTimeout(function(){if(b.currentTime){var c=b.videoWidth,y=b.videoHeight;if(0===c||0===y)w("VIDEO_NULLSIZE");else{c&&(b.style.width=c.toString()+"px");y&&(b.style.height=y.toString()+"px");c={Cd:null,Ne:null,qe:null};try{var B=g.getVideoTracks()[0];B&&(c.qe=B,c.Cd=B.getCapabilities(),c.Ne=B.getSettings())}catch(m){}db()||bb()?b.parentNode&&null!==b.parentNode?(u||e(b,g,
c),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),jb(b),u||e(b,g,c),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";jb(b);setTimeout(function(){b.play()},100)},80)):u||e(b,g,c)}}else w("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=g:(b.src=window.URL.createObjectURL(g),b.videoStream=g);jb(b);b.addEventListener("loadeddata",function(){var c=b.play();jb(b);"undefined"===typeof c?
q():c.then(function(){q()}).catch(function(){w("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(g){w(g)})}
function lb(b,e,d){var l=eb()?document.createElement("video"):!1;if(l)if(eb()){if(d&&d.video){if(bb()){var w=cb();0!==w[0]&&(12>w[0]||12===w[0]&&2>w[1])&&ib(d)}d.video.width&&d.video.width.ideal&&(l.style.width=d.video.width.ideal+"px");d.video.height&&d.video.height.ideal&&(l.style.height=d.video.height.ideal+"px")}ab(l,"autoplay");ab(l,"playsinline");d&&d.audio?l.volume=0:ab(l,"muted");kb(l,b,function(){function u(q){if(0===q.length)e("INVALID_FALLBACKCONSTRAINTS");else{var c=q.shift();kb(l,b,function(){u(q)},
c)}}var g=hb(d);u(g)},d)}else e&&e("MEDIASTREAMAPI_NOTFOUND");else e&&e("VIDEO_NOTPROVIDED")}
var mb=function(){var b={n:5,Kb:1,Uc:0,Qa:[30,45],La:[2,200],k:.7,Se:200,se:.05},e=-1,d=null,l=-1,w=-1,u=0,g=-1,q=-1,c=0,y=0,B=b.La[1],m={Zd:function(){switch(e){case -1:return-1;case 0:return q+d.Uc;case 1:return c}},gf:function(k){return Math.pow(Math.min(Math.max(g,0),d.n-1)/(d.n-1),k||1)},A:function(k){d=Object.assign({},b,k);g=q=d.Kb;e=0;m.reset()},Oe:function(k){k=("undefined"===typeof k?Date.now():k)||0;var C=Math.min(Math.max(k-y,d.La[0]),d.La[1]);B=C;y=k;var A=-1===l?0:d.k;l=Math.min(Math.max(1E3/
C,5),120)*(1-A)+l*A;k-w>d.Se&&5<++u&&(C=d.k,g=g*(1-C)+(l<d.Qa[0]?q-1:l>d.Qa[1]?q+1:q)*C,Math.abs(g-q)>1-d.se&&(C=Math.min(Math.max(Math.round(g),0),d.n-1),C!==q&&(g=q=C,l=(d.Qa[1]-d.Qa[0])/2)),w=k)},Fe:function(k){c=k;e=1},Vf:function(){e=0;m.reset()},reset:function(){B=b.La[1];w=l=-1;u=0},Td:function(){return B}};return m}(),nb=function(){function b(){d(B+c.Jb)}function e(){C.Fa=0===c.oa?window.requestAnimationFrame(d):window.requestAnimationFrame(l)}function d(f){k.Aa&&null!==y&&(f-=B,f=Math.min(Math.max(f,
c.sc[0]),c.sc[1]),B+=f,w(),y(B))}function l(f){k.Aa&&(C.timeout=window.setTimeout(d.bind(null,f),c.oa))}function w(){C.Fa&&(window.cancelAnimationFrame(C.Fa),C.Fa=null);C.timeout&&(window.clearTimeout(C.timeout),C.timeout=null)}function u(f){f?(k.Va=!0,m.postMessage("STOP"),Ka.jd(!0),e()):(k.Va=!1,Ka.jd(!1),m.postMessage("START"))}function g(){window.addEventListener("blur",function(){u(!1)});window.addEventListener("focus",function(){u(!0)})}var q={Rc:!0,sc:[1,200],Jb:50,oa:0},c=null,y=null,B=0,
m=null,k={ta:!1,Va:!0,le:!1,je:!1,Aa:!1},C={Fa:null,timeout:null},A={A:function(f){c=Object.assign(q,f);Object.assign(k,{Va:!0,ta:!0,Aa:!1});if(c.Rc){f=!1;try{if("undefined"===typeof SharedWorker){var p=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
c.Jb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),I=new Worker(p);I.addEventListener("message",b);m=I;k.le=!0}else{var N=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
c.Jb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),L=new SharedWorker(N);L.port.start();L.port.addEventListener("message",b);m=L.port;k.je=!0}f=!0}catch(T){}f&&g()}},update:function(f){Object.assign(c,
f)},De:function(f){k.ta||A.A({});w();k.Aa=!0;y=f;k.Va&&e()},stop:function(){y=null;k.Aa=!1;w()}};return A}();
window.JEEPUPILAPI=function(){var b,e,d,l,w,u,g,q,c,y,B,m;function k(){return{m:[.5,.5],scale:[1,1],S:!1,gb:!1,na:!1,L:{m:[.5,.5],F:0,ma:1},Y:{m:[.5,.5],F:0}}}function C(){if(ta===oa.play)return!1;ta=oa.play;nb.stop();f(0)}function A(r,E,ba,ca){r=4*r+E;return ba+(za[r]/255+za[r+8]/65025)*(ca-ba)}function f(){if(ta!==oa.pause){x.Nd();J.reset();J.Ha();a.disable(a.DEPTH_TEST);La.W();x.Ca();var r=W.element.currentTime-W.ab;0>r&&(W.ab=W.element.currentTime);1E3*r<n.Ue||(W.S.refresh(),W.ab+=r,x.set("s66"),
W.Da.H(),W.S.g(0),J.j(!1,!1));r=mb.Zd();for(var E=0;E<r;++E)wa=E===r-1,x.set("s67"),Q.H(),W.Da.g(0),R.g(1),J.j(!1,!1),Q.g(0),Fa.U(Q);mb.Oe();La.O();a.viewport(0,0,2,2);x.set("s58");R.g(0);J.j(!1,!1);a.readPixels(0,0,2,2,a.RGBA,a.UNSIGNED_BYTE,za);ja.x=A(0,1,-1,1);ja.y=A(0,2,-1,1);ja.Ub=A(0,3,0,1);ja.Rb=A(1,0,-n.ua[0],n.ua[0]);ja.Sb=A(1,1,-n.ua[1],n.ua[1]);ja.Tb=A(1,2,-n.ua[2],n.ua[2]);ja.Ia=A(1,3,0,1);aa.Gd=ja.Ia-O.detected;aa.ub=ja.x-O.x;aa.vb=ja.y-O.y;aa.tb=ja.Ub-O.s;aa.qb=ja.Rb-O.rx;aa.rb=ja.Sb-
O.ry;aa.sb=ja.Tb-O.rz;E=mb.Td();r=Math.sqrt(aa.ub*aa.ub+aa.vb*aa.vb+aa.tb*aa.tb)/E;E=Math.sqrt(aa.qb*aa.qb+aa.rb*aa.rb+aa.sb*aa.sb)/E;r=1-ya(n.oc[0],n.oc[1],r);E=1-ya(n.ad[0],n.ad[1],E);r=r*E*ya(n.$c[0],n.$c[1],ja.Ia);E=Aa[++na%Aa.length]=r;for(var ba=0;ba<Aa.length;++ba)E=Math.min(E,Aa[ba]);E=Math.max(.5,E);r=Math.min(E,r);r=da(n.jc[0],n.jc[1],1-Math.pow(r,n.ud));O.x=da(O.x,ja.x,r);O.y=da(O.y,ja.y,r);O.s=da(O.s,ja.Ub,r);O.rx=da(O.rx,ja.Rb,r);O.ry=da(O.ry,ja.Sb,r);O.rz=da(O.rz,ja.Tb,r);O.detected=
da(O.detected,ja.Ia,n.td);!X.sa&&O.detected>n.qc+n.pc?X.sa=!0:X.sa&&O.detected<n.qc-n.pc&&(X.sa=!1);if(X.sa){La.W();var ca=Z/fa;r=O.x+n.Md*O.ry*O.s;E=O.y+O.s*n.zc[1]*ca;var pa=O.s*n.zc[0]*ca;ba=O.s*n.Oa[0];ca*=O.s*n.Oa[1];ba*=2*W.T[0];ca*=2*W.T[1];r*=2*W.T[0];E*=2*W.T[1];pa*=W.T[0];0<O.rx&&(E*=Math.cos(n.Pd*O.rx));var ua=pa;ua=0>O.ry?ua+Math.sin(O.ry)*n.Na[0]:ua-Math.sin(O.ry)*n.Na[1];X.D[0].m[0]=r+ua;X.D[0].m[1]=E;X.D[0].scale[0]=ba;X.D[0].scale[1]=ca;pa=0<O.ry?pa-Math.sin(O.ry)*n.Na[0]:pa+Math.sin(O.ry)*
n.Na[1];X.D[1].m[0]=r-pa;X.D[1].m[1]=E;X.D[1].scale[0]=ba;X.D[1].scale[1]=ca;X.D.forEach(p)}La.Re();X.sa&&(a.viewport(0,fa/2,Z/2,fa/2),I(X.D[1]),a.viewport(Z/2,fa/2,Z/2,fa/2),I(X.D[0]),a.viewport(Z/2,fa/4,Z/4,fa/4),N(X.D[1]),a.viewport(Z/2+Z/4,fa/4,Z/4,fa/4),N(X.D[0]),a.viewport(Z/2,0,Z/4,fa/4),L(X.D[1]),a.viewport(Z/2+Z/4,0,Z/4,fa/4),L(X.D[0]),a.viewport(0,0,Z/2,fa/2));x.set("s59");R.g(0);W.Da.g(1);J.j(!1,!1);ia.lb&&(O.pupilLeftRadius=X.D[0].Y.F,O.pupilRightRadius=X.D[1].Y.F,ia.lb(O));ta===oa.play&&
nb.De(f)}}function p(r){x.set("s60");x.M("u27",sa*r.scale[0],sa*r.scale[1]);x.ea("u42",r.m);x.ea("u4",r.scale);x.C("u44",z);r.S.H();W.S.g(0);J.j(!1,!1);var E=ka.process(r.S);r.L.m[0]=da(r.L.m[0],E.m[0],n.Gb);r.L.m[1]=da(r.L.m[1],E.m[1],n.Gb);r.L.F=da(r.L.F,E.F,n.Gb);r.L.ma=E.ma;x.set("s61");x.M("u42",r.m[0]+r.scale[0]*(2*r.L.m[0]-1),r.m[1]+r.scale[1]*(2*r.L.m[1]-1));x.M("u4",2*r.L.F*r.scale[0],2*r.L.F*r.scale[1]);W.S.g(0);r.gb.H();J.j(!1,!1);E=r.na.u();var ba=(n.ka-E)/2;x.set("s62");x.C("u45",la);
x.M("u46",ba/n.ka,E/n.ka);r.na.H();r.gb.g(0);J.j(!1,!1);S.Ce(r.na,Da);La.W();for(var ca=0,pa=[.5,.5],ua=0;ua<E;++ua)for(var va=0;va<E;++va){var ha=Da[4*(va+ua*E)];ha>ca&&(ca=ha,pa[0]=(va+ba)/n.ka,pa[1]=(ua+ba)/n.ka)}r.Y.m[0]=pa[0];r.Y.m[1]=pa[1];r.Y.F=n.bb[0]+ca/255*(n.bb[1]-n.bb[0]);r.Y.F*=.5}function I(r){r.S.g(0);x.set("s63");x.ea("u42",r.L.m);x.C("u47",r.L.F);x.C("u48",r.L.ma);J.j(!1,!1)}function N(r){r.gb.g(0);x.set("s64");x.ea("u42",r.Y.m);x.C("u49",r.Y.F);J.j(!1,!1)}function L(r){r.na.g(0);
x.set("s65");J.j(!1,!1)}function T(){W.Da=S.instance({isPot:!0,isMirror:!0,isLinear:!0,isFloat:!1,width:Z,height:fa});Q=S.instance({isPot:!0,isFloat:!1,width:Fa.Fc()});var r={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,n.borderWidth,n.borderHeight,0,0,0,0,0])};R=Na.instance(r);za=new Uint8Array(8*r.width);ja={Ia:0,x:0,y:0,Ub:1,Rb:0,Sb:0,Tb:0};O={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,pupilLeftRadius:0,pupilRightRadius:0};aa={Gd:0,ub:0,vb:0,tb:0,qb:0,rb:0,sb:0};X.D.forEach(function(E){E.S=
S.instance({isPot:!1,isLinear:!0,isFloat:!0,width:n.wb,height:Math.round(n.wb*n.Oa[1]/n.Oa[0])});E.gb=S.instance({isPot:!0,isLinear:!0,isFloat:!0,isMipmap:!1,width:n.ka});E.na=S.instance({isPot:!1,isLinear:!1,isFloat:!1,width:Math.round(n.ue*n.ka)});Da=new Uint8Array(E.na.u()*E.na.u()*4)})}function G(){x.I("s67",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u52",value:1},{type:"2f",name:"u53",value:ra}]);x.I("s68",[{type:"1i",name:"u54",value:0},{type:"1i",name:"u52",value:1},{type:"1f",name:"u57",
value:n.minScaleTracked},{type:"1f",name:"u58",value:n.maxScaleTracked},{type:"1f",name:"u59",value:n.Pe},{type:"1f",name:"u60",value:n.rd},{type:"1f",name:"u61",value:n.pd},{type:"3f",name:"u56",value:[n.bc[0]*ra[0],n.bc[1]*ra[1],n.bc[2]]}]);x.I("s69",[{type:"1i",name:"u54",value:0}]);x.I("s58",[{type:"1i",name:"u52",value:0},{type:"1f",name:"u62",value:ra[0]}]);x.I("s59",[{type:"1i",name:"u52",value:0},{type:"1i",name:"u63",value:1},{type:"2f",name:"u53",value:ra}]);var r=[{type:"1i",name:"u1",
value:0}];x.I("s60",r);x.I("s61",r);x.I("s62",[{type:"2f",name:"u36",value:n.bb}].concat(r));x.I("s63",r);x.I("s64",r);x.I("s65",r)}function K(){var r=Fa.Fc(),E=Z/r;l=n.minScale*E;w=n.maxScale*E;u=(1-2*n.borderWidth)/n.nStepsX;g=(1-2*n.borderHeight)/n.nStepsY;q=(w-l)/n.nStepsScale;c=n.borderWidth;y=n.borderHeight;B=1-n.borderWidth;m=1-n.borderHeight;ra=[r/Z,r/fa];b=0;e=n.borderWidth;d=n.borderHeight;Ca=l}function v(r){ea(ia.fc+n.neuralNetworkPath,function(E){E=JSON.parse(E);r(E)})}function t(){if(Ma.A({ob:ia.aa,
width:Z,height:fa,debug:!1,Xc:function(){H("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0}))return!0;H("GL_INCOMPATIBLE");return!1}function F(){R.Ee(1);a.viewport(0,0,1,1);x.set("s68");x.Le("u55",e,d,Ca);J.j(!1,!1);wa&&(a.viewport(1,0,1,1),x.set("s69"),J.j(!1,!1));1!==++b%2&&(Ca+=q,Ca>w&&(e+=u,Ca=l,e>B&&(e=c,d+=g,d>m&&(d=y))))}function M(){x.I("s66",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u50",value:W.T}])}function U(){W.T[0]=.5;W.T[1]=.5;var r=W.Ja[1]/W.Ja[0],E=Ma.P()/Ma.u();r>E?W.T[1]*=
E/r:W.T[0]*=r/E}function h(r,E,ba){r&&r();r={video:{width:{min:P.minWidth,max:P.maxWidth,ideal:P.idealWidth},height:{min:P.minHeight,max:P.maxHeight,ideal:P.idealHeight}},audio:!1};P.deviceId&&(r.deviceId=P.deviceId);lb(function(ca){E&&E(ca);ba(ca)},function(){H("WEBCAM_UNAVAILABLE")},r)}function H(r){ta!==oa.error&&(ta=oa.error,ia.ya&&ia.ya(r))}var n={neuralNetworkPath:"jeelizPupillometryNNC.json",oa:0,ib:[2,5],qd:2,minScale:.3,maxScale:1.1,borderWidth:.2,borderHeight:.2,
nStepsX:6,nStepsY:5,nStepsScale:3,bc:[.1,.1,.25],Pe:60,minScaleTracked:.6,maxScaleTracked:20,rd:.7,pd:1,oc:[.0015,.005],ad:[.003,.02],$c:[.9,.98],ua:[.49,.42,.17],jc:[.3,1],td:.2,ud:2,qc:.5,pc:.03,zc:[.9,.57],Oa:[.22,.22],Md:.5,wb:256,Na:[0,0],Pd:3,nd:[.21,.24],md:40,od:.4,ka:128,Gb:1,de:.005,bb:[.07,.65],ue:.15,ve:.025,Ue:20},P={idealWidth:3264,idealHeight:2448,minWidth:1920,maxWidth:7680,minHeight:1080,maxHeight:4320},la=n.ve,sa=n.de,z=-1,X={sa:!1,D:[k(),k()]},oa={oe:-1,error:-2,Ic:0,play:1,pause:2},
ta=oa.Ic,W={element:!1,S:!1,Da:!1,Ja:[0,0],T:[.5,.5],ab:0},ia={ya:!1,lb:!1,fc:"./",aa:!1,Ea:n.oa,Mc:!0},Fa=null;var Ca=d=e=b=w=l=m=B=y=c=q=g=u=0;var Z=-1,fa=-1,ra=null,Q=null,R=null,za=null,ja=null,O=null,aa=null,wa=!1,Da=null,Aa=new Float32Array(12),na=0,ka=null,ma={init:function(r){function E(){ta!==oa.error&&2===++ba&&(U(),W.S=S.instance({N:W.element,isPot:!1,isFloat:!1,isFlipY:!0,isLinear:!0}),M(),ia.ya&&(ia.ya(!1,{GL:a,canvasElement:ia.aa,videoTexture:W.Da.get()}),a.disable(a.BLEND)),C())}if(ta!==
oa.Ic)return r.callbackReady&&r.callbackReady("ALREADY_INITIALIZED"),!1;ta=oa.oe;r.callbackReady&&(ia.ya=r.callbackReady);r.callbackTrack&&(ia.lb=r.callbackTrack);"undefined"!==typeof r.animateDelay&&(ia.Ea=r.animateDelay);nb.A({Rc:r.isKeepRunningOnWinFocusLost||!1,oa:ia.Ea});mb.A({Kb:0,n:n.ib[1]-n.ib[0]+1,Uc:n.ib[0]});ia.Mc="undefined"===typeof r.isAdaptative?!0:r.isAdaptative;ia.Mc||mb.Fe(n.qd);"undefined"!==typeof r.NNCPath&&(ia.fc=r.NNCPath);if(!r.canvasId)return H("NO_CANVASID"),!1;ia.aa=document.getElementById(r.canvasId);
if(!ia.aa)return H("INVALID_CANVASID"),!1;Z=ia.aa.width;fa=ia.aa.height;if(!Z||!fa)return H("INVALID_CANVASDIMENSIONS"),!1;var ba=0;h(r.onWebcamAsk,r.onWebcamGet,function(ca){if(ta!==oa.error){var pa=ca.videoHeight;W.Ja[0]=ca.videoWidth;W.Ja[1]=pa;W.element=ca;E&&E()}});v(function(ca){if(!t())return!1;Fa=new Za({Xa:ca.layers,Ob:"gpuRawAvg",Lb:F});x.ic([{id:"s66",name:"_",fa:"attribute vec2 a0;uniform vec2 u50;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u50*a0;}",pa:["a0"],
ia:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u50"],precision:"lowp"},{id:"s67",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",fa:"attribute vec2 a0;uniform sampler2D u52;uniform vec2 u53;varying vec2 vv0;void main(){vec4 a=texture2D(u52,vec2(.17,.5));vec2 b=a.gb,c=a.a*u53;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",pa:["a0"],ia:[2],i:["u1","u52","u53"],precision:"lowp"},{id:"s68",name:"_",h:"uniform sampler2D u54,u52;uniform vec3 u55,u56;uniform float u57,u58,u59,u60,u61;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u54,vec2(.5,.5)),d=texture2D(u54,vec2(.75,.5));float f=dot(e,texture2D(u54,vec2(.75,.75))),g=dot(e,texture2D(u54,vec2(0.,.5))),h=dot(e,texture2D(u54,vec2(.25,.5)));vec4 a=texture2D(u52,vec2(.25,.5));float b=dot(c,e),i=dot(d,e);bool j=b>u60&&b>i+u61;j?a.r=2.:a.r>u59?a.r=0.:a.r>1.9&&(a.a>u58||a.a<u57)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u55);else a.r*=step(1.9,a.r),a.gba+=vec3(f,g,h)*u56*a.a;gl_FragColor=a;}",
fa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u54 u52 u55 u57 u58 u59 u56 u60 u61".split(" ")},{id:"s69",name:"_",fa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u54;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u54,vec2(0.,.75))),b=dot(e,texture2D(u54,vec2(.25,.75))),c=dot(e,texture2D(u54,vec2(.5,.75))),d=dot(e,texture2D(u54,vec2(.5,.5)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u54"]},{id:"s58",name:"_",h:"uniform sampler2D u52;uniform float u62;varying vec2 vv0;void main(){float f=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u52,vec2(vv0.x,.5));a.a=mix(a.a*u62,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",i:["u52","u62"]},{id:"s59",name:"_",h:"uniform sampler2D u52,u63;uniform vec2 u53;varying vec2 vv0;void main(){vec2 a=vec2(1.-vv0.x,vv0.y);vec4 d=texture2D(u52,vec2(.25,.5));vec2 b=d.gb;float h=d.a;vec2 c=h*u53,i=b+c/2.,j=b-c/2.,f=step(j,a)*step(a,i);vec3 k=texture2D(u63,a).rgb;vec2 g=2.*abs(b-a)/c;float l=f.x*f.y*pow(max(g.x,g.y),3.);vec3 m=mix(k,vec3(0.,.6,1.),l);gl_FragColor=vec4(m,1.);}",
i:["u52","u63","u53"]},{id:"s60",name:"_",h:"varying vec2 vv0;uniform sampler2D u1;uniform vec2 u27;uniform float u44;const vec3 f=vec3(.3333,.3333,.3333);void main(){vec3 a=vec3(0.);a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y-u27.y)).rgb*1.,a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y)).rgb*2.,a-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y+u27.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y-u27.y)).rgb*1.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y)).rgb*2.,a+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y+u27.y)).rgb*1.;vec3 b=vec3(0.);b-=texture2D(u1,vec2(vv0.x-u27.x,vv0.y-u27.y)).rgb*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27.y)).rgb*2.,b-=texture2D(u1,vec2(vv0.x+u27.x,vv0.y-u27.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x-u27.x,vv0.y+u27.y)).rgb*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27.y)).rgb*2.,b+=texture2D(u1,vec2(vv0.x+u27.x,vv0.y+u27.y)).rgb*1.;vec3 e=a*a+b*b,g=texture2D(u1,vv0).rgb;float c=dot(e,f),h=dot(g,f);c=smoothstep(u44-.1,u44+.1,c),gl_FragColor=vec4(c,h,0.,1.);}",
fa:"attribute vec2 a0;uniform vec2 u4,u42;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u42+u4*a0,vv0=.5*vv0+vec2(.5,.5);}",pa:["a0"],ia:[2],i:["u1","u4","u42","u27","u44"]},{id:"s61",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",fa:"attribute vec2 a0;uniform vec2 u4,u42;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u42+u4*a0,vv0=.5*vv0+vec2(.5,.5);}",pa:["a0"],ia:[2],i:["u1","u4","u42"]},{id:"s62",name:"_",h:"uniform sampler2D u1;uniform vec2 u46,u36;uniform float u45;varying vec2 vv0;const float n=3.141592;const int o=4;int j(vec2 a,vec3 d){vec3 b=texture2D(u1,a).rgb;float c=length(b);return int(step(c,u45));}void main(){vec2 c=u46.x*vec2(1.,1.)+vv0*u46.y;vec3 k=texture2D(u1,c).rgb;float d=0.,e,f;int a;vec2 l,g,b;for(float h=0.;h<60.;h+=1.){e=0.,a=o,f=h*n/60.,l=vec2(cos(f),sin(f));for(float i=0.;i<255.;i+=1.){g=(u36.x/2.+i/255.*(u36.y-u36.x)/2.)*l;if(a>0)b=c+g,a-=1-j(b,k),b=c-g,a-=1-j(b,k),e+=1.;}d=max(e,d);}gl_FragColor=vec4(d/255.,0,0,1.);}",
i:["u1","u46","u36","u45"]},{id:"s63",name:"_",h:"uniform sampler2D u1;uniform vec2 u42;uniform float u47,u48;const vec3 f=vec3(0.,1.,0.);varying vec2 vv0;void main(){vec2 b=vec2(1.,u48);float d=distance(vv0*b,u42*b),g=step(abs(d-u47),1e-3);vec3 c=texture2D(u1,vv0).rgb,a=c.g*vec3(1.,1.,1.);a.r+=c.r,a=mix(a,f,g),gl_FragColor=vec4(a,1.);}",i:["u1","u42","u47","u48"]},{id:"s64",name:"_",h:"uniform sampler2D u1;uniform vec2 u42;uniform float u49;const vec3 f=vec3(0.,1.,0.),g=vec3(0.,1.,0.);varying vec2 vv0;void main(){float b=step(abs(distance(vv0,u42)-u49),2e-3),c=step(distance(vv0,u42),4e-3);vec3 d=texture2D(u1,vv0).rgb,a=d;a=mix(a,f,b),a=mix(a,g,c),gl_FragColor=vec4(a,1.);}",
i:["u1","u42","u49"]},{id:"s65",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){float a=texture2D(u1,vv0).r;gl_FragColor=vec4(a,0.,0.,1.);}",i:["u1"]}]);T();ka=$a.instance({width:n.wb,Pb:n.nd,Wc:n.md,bd:n.od});K();G();E();ma.update_controls()});return!0},toggle_pause:function(r){if(-1!==[oa.play,oa.pause].indexOf(ta))return r?ta!==oa.play?r=!1:(nb.stop(),ta=oa.pause,r=!0):r=C(),r},set_animateDelay:function(r){ia.Ea=r;nb.update({oa:ia.Ea})},resize:function(){var r=ia.aa.width,E=ia.aa.height;
if(r===Z&&E===fa)return!1;Z=r;fa=E;K();G();U();M();return!0},update_controls:function(){function r(ba){return(ba=document.getElementById(ba))?parseFloat(ba.value):!1}var E=r("jeePupilControlIrisEdgeSize");!1!==E&&(sa=E,M());E=r("jeePupilControlIrisThres");!1!==E&&(z=E);E=r("jeePupilControlIrisRoundness");!1!==E&&ka.Je(E);E=r("jeePupilControlPupilSensitivity");!1!==E&&(la=E)}};return ma}();
;return JEEPUPILAPI||window.JEEPUPILAPI;})();